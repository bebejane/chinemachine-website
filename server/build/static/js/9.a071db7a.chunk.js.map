{"version":3,"sources":["services/storeService.js","components/verification/Container.js","components/verification/Login.js","components/verification/Logout.js","components/verification/Signup.js","components/verification/Reset.js","components/verification/Update.js","components/verification/Verify.js","components/verification/ReCode.js","components/verification/index.js","components/util/AppointmentCalendar.js","components/util/Button.js","services/verificationService.js","services/index.js","services/dictionaryService.js","components/appointment/AppointmentDate.js","components/appointment/AppointmentVerification.js","components/appointment/AppointmentBook.js","components/appointment/AppointmentConfirmation.js","components/appointment/AppointmentNav.js","components/appointment/index.js","services/userService.js","services/appointmentService.js"],"names":["get","storeId","a","axios","res","data","getAll","add","params","post","update","id","patch","delete","deleteAll","Container","props","state","dict","redirect","loading","error","undefined","form","this","setState","dictionaryService","getDictionary","verificationService","getUser","user","console","log","onError","logout","onChange","header","children","type","noLogo","nav","onClick","login","signup","Loader","href","alt","src","logo","Component","Login","loggingIn","email","password","handleSubmit","bind","handleFormChange","handleLogout","handleLogin","e","target","value","preventDefault","onSubmit","setTimeout","onLogin","Fragment","name","autoFocus","placeholder","Button","className","message","youAreLoggedIn","Logout","onLogout","loggingOut","Signup","isSignedUp","signingUp","token","firstName","lastName","email2","phone","password2","loadDictionary","handleSignUp","onSignUp","autoComplete","reType","defaultCountry","val","handlePhoneChange","Reset","resetting","success","requestPasswordReset","checkEmailForPasswordResetLink","fillInEmailPasswordReset","Update","updating","newpassword","newpassword2","updatePassword","yourPasswordWasReset","newPassword","send","Verify","verified","verifying","code","formRef","React","createRef","verify","accountIsVerified","onVerification","checkEmailToVerifyAccount","ref","securityCode","ReCode","resent","resending","reverify","onReCode","enterEmailForCode","reSendingVerificationCode","Verification","searchParams","URLSearchParams","location","search","pathname","replace","noBackground","types","reset","recode","resetPassword","changePassword","verifyAccount","err","response","toString","document","title","component","handleShowType","history","push","style","background","key","handleError","onUpdated","handleUpdated","handleVerification","forgotPassword","createAvailableTime","year","month","day","hour","minute","store","startTime","moment","tz","format","unix","endTime","_id","generated","generateAvailable","date","available","h","m","getFullYear","getMonth","getDate","Math","floor","AppointmentCalendar","Date","selected","availability","loadingAppointment","saving","cancelling","refreshing","done","calendarDate","stores","avail","availableMonth","appointment","updatingSlot","customerSearchTerm","customerSearch","customer","booking","handleCalendarChange","handleDateChanged","handleIsDateDisabled","handleDeleteAppointment","handleIsDateAvailable","handleStartDateChange","handleStoreChange","handleCustomerSearch","handleCustomerSearchSelected","handleCustomerBooking","refreshInterval","langCode","storeService","length","setStateAsync","loadAll","setInterval","Promise","resolve","loadAppointmentsByMonth","loadAppointments","clearInterval","edit","appointmentService","getByDate","map","idx","filter","userId","status","isBefore","getByMonth","getTime","newDate","activeStartDate","removeAvailability","newAvailability","updateAvailabilities","getElementById","scrollIntoView","onSelect","view","isSame","booked","cancel","opt","s","toDate","subtract","reject","userService","c","label","action","appointmentId","bookInternal","minDate","getMinDate","selectStyle","valueContainer","provided","justifyContent","fontWeight","slots","onDoubleTap","handleToggleAvailability","onTap","handleSelected","styles","backgroundColor","city","postalCode","menuPlacement","isSearchable","options","maxDetail","minDetail","locale","tileDisabled","tileClassName","tileContent","handleTileContent","next2Label","prev2Label","showNeighboringMonth","onActiveStartDateChange","noAppointmentsAvailableMonth","noAppointmentsAvailable","overlay","to","loadOptions","cacheOptions","blurInputOnSelect","disabled","handleCancelAppointment","handleClick","tokenOrCode","defaults","withCredentials","term","updateMany","dictionary","items","AppointmentDate","onDateChange","onSelectAvailable","nextProps","prevState","AppointmentVerification","AppointmentBook","formatAvailability","address","bookThisAppointment","AppointmentConfirmation","thanksBooking","appointmentBookedFor","_langCode","gotoAccount","AppointmentNav","prev","book","next","onPrev","back","onNext","color","onBookAppointment","confirm","VIEWS","defaultState","views","viewIndex","nextView","Appointment","handleSelectAvailable","handleBookAppointment","handleRefresh","handleDateChange","handleCloseError","handlePrev","handleNext","loadAppointAvailabilities","handleView","newViewIndex","componentDidMount","bookAppointment","savingApointment","getAppointments","path","getAllByMonth","getAllByWeek","week","getAllByUser","getData","sectionId"],"mappings":"sLAEe,KACdA,IAAI,WAAD,4BAAE,WAAOC,GAAP,eAAAC,EAAA,sEACYC,IAAMH,IAAI,cAAgBC,GADtC,cACAG,EADA,yBAEGA,EAAIC,MAFP,2CAAF,mDAAC,GAIJC,OAAO,WAAD,4BAAE,4BAAAJ,EAAA,sEACSC,IAAMH,IAAI,cADnB,cACHI,EADG,yBAEAA,EAAIC,MAAQ,IAFZ,2CAAF,kDAAC,GAIPE,IAAI,WAAD,4BAAE,WAAOC,GAAP,eAAAN,EAAA,sEACYC,IAAMM,KAAK,aAAcD,GADrC,cACAJ,EADA,yBAEGA,EAAIC,MAFP,2CAAF,mDAAC,GAIJK,OAAO,WAAD,4BAAE,WAAOC,EAAIH,GAAX,eAAAN,EAAA,sEACSC,IAAMS,MAAM,cAAgBD,EAAIH,GADzC,cACHJ,EADG,yBAEAA,EAAIC,MAFJ,2CAAF,qDAAC,GAIPQ,OAAO,WAAD,4BAAE,WAAOZ,GAAP,eAAAC,EAAA,sEACSC,IAAMU,OAAO,cAAgBZ,GADtC,cACHG,EADG,yBAEAA,EAAIC,MAFJ,2CAAF,mDAAC,GAIPS,UAAU,WAAD,4BAAE,4BAAAZ,EAAA,sEACMC,IAAMU,OAAO,cADnB,cACNT,EADM,yBAEHA,EAAIC,MAFD,2CAAF,kDAAC,K,2MCuEIU,E,kDAtFd,WAAYC,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAQ,CACZC,KAAM,GACNC,SAAUH,EAAMG,SAChBC,SAAS,EACTC,WAAOC,EACPC,KAAM,IAPW,E,yLAWlBC,KAAKC,SAAS,CAAEL,SAAS,I,kBAGLM,IAAkBC,cAAc,M,OAA7CT,E,OACNM,KAAKC,SAAS,CAAEP,S,mFAIGU,IAAoBC,U,SAAjCC,E,QAEIN,KAAKC,SAAS,CAAEK,SACrBC,QAAQC,IAAI,sB,mDAEjBR,KAAKC,SAAS,CAAEI,SAAS,I,QAE1BL,KAAKC,SAAS,CAAEL,SAAS,I,uSAILM,IAAkBC,cAAc,M,OAA7CT,E,OACNM,KAAKC,SAAS,CAAEP,S,gDAEhBM,KAAKR,MAAMiB,QAAX,M,uRAKML,IAAoBM,S,OAC1BV,KAAKR,MAAMmB,SAAS,SACpBX,KAAKC,SAAS,CAAEK,UAAMR,I,gDAEtBE,KAAKR,MAAMiB,QAAX,M,8IAGQ,IAAD,OACAb,EAAYI,KAAKP,MAAjBG,QADA,EAEgDI,KAAKR,MAArDoB,EAFA,EAEAA,OAAQC,EAFR,EAEQA,SAAUC,EAFlB,EAEkBA,KAAMjB,EAFxB,EAEwBA,MAAOkB,EAF/B,EAE+BA,OAAQrB,EAFvC,EAEuCA,KACzCsB,EACI,UAATF,EACC,yBAAK3B,GAAG,mBAAmB8B,QAAS,kBAAM,EAAKzB,MAAMmB,SAAS,WAC5DjB,EAAKwB,OAGP,yBAAK/B,GAAG,mBAAmB8B,QAAS,kBAAM,EAAKzB,MAAMmB,SAAS,YAC5DjB,EAAKyB,QAIT,OAAIvB,EAAgB,kBAACwB,EAAA,EAAD,MAGnB,yBAAKjC,GAAG,qBACP,yBAAKA,GAAG,iBACP,yBAAKA,GAAG,qBACP6B,GAEF,yBAAK7B,GAAG,4BACR,yBAAKA,GAAG,oBACNyB,EACD,yBAAKzB,GAAG,+BACL4B,GACD,uBAAGM,KAAK,KACP,yBAAKC,IAAI,eAAeC,IAAKC,IAAMrC,GAAG,6BAK1C,yBAAKA,GAAG,qBAAqB0B,GAC5BhB,GAAS,yBAAKV,GAAG,mBAAmBU,GACpCD,GAAW,kBAACwB,EAAA,EAAD,W,GAjFQK,a,gBC6HTC,E,kDA5Hd,WAAYlC,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAQ,CACZC,KAAM,GACNC,SAAUH,EAAMG,SAChBC,SAAS,EACTS,SAAS,EACTsB,WAAW,EACX9B,WAAOC,EACPQ,UAAMR,EACNC,KAAM,CACL6B,MAAO,GACPC,SAAU,KAIZ,EAAKC,aAAe,EAAKA,aAAaC,KAAlB,gBACpB,EAAKC,iBAAmB,EAAKA,iBAAiBD,KAAtB,gBACxB,EAAKE,aAAe,EAAKA,aAAaF,KAAlB,gBAlBF,E,gMAqBlB/B,KAAKC,SAAS,CAAEL,SAAS,I,kBAGLM,IAAkBC,cAAc,M,OAA7CT,E,OACNM,KAAKC,SAAS,CAAEP,S,mFAIGU,IAAoBC,U,SAAjCC,E,SAELC,QAAQC,IAAI,0BACZR,KAAKC,SAAS,CAAEI,SAAS,EAAMC,SAAQ,WACtC,EAAK4B,YAAY5B,OAGlBC,QAAQC,IAAI,sB,mDAGbR,KAAKC,SAAS,CAAEI,SAAS,I,QAE1BL,KAAKC,SAAS,CAAEL,SAAS,I,uVAKLM,IAAkBC,cAAc,M,OAA7CT,E,OACNM,KAAKC,SAAS,CAAEP,S,gDAEhBM,KAAKR,MAAMiB,QAAX,M,sJAIe0B,GAChB,IAAMpC,EAAOC,KAAKP,MAAMM,KACxBA,EAAKoC,EAAEC,OAAOjD,IAAMgD,EAAEC,OAAOC,MAC7BrC,KAAKC,SAAS,CAAEF,W,4EAEEoC,G,uFAClBA,EAAEG,iBACMvC,EAASC,KAAKP,MAAdM,KACRC,KAAKC,SAAS,CAAEJ,WAAOC,EAAW6B,WAAW,I,SAE5C3B,KAAKR,MAAM+C,W,SACQnC,IAAoBc,MAAMnB,EAAK6B,MAAO7B,EAAK8B,U,OAAxDvB,E,OACNkC,YAAW,WACV,EAAKvC,SAAS,CAAEK,OAAMqB,WAAW,EAAOtB,SAAS,IAAQ,kBAAM,EAAK6B,YAAY5B,QAC9E,K,kDAEHN,KAAKC,SAAS,CAAE0B,WAAW,IAC3B3B,KAAKR,MAAMiB,QAAX,M,mJAGUH,GACPN,KAAKR,MAAMiD,SAASzC,KAAKR,MAAMiD,QAAQnC,GAAQN,KAAKP,MAAMa,Q,wKAIvDF,IAAoBM,S,OAC1BV,KAAKC,SAAS,CAAEI,SAAS,I,+CAEzBL,KAAKR,MAAMiB,QAAX,M,6IAGQ,IAAD,EACsCT,KAAKP,MAA3CM,EADA,EACAA,KAAMH,EADN,EACMA,QAAS+B,EADf,EACeA,UAAWtB,EAD1B,EAC0BA,QAC1BX,EAASM,KAAKR,MAAdE,KAER,OACC,kBAAC,IAAMgD,SAAP,KACC,0BAAMH,SAAUvC,KAAK8B,cACpB,2BACC3C,GAAG,QACHwD,KAAK,QACLC,WAAW,EACXC,YAAanD,EAAKkC,MAAQ,MAC1Bd,KAAK,OACLuB,MAAOtC,EAAK6B,MACZjB,SAAUX,KAAKgC,mBAEhB,2BACC7C,GAAG,WACHwD,KAAK,WACLE,YAAanD,EAAKmC,SAAW,MAC7Bf,KAAK,WACLuB,MAAOtC,EAAK8B,SACZlB,SAAUX,KAAKgC,mBAEhB,kBAACc,EAAA,EAAD,CAAQC,UAAU,cAAcjC,KAAK,SAASlB,QAAS+B,GAAvD,SAIAA,GAAa,kBAACP,EAAA,EAAD,CAAQ4B,QAAStD,EAAKiC,YACnCtB,GACA,yBAAKlB,GAAG,kBACP,yBAAKA,GAAG,0BAA0BO,EAAKuD,iBAGxCrD,GAAW,kBAACwB,EAAA,EAAD,W,GAvHIK,aCwBLyB,G,wDAzBd,WAAY1D,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAQ,CACZG,SAAS,EACTC,WAAOC,GAJU,E,0LASjBE,KAAKR,MAAM+C,W,SACLnC,IAAoBM,S,OAC1BV,KAAKC,SAAS,CAAEL,SAAS,IACzBI,KAAKR,MAAM2D,W,gDAEXnD,KAAKR,MAAMiB,QAAX,M,8IAGQ,IACDb,EAAYI,KAAKP,MAAjBG,QACAF,EAASM,KAAKR,MAAdE,KACR,OAAIE,EAAgB,kBAACwB,EAAA,EAAD,CAAQ4B,QAAStD,EAAK0D,WAAa,QAChD,6BAAM1D,EAAKuD,oB,GAtBCxB,c,wBCuJN4B,E,kDAlJd,WAAY7D,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAQ,CACZC,KAAM,GACN4D,YAAY,EACZ1D,SAAS,EACT2D,WAAW,EACX1D,WAAOC,EACP0D,MAAOhE,EAAMgE,MACbzD,KAAM,CACL0D,UAAW,GACXC,SAAU,GACV9B,MAAO,GACP+B,OAAQ,GACRC,MAAO,GACP/B,SAAU,GACVgC,UAAW,KAGb,EAAK/B,aAAe,EAAKA,aAAaC,KAAlB,gBACpB,EAAKC,iBAAmB,EAAKA,iBAAiBD,KAAtB,gBApBN,E,gEAuBlB/B,KAAK8D,mB,gLAIe5D,IAAkBC,cAAc,M,OAA7CT,E,OACNM,KAAKC,SAAS,CAAEP,S,gDAEhBM,KAAKR,MAAMiB,QAAX,M,sJAGe0B,GAChB,IAAMpC,EAAOC,KAAKP,MAAMM,KACxBA,EAAKoC,EAAEC,OAAOjD,IAAMgD,EAAEC,OAAOC,MAC7BrC,KAAKC,SAAS,CAAEF,W,wCAECsC,GACjB,IAAMtC,EAAOC,KAAKP,MAAMM,KACxBA,EAAK6D,MAAQvB,EACbrC,KAAKC,SAAS,CAAEF,W,4EAEEoC,G,uFAClB5B,QAAQC,IAAI,iBACZ2B,EAAEG,iBACMvC,EAASC,KAAKP,MAAdM,KACRC,KAAKC,SAAS,CAAEsD,WAAW,EAAM1D,WAAOC,I,SAEvCS,QAAQC,IAAI,oBACZR,KAAKR,MAAM+C,W,SACQnC,IAAoBe,OAAOpB,G,OAAxCO,E,OACNC,QAAQC,IAAI,aACZR,KAAKC,SAAS,CAAEK,SAAQ,kBAAM,EAAKyD,aAAazD,M,kDAEhDC,QAAQC,IAAI,cACZR,KAAKR,MAAMiB,QAAX,M,QAED+B,YAAW,WACV,EAAKvC,SAAS,CAAEsD,WAAW,MACzB,K,oJAESjD,GAEZ,GADAC,QAAQC,IAAI,YAAaF,IACpBA,EAAM,OAAON,KAAKR,MAAMiB,QAAQ,2BAErCT,KAAKC,SAAS,CAAEqD,YAAY,EAAMhD,OAAMT,WAAOC,IAC3CE,KAAKR,MAAMwE,UAAUhE,KAAKR,MAAMwE,SAAS1D,K,+BAEpC,IAAD,SAC2BN,KAAKP,MAAhCM,EADA,EACAA,KAAMwD,EADN,EACMA,UAAW1D,EADjB,EACiBA,MACjBH,EAASM,KAAKR,MAAdE,KACR,OACC,kBAAC,IAAMgD,SAAP,KACC,0BAAMH,SAAUvC,KAAK8B,cACpB,2BACC3C,GAAG,YACHkD,MAAOtC,EAAK0D,UACZ9C,SAAUX,KAAKgC,iBACfiC,aAAa,MACbpB,YAAanD,EAAK+D,UAAY,MAC9Bd,KAAK,YACL7B,KAAK,SAEN,2BACC3B,GAAG,WACHkD,MAAOtC,EAAK2D,SACZ/C,SAAUX,KAAKgC,iBACfiC,aAAa,MACbpB,YAAanD,EAAKgE,SAAW,MAC7Bf,KAAK,YACL7B,KAAK,SAEN,2BACC3B,GAAG,QACHkD,MAAOtC,EAAK6B,MACZjB,SAAUX,KAAKgC,iBACfiC,aAAa,MACbpB,YAAanD,EAAKkC,MAAQ,MAC1Be,KAAK,QACL7B,KAAK,SAEN,2BACC3B,GAAG,SACHkD,MAAOtC,EAAK4D,OACZhD,SAAUX,KAAKgC,iBACfiC,aAAa,MACbpB,YAAanD,EAAKwE,OAAS,IAAMxE,EAAKkC,MAAQ,MAC9Ce,KAAK,SACL7B,KAAK,SAEN,2BACC3B,GAAG,WACHkD,MAAOtC,EAAK8B,SACZlB,SAAUX,KAAKgC,iBACfiC,aAAa,MACbpB,YAAanD,EAAKmC,SAAW,MAC7Bc,KAAK,WACL7B,KAAK,aAEN,2BACC3B,GAAG,YACHkD,MAAOtC,EAAK8D,UACZlD,SAAUX,KAAKgC,iBACfiC,aAAa,MACbpB,YAAanD,EAAKwE,OAAS,IAAMxE,EAAKmC,SAAW,MACjDc,KAAK,WACL7B,KAAK,aAEN,kBAAC,IAAD,CACC+B,YAAanD,EAAKkE,MAAQ,MAC1BvB,MAAOtC,EAAK6D,MACZO,eAAgB,KAChBxD,SAAU,SAACyD,GAAD,OAAS,EAAKC,kBAAkBD,MAE3C,kBAACtB,EAAA,EAAD,CAAQhC,KAAK,SAASlB,QAAS2D,GAA/B,SAIAA,GAAa,kBAACnC,EAAA,EAAD,CAAQ4B,QAAStD,EAAK6D,YACnC1D,GAAS,yBAAKV,GAAG,gBAAgBU,Q,GA7IjB4B,aCoEN6C,G,wDAtEd,WAAY9E,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAQ,CACZC,KAAM,GACNE,SAAS,EACT2E,WAAW,EACXC,SAAS,EACT3E,WAAOC,EACPQ,UAAMR,EACNC,KAAM,CACL6B,MAAO,KAIT,EAAKE,aAAe,EAAKA,aAAaC,KAAlB,gBACpB,EAAKC,iBAAmB,EAAKA,iBAAiBD,KAAtB,gBAfN,E,2SAkBFI,GAChB,IAAMpC,EAAOC,KAAKP,MAAMM,KACxBA,EAAKoC,EAAEC,OAAOjD,IAAMgD,EAAEC,OAAOC,MAC7BrC,KAAKC,SAAS,CAAEF,W,4EAEEoC,G,qFAClBA,EAAEG,iBAEMvC,EAASC,KAAKP,MAAdM,KACRC,KAAKC,SAAS,CAAEJ,WAAOC,EAAWyE,WAAW,EAAMC,SAAS,I,SAE3DxE,KAAKR,MAAM+C,W,SACLnC,IAAoBqE,qBAAqB1E,EAAK6B,O,OACpDY,YAAW,kBAAM,EAAKvC,SAAS,CAAEsE,WAAW,EAAOC,SAAS,MAAS,K,kDAErExE,KAAKC,SAAS,CAAEsE,WAAW,EAAOC,SAAS,IAC3CxE,KAAKR,MAAMiB,QAAX,M,gJAGQ,IAAD,EAC6BT,KAAKP,MAAlCM,EADA,EACAA,KAAMyE,EADN,EACMA,QAASD,EADf,EACeA,UACf7E,EAASM,KAAKR,MAAdE,KAER,OACC,kBAAC,IAAMgD,SAAP,KACC,0BAAMH,SAAUvC,KAAK8B,cAClB0C,EAiBD,yBAAKrF,GAAG,+BAA+BO,EAAKgF,gCAhB5C,kBAAC,IAAMhC,SAAP,KACC,yBAAKvD,GAAG,0BAA0BO,EAAKiF,0BACvC,2BACCxF,GAAG,QACHwD,KAAK,QACLC,WAAW,EACXC,YAAanD,EAAKkC,MAAQ,MAC1Bd,KAAK,OACLuB,MAAOtC,EAAK6B,MACZjB,SAAUX,KAAKgC,mBAEhB,kBAACc,EAAA,EAAD,CAAQhC,KAAK,SAASlB,QAAS2E,GAA/B,UAQFA,GAAa,kBAACnD,EAAA,EAAD,W,GAjEEK,cCqFLmD,G,wDApFd,WAAYpF,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAQ,CACZ+D,MAAOhE,EAAMgE,MACb5D,SAAS,EACTiF,UAAU,EACVL,SAAS,EACT3E,WAAOC,EACPQ,UAAMR,EACNC,KAAM,CACL+E,YAAa,GACbC,aAAc,GACdvB,MAAOhE,EAAMgE,QAIf,EAAK1B,aAAe,EAAKA,aAAaC,KAAlB,gBACpB,EAAKC,iBAAmB,EAAKA,iBAAiBD,KAAtB,gBAjBN,E,2SAoBFI,GAChB,IAAMpC,EAAOC,KAAKP,MAAMM,KACxBA,EAAKoC,EAAEC,OAAOjD,IAAMgD,EAAEC,OAAOC,MAC7BrC,KAAKC,SAAS,CAAEF,W,4EAEEoC,G,iFAClBA,EAAEG,kBACMvC,EAASC,KAAKP,MAAdM,MACC+E,cAAgB/E,EAAKgF,a,yCAAqB/E,KAAKR,MAAMiB,QAAQ,CAAEuC,QAAS,6B,cAEjFhD,KAAKC,SAAS,CAAEJ,WAAOC,EAAW+E,UAAU,EAAML,SAAS,I,SAE1DxE,KAAKR,MAAM+C,W,SACLnC,IAAoB4E,eAAejF,EAAKyD,MAAOzD,EAAK+E,YAAa/E,EAAKgF,c,OAC5EvC,YAAW,kBAAM,EAAKvC,SAAS,CAAE4E,UAAU,EAAOL,SAAS,MAAS,K,kDAEpExE,KAAKC,SAAS,CAAE4E,UAAU,EAAOL,SAAS,IAC1CxE,KAAKR,MAAMiB,QAAX,M,gJAGQ,IAAD,EACqCT,KAAKP,MAA1CM,EADA,EACAA,KAAMH,EADN,EACMA,QAAS4E,EADf,EACeA,QAASK,EADxB,EACwBA,SAExBnF,EAASM,KAAKR,MAAdE,KAER,OACC,kBAAC,IAAMgD,SAAP,KACG8B,EA0BD,kBAAC,IAAM9B,SAAP,KACC,yBAAKvD,GAAG,0BAA0BO,EAAKuF,uBA1BxC,0BAAM1C,SAAUvC,KAAK8B,cACpB,2BACC3C,GAAG,cACHwD,KAAK,cACLC,WAAW,EACXC,YAAanD,EAAKwF,YAAc,MAChCpE,KAAK,WACLuB,MAAOtC,EAAK+E,YACZnE,SAAUX,KAAKgC,mBAEhB,2BACC7C,GAAG,eACHwD,KAAK,eACLC,WAAW,EACXC,YAAanD,EAAKwE,OAAS,IAAMxE,EAAKwF,YAAc,MACpDpE,KAAK,WACLuB,MAAOtC,EAAKgF,aACZpE,SAAUX,KAAKgC,mBAEhB,2BAAO7C,GAAG,QAAQwD,KAAK,QAAQ7B,KAAK,SAASuB,MAAOtC,EAAKyD,MAAO7C,SAAUX,KAAKgC,mBAC/E,kBAACc,EAAA,EAAD,CAAQhC,KAAK,SAASlB,QAASA,GAC7BF,EAAKyF,OAQRN,GAAY,kBAACzD,EAAA,EAAD,MACZxB,GAAW,kBAACwB,EAAA,EAAD,W,GA/EKK,cCkGN2D,G,yDAhGd,WAAY5F,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAQ,CACZC,KAAM,GACN8D,MAAOhE,EAAMgE,MACb6B,UAAU,EACVC,WAAW,EACX1F,SAAS,EACTC,WAAOC,EACPC,KAAM,CACLwF,KAAM,GACN/B,MAAOhE,EAAMgE,OAAS,KAGxB,EAAKgC,QAAUC,IAAMC,YACrB,EAAK5D,aAAe,EAAKA,aAAaC,KAAlB,gBACpB,EAAKC,iBAAmB,EAAKA,iBAAiBD,KAAtB,gBAhBN,E,0LAmBZ/B,KAAK8D,iB,OACO9D,KAAKP,MAAf+D,OACGxD,KAAK8B,e,sRAII5B,IAAkBC,gB,OAA/BT,E,OACNM,KAAKC,SAAS,CAAEP,S,gDAEhBM,KAAKR,MAAMiB,QAAX,M,sJAGe0B,GAChB,IAAMpC,EAAOC,KAAKP,MAAMM,KACxBA,EAAKoC,EAAEC,OAAOjD,IAAMgD,EAAEC,OAAOC,MAC7BrC,KAAKC,SAAS,CAAEF,W,4EAEEoC,G,8EAClB5B,QAAQC,IAAI,oBACR2B,GAAGA,EAAEG,iBAEDvC,EAASC,KAAKP,MAAdM,K,SAEPC,KAAKC,SAAS,CAAEqF,WAAW,EAAMD,UAAU,EAAOxF,WAAOC,IACzDE,KAAKR,MAAM+C,W,SACLnC,IAAoBuF,OAAO5F,EAAKyD,OAASzD,EAAKwF,M,OACpDvF,KAAKC,SAAS,CAAEoF,UAAU,EAAMC,WAAW,I,kDAE3CtF,KAAKR,MAAMiB,QAAX,MACAT,KAAKC,SAAS,CAAEqF,WAAW,EAAOD,UAAU,EAAOxF,MAAM,EAAD,K,gJAIhD,IAAD,SAC2CG,KAAKP,MAAhDM,EADA,EACAA,KAAMuF,EADN,EACMA,UAAWD,EADjB,EACiBA,SAAUxF,EAD3B,EAC2BA,MAAOS,EADlC,EACkCA,KAElCZ,EAASM,KAAKR,MAAdE,KAER,OAAI4F,EAAkB,kBAAClE,EAAA,EAAD,CAAQ4B,QAAS,sBAGtC,kBAAC,IAAMN,SAAP,MACG7C,GAASwF,GACV,yBAAKlG,GAAG,2BACNO,EAAKkG,kBACN,6BACA,yBAAKzG,GAAI,6BACR,kBAAC2D,EAAA,EAAD,CAAQ7B,QAAS,kBAAM,EAAKzB,MAAMqG,eAAevF,KAAQZ,EAAKwB,UAI/DmE,GACD,kBAAC,IAAM3C,SAAP,KACC,yBAAKvD,GAAG,2BAA2BO,EAAKoG,2BACxC,0BAAMC,IAAK/F,KAAKwF,QAASjD,SAAUvC,KAAK8B,cACvC,2BACC3C,GAAG,OACH8E,aAAa,MACbrB,WAAW,EACXP,MAAOtC,EAAKwF,KACZ1C,YAAanD,EAAKsG,aAAe,MACjCrD,KAAK,OACL7B,KAAK,SACLH,SAAUX,KAAKgC,mBAEhB,2BAAO7C,GAAG,QAAQwD,KAAK,QAAQ7B,KAAK,SAASuB,MAAOtC,EAAKyD,MAAO7C,SAAUX,KAAKgC,mBAC/E,kBAACc,EAAA,EAAD,CAAQhC,KAAK,SAASlB,QAAS0F,GAA/B,e,GAtFc7D,cC0FNwE,G,yDAzFd,WAAYzG,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAQ,CACZC,KAAM,GACN8D,MAAOhE,EAAMgE,MACb0C,QAAQ,EACRC,WAAW,EACXvG,SAAS,EACTC,WAAOC,EACPC,KAAM,CACL6B,MAAO,KAGT,EAAK4D,QAAUC,IAAMC,YACrB,EAAK5D,aAAe,EAAKA,aAAaC,KAAlB,gBACpB,EAAKC,iBAAmB,EAAKA,iBAAiBD,KAAtB,gBAfN,E,0LAkBZ/B,KAAK8D,iB,sRAIS5D,IAAkBC,cAAc,M,OAA7CT,E,OACNM,KAAKC,SAAS,CAAEP,S,gDAEhBM,KAAKR,MAAMiB,QAAX,M,sJAGe0B,GAChB,IAAMpC,EAAOC,KAAKP,MAAMM,KACxBA,EAAKoC,EAAEC,OAAOjD,IAAMgD,EAAEC,OAAOC,MAC7BrC,KAAKC,SAAS,CAAEF,W,4EAEEoC,G,8EAClB5B,QAAQC,IAAI,oBACR2B,GAAGA,EAAEG,iBAEDvC,EAASC,KAAKP,MAAdM,K,SAEPC,KAAKR,MAAM+C,WACXvC,KAAKC,SAAS,CAAEkG,WAAW,EAAMD,QAAQ,EAAOrG,WAAOC,I,SACjDM,IAAoBgG,SAASrG,EAAK6B,O,OACxC5B,KAAKC,SAAS,CAAEkG,WAAW,EAAOD,QAAQ,IAC1ClG,KAAKR,MAAM6G,W,kDAEXrG,KAAKC,SAAS,CAAEkG,WAAW,IAC3BnG,KAAKR,MAAMiB,QAAX,M,gJAIQ,IAAD,SACkCT,KAAKP,MAAvCM,EADA,EACAA,KAAMmG,EADN,EACMA,OAAQC,EADd,EACcA,UAAW7F,EADzB,EACyBA,KACzBZ,EAASM,KAAKR,MAAdE,KAGR,OACC,kBAAC,IAAMgD,SAAP,KACC,yBAAKvD,GAAG,sBAAsBO,EAAK4G,mBAClCJ,EACA,yBAAK/G,GAAG,2BACNO,EAAKkG,kBACN,6BACA,kBAAC9C,EAAA,EAAD,CAAQ3D,GAAI,4BAA6B8B,QAAS,kBAAM,EAAKzB,MAAMqG,eAAevF,KAChFZ,EAAKwB,QAIR,0BAAM6E,IAAK/F,KAAKwF,QAASjD,SAAUvC,KAAK8B,cACvC,2BACC3C,GAAG,QACH8E,aAAa,MACbrB,WAAW,EACXP,MAAOtC,EAAK6B,MACZiB,YAAanD,EAAKkC,MAAQ,MAC1Be,KAAK,QACL7B,KAAK,OACLH,SAAUX,KAAKgC,mBAEhB,kBAACc,EAAA,EAAD,CAAQhC,KAAK,SAASlB,QAASuG,GAA/B,SAKDA,GAAa,kBAAC/E,EAAA,EAAD,CAAQ4B,QAAStD,EAAK6G,iC,GApFnB9E,cCMf+E,E,kDACL,WAAYhH,GAAQ,IAAD,sBAClB,cAAMA,GACN,IAAMiH,EAAe,IAAIC,gBAAgBlH,EAAMmH,SAAWnH,EAAMmH,SAASC,OAAS,IAC5E9F,EACLtB,EAAMmH,UAAYnH,EAAMmH,SAASE,SAASC,QAAQ,gBAAiB,IAChEtH,EAAMmH,SAASE,SAASC,QAAQ,iBAAkB,IAClDtH,EAAMsB,MAAQ,QANA,OAQlB,EAAKrB,MAAQ,CACZG,SAAS,EACTkB,KAAMA,EACNpB,KAAM,GACNqH,aAAcvH,EAAMuH,aACpBlH,MAAO4G,EAAajI,IAAI,eAAYsB,EACpCH,SAAU8G,EAAajI,IAAI,YAC3BgF,MAAOiD,EAAajI,IAAI,SACxBwI,MAAO,CACN9F,MAAO,QACPR,OAAQ,UACRS,OAAQ,UACRwE,OAAQ,SACRsB,MAAO,iBACP/H,OAAQ,kBACRgI,OAAQ,mBAIV,EAAKhF,YAAc,EAAKA,YAAYH,KAAjB,gBACnB,EAAKE,aAAe,EAAKA,aAAaF,KAAlB,gBACpB,EAAKgC,aAAe,EAAKA,aAAahC,KAAlB,gBA7BF,E,gEAgClB/B,KAAK8D,mB,yKAGc5D,IAAkBC,gB,OAA/BT,E,OACAsH,EAAQ,CACb9F,MAAOxB,EAAKwB,MACZR,OAAQhB,EAAKgB,OACbS,OAAQzB,EAAKyB,OACbwE,OAAQjG,EAAKiG,OACbsB,MAAOvH,EAAKyH,cACZjI,OAAQQ,EAAK0H,eACbF,OAAQxH,EAAK2H,eAEdrH,KAAKC,SAAS,CAAEP,OAAMsH,U,2IAGtBhH,KAAKC,SAAS,CAAEJ,WAAOC,M,kCAEZwH,GACX,IAAMzH,EAASyH,EAEZA,EAAIC,UAAYD,EAAIC,SAAS1I,KAC7ByI,EAAIC,SAAS1I,KAAKmE,QAClBsE,EAAItE,SAAWsE,EAAIE,gBAHnB1H,EAIHE,KAAKC,SAAS,CAAEJ,Y,qCAEFiB,EAAMR,GAAO,IAAD,OAC1BC,QAAQC,IAAIM,EAAMR,GAClBN,KAAKC,SAAS,CAAEa,OAAMR,OAAMT,WAAOC,IAAa,WAC/C2H,SAASC,MAAQ,kBAAoB,EAAKjI,MAAMuH,MAAM,EAAKvH,MAAMqB,W,sCAGnDR,GACfN,KAAKC,SAAS,CAAE0H,UAAWjG,EAAOpB,W,kCAEvBA,GACXN,KAAKC,SAAS,CAAEK,OAAMT,WAAOC,IACzBE,KAAKR,MAAMiD,SAASzC,KAAKR,MAAMiD,QAAQnC,GAC3CN,KAAKL,WACLY,QAAQC,IAAI,e,qCAGZR,KAAKC,SAAS,CAAEK,KAAM,KAAMQ,KAAM,QAASjB,WAAOC,IAC9CE,KAAKR,MAAM2D,UAAUnD,KAAKR,MAAM2D,WACpCnD,KAAKL,WACLY,QAAQC,IAAI,gB,mCAEAF,GACZC,QAAQC,IAAI,aAAcF,GAC1BN,KAAKC,SAAS,CAAEK,OAAMT,WAAOC,IACzBE,KAAKR,MAAMwE,UAAUhE,KAAKR,MAAMwE,WACpChE,KAAK4H,eAAe,UACpBrH,QAAQC,IAAI,e,yCAEMF,GAClBC,QAAQC,IAAI,oBACZR,KAAKC,SAAS,CAAEJ,WAAOC,IACnBE,KAAKR,MAAMqG,gBAAgB7F,KAAKR,MAAMqG,iBAC1C7F,KAAK4H,eAAe,W,oCAGPtH,GACbC,QAAQC,IAAIF,GACZN,KAAK4H,eAAe,W,iCAGpBrH,QAAQC,IAAI,WAAYR,KAAKP,MAAME,UAE/BK,KAAKP,MAAME,UAAUK,KAAKR,MAAMqI,QAAQC,KAAK9H,KAAKP,MAAME,Y,+BAEnD,IAAD,SAC2EK,KAAKP,MAAhFa,EADA,EACAA,KAAMQ,EADN,EACMA,KAAMkG,EADZ,EACYA,MAAOpH,EADnB,EACmBA,QAASD,EAD5B,EAC4BA,SAAUoH,EADtC,EACsCA,aAAcvD,EADpD,EACoDA,MAAO9D,EAD3D,EAC2DA,KAAMG,EADjE,EACiEA,MAEjEkB,EAAWf,KAAKR,MAAhBuB,OAER,OACC,yBAAK5B,GAAG,eAAe4I,MAAOhB,EAAe,CAAEiB,WAAY,aAAWlI,GACrE,kBAAC,EAAD,CACCc,OAAQoG,EAAMlG,GACdA,KAAMA,EACNjB,MAAOA,EACPkB,OAAQA,EACRrB,KAAMA,EACNiB,SAAU,SAACG,GAAD,OAAU,EAAK8G,eAAe9G,KAE9B,UAATA,EACA,kBAAC,EAAD,CACCmH,IAAK,QACLrG,MAAOtB,GAAQA,EAAKsB,MACpBa,QAASzC,KAAKkC,YACdvC,SAAUA,EACVD,KAAMA,EACNe,QAAS,SAAC6G,GAAD,OAAS,EAAKY,YAAYZ,IACnC/E,SAAU,kBAAM,EAAKT,kBAEV,WAAThB,EACH,kBAAC,EAAD,CACCmH,IAAK,SACLrG,MAAOtB,GAAQA,EAAKsB,MACpBuB,SAAUnD,KAAKiC,aACftC,SAAUA,EACVD,KAAMA,EACNe,QAAS,SAAC6G,GAAD,OAAS,EAAKY,YAAYZ,IACnC/E,SAAU,kBAAM,EAAKT,kBAEV,UAAThB,EACH,kBAAC,EAAD,CACCmH,IAAK,QACLrG,MAAOtB,GAAQA,EAAKsB,MACpB4B,MAAOA,EACP9D,KAAMA,EACNe,QAAS,SAAC6G,GAAD,OAAS,EAAKY,YAAYZ,IACnC/E,SAAU,kBAAM,EAAKT,kBAEV,WAAThB,EACH,kBAAC,EAAD,CACCmH,IAAK,SACLrG,MAAOtB,GAAQA,EAAKsB,MACpB4B,MAAOA,EACP9D,KAAMA,EACNyI,UAAW,kBAAM,EAAKC,iBACtB3H,QAAS,SAAC6G,GAAD,OAAS,EAAKY,YAAYZ,IACnC/E,SAAU,kBAAM,EAAKT,kBAEV,WAAThB,EACH,kBAAC,EAAD,CACCmH,IAAK,SACLzE,MAAOA,EACP9D,KAAMA,EACNmG,eAAgB,SAACvF,GAAD,OAAU,EAAK+H,mBAAmB/H,IAClDG,QAAS,SAAC6G,GAAD,OAAS,EAAKY,YAAYZ,IACnC/E,SAAU,kBAAM,EAAKT,kBAEV,WAAThB,EACH,kBAAC,EAAD,CACCmH,IAAK,SACLvI,KAAMA,EACN2G,SAAU,kBAAM,EAAKuB,eAAe,WACpCnH,QAAS,SAAC6G,GAAD,OAAS,EAAKY,YAAYZ,IACnC/E,SAAU,kBAAM,EAAKT,kBAEV,WAAThB,EACH,kBAAC,EAAD,CACCmH,IAAK,SACLvI,KAAMA,EACNsE,SAAUhE,KAAK+D,aACfpE,SAAUA,EACVc,QAAS,SAAC6G,GAAD,OAAS,EAAKY,YAAYZ,IACnC/E,SAAU,kBAAM,EAAKT,kBAGtB,6CAEAlC,GAAW,kBAACwB,EAAA,EAAD,OAEb,yBAAKjC,GAAG,wBACP,yBAAK4D,UAAU,sBAAsB9B,QAAS,kBAAM,EAAK2G,eAAe,WACtElI,EAAK4I,gBAEP,yBAAKvF,UAAU,sBAAsB9B,QAAS,kBAAM,EAAK2G,eAAe,YACtElI,EAAK2H,qB,GAjMe5F,aAyMZ+E,a,4OCpMT+B,G,OAAsB,SAACC,EAAMC,EAAOC,EAAKC,EAAMC,EAAQC,GAC5D,IAAMC,EAGM,IAFXC,IACEC,GAAGD,IAAO,CAAEP,OAAMC,QAAOC,MAAKC,OAAMC,WAAUK,OAAO,oBAAqB,mBAAoB,gBAC9FC,OACGC,EAAUL,EAAY,KAC5B,MAAO,CACNM,IAAKN,EAAY,IAAMK,EACvBL,UAAWA,EACXK,QAASA,EACT1K,QAASoK,EAAMO,IACfP,QACAQ,WAAW,KAGPC,EAAoB,SAACC,EAAMV,GAEhC,IADA,IAAMW,EAAY,GACFC,EAAI,GAAIC,EAAI,EAAGD,EAAI,GAASA,GAAK,GAChDD,EAAU1B,KAAKS,EAAoBgB,EAAKI,cAAeJ,EAAKK,WAAYL,EAAKM,UAAWC,KAAKC,MAAMN,GAAIC,EAAGb,IAC1Ga,EAAU,IAANA,EAAU,GAAK,EAEpB,OAAOF,GAGFQ,E,kDACL,WAAYxK,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAQ,CACZ8J,KAAM/J,EAAM+J,MAAQ,IAAIU,KACxBC,SAAU1K,EAAM0K,eAAYpK,EAC5BqK,aAAc3K,EAAM2K,aACpBzK,KAAM,GACNE,SAAS,EACTwK,oBAAoB,EACpBC,QAAQ,EACRC,YAAY,EACZC,YAAY,EACZ1K,WAAOC,EACP0K,MAAM,EACNC,kBAAc3K,EACd+I,WAAO/I,EACP4K,OAAQ,GACRC,WAAO7K,EACP0J,UAAW,GACXoB,eAAgB,GAChBC,iBAAa/K,EACbgL,kBAAchL,EACdiL,mBAAoB,GACpBC,eAAgB,GAChBC,cAAUnL,EACVoL,SAAS,GAGV,EAAKC,qBAAuB,EAAKA,qBAAqBpJ,KAA1B,gBAC5B,EAAKqJ,kBAAoB,EAAKA,kBAAkBrJ,KAAvB,gBACzB,EAAKsJ,qBAAuB,EAAKA,qBAAqBtJ,KAA1B,gBAC5B,EAAKuJ,wBAA0B,EAAKA,wBAAwBvJ,KAA7B,gBAC/B,EAAKwJ,sBAAwB,EAAKA,sBAAsBxJ,KAA3B,gBAC7B,EAAKyJ,sBAAwB,EAAKA,sBAAsBzJ,KAA3B,gBAC7B,EAAK0J,kBAAoB,EAAKA,kBAAkB1J,KAAvB,gBACzB,EAAK2J,qBAAuB,EAAKA,qBAAqB3J,KAA1B,gBAC5B,EAAK4J,6BAA+B,EAAKA,6BAA6B5J,KAAlC,gBACpC,EAAK6J,sBAAwB,EAAKA,sBAAsB7J,KAA3B,gBAC7B,EAAK8J,gBAAkB,KAtCL,E,sMAyCO7L,KAAKR,MAAxBE,E,EAAAA,KAAMoM,E,EAAAA,SACZ9L,KAAKC,SAAS,CAAEL,SAAS,I,SAEnBF,E,gCAAmBQ,IAAkBC,cAAc2L,G,OAA7CpM,E,8BACUqM,IAAajN,S,cAA5B4L,E,OACA7B,EAAQ6B,EAAOsB,OAAStB,EAAO,QAAK5K,EAClCyJ,EAASvJ,KAAKP,MAAd8J,K,UACFvJ,KAAKiM,cAAc,CAAEvM,OAAMgL,SAAQ7B,QAAOU,S,yBAC1CvJ,KAAKkM,QAAQ3C,G,QACnBvJ,KAAK6L,gBAAkBM,aAAY,kBAAM,EAAKD,QAAQ,EAAKzM,MAAM8J,MAAM,KA7EjD,K,kDA+EtBvJ,KAAKkI,YAAL,M,QAGDlI,KAAKC,SAAS,CAAEL,SAAS,I,oJAEZH,GAAQ,IAAD,OACpB,OAAO,IAAI2M,SAAQ,SAACC,GACnB,EAAKpM,SAASR,EAAO4M,Q,uEAIT9C,EAAMvB,G,iFACbhI,KAAKsM,wBAAwB/C,EAAMvB,G,uBACnChI,KAAKuM,iBAAiBhD,EAAMvB,G,sJAGlCwE,cAAcxM,KAAK6L,mB,gFAEGtC,EAAMvB,G,8EACpBa,EAAU7I,KAAKP,MAAfoJ,MACA4D,EAASzM,KAAKR,MAAdiN,KAERlD,EAAOA,GAAQvJ,KAAKP,MAAM8J,KAAO,IAAIU,KAAKV,GAAQvJ,KAAKP,MAAM8J,MAAQ,IAAIU,KAEpEpB,E,wDAEAb,GAAYhI,KAAKC,SAAS,CAAEsK,YAAY,EAAMhB,S,kBAE5BmD,IAAmBC,UACxCpD,EAAKI,cACLJ,EAAKK,WACLL,EAAKM,UACLhB,EAAMO,K,OAJHI,E,OAOHA,EADGiD,EACSnD,EAAkBC,EAAMV,GAAO+D,KAAI,SAACjC,EAAOkC,GACtD,OACCrD,EAAUsD,QACT,SAACpO,GAAD,OACCqK,IAAOrK,EAAEoK,WAAWG,OAAO,WAAaF,IAAO4B,EAAM7B,WAAWG,OAAO,UACvEF,IAAOrK,EAAEyK,SAASF,OAAO,WAAaF,IAAO4B,EAAMxB,SAASF,OAAO,YACnE,IAAM0B,KAIEnB,EAAUsD,QACrB,SAACnC,GAAD,OACEA,EAAMoC,QACU,WAAjBpC,EAAMqC,SACLjE,IAAO4B,EAAM7B,WAAWmE,SAASlE,MAASC,GAAG,gBAAiB,UAGlEhJ,KAAKC,SAAS,CAAEuJ,YAAWD,S,kDAE3BvJ,KAAKkI,YAAL,M,QAGDlI,KAAKC,SAAS,CAAEsK,YAAY,I,0MAEChB,EAAMvB,G,kFAC3Ba,EAAU7I,KAAKP,MAAfoJ,MACA4D,EAASzM,KAAKR,MAAdiN,KAERlD,EAAOA,GAAQvJ,KAAKP,MAAM8J,KAAO,IAAIU,KAAKV,GAAQvJ,KAAKP,MAAM8J,MAAQ,IAAIU,KACpEjC,GAAYhI,KAAKC,SAAS,CAAEsK,YAAY,I,kBAEjBmC,IAAmBQ,WAAW3D,EAAKI,cAAeJ,EAAKK,WAAYf,EAAMO,K,OAAhGwB,E,OACC6B,IACJ7B,EAAiBA,EAAekC,QAC/B,SAACnC,GAAD,OACEA,EAAMoC,QACU,WAAjBpC,EAAMqC,SACLjE,IAAO4B,EAAM7B,WAAWmE,SAASlE,MAASC,GAAG,gBAAiB,WAGlEhJ,KAAKC,SAAS,CAAE2K,iBAAgBrB,S,kDAEhCvJ,KAAKkI,YAAL,M,QAEDlI,KAAKC,SAAS,CAAEsK,YAAY,I,8JAGRJ,GAAe,IAAD,EACEnK,KAAKP,MAAnC+J,EAD4B,EAC5BA,UAAWoB,EADiB,EACjBA,eACjBpB,EAAYA,EAAUoD,KAAI,SAACjC,GAAD,OACzBA,EAAMvB,MAAQe,EAAaf,KAC1BuB,EAAM7B,YAAcqB,EAAarB,WAAa6B,EAAMxB,UAAYgB,EAAahB,QAC3EgB,EACAQ,KAEJC,EAAiBA,EAAegC,KAAI,SAACjC,GAAD,OACnCA,EAAMvB,MAAQe,EAAaf,KAC1BuB,EAAM7B,YAAcqB,EAAarB,WAAa6B,EAAMxB,UAAYgB,EAAahB,QAC3EgB,EACAQ,KAEJ3K,KAAKC,SAAS,CAAEuJ,YAAWU,SAAUC,EAAcS,qB,yCAEjCzL,GAAK,IAAD,EACwBa,KAAKP,MAA7CyK,EADgB,EAChBA,SAAUV,EADM,EACNA,UAAWoB,EADL,EACKA,eAC3BV,EAAQ,2BACJA,GADI,IAEPb,WAAW,EACXD,IAAK,IAAIa,KAAKC,EAASpB,WAAWqE,UAAY,IAAM,IAAIlD,KAAKC,EAASf,SAASgE,YAEhF3D,EAAYA,EAAUoD,KAAI,SAACjC,GAAD,OAAYA,EAAMvB,MAAQjK,EAAK+K,EAAWS,KACpEC,EAAiBA,EAAekC,QAAO,SAACnC,GAAD,OAAWA,EAAMvB,MAAQjK,KAChEa,KAAKC,SAAS,CAAEuJ,YAAWU,WAAUU,qB,2CAEjBrB,GACpBvJ,KAAKC,SAAS,CAAEsJ,W,iFAEO6D,G,iFAEjBpN,KAAKuM,iBAAiBa,G,OAC5BpN,KAAKC,SAAS,CAAEiK,cAAUpK,IACtBE,KAAKR,MAAMmB,UAAUX,KAAKR,MAAMmB,SAASyM,G,sJAEF,IAApBC,EAAmB,EAAnBA,gBACvBrN,KAAKC,SAAS,CAAE4K,iBAAa/K,IAC7BE,KAAKuM,iBAAiBc,K,wFAEQlD,G,sFACHnK,KAAKR,MAAxBiN,E,EAAAA,KAAMX,E,EAAAA,SACNjD,EAAU7I,KAAKP,MAAfoJ,MACH4D,E,oDAELzM,KAAKC,SAAS,CAAEoK,QAAQ,EAAMS,aAAcX,EAAaf,MACpDe,EAAa4C,O,6BAEX5C,EAAad,U,kCACXqD,IAAmBrN,OAAO8K,EAAaf,K,QAC7CpJ,KAAKsN,mBAAmBnD,EAAaf,K,yCAEPsD,IAAmB3N,IAAnB,2BAC1BoL,GAD0B,IAE7B2B,WACA1C,SAAKtJ,EACLrB,QAASoK,EAAMO,O,QAJVmE,E,OAMNvN,KAAKwN,qBAAqBD,G,QAE3BvN,KAAKkM,QAAQlM,KAAKP,MAAM8J,MAAM,G,kDAE9BvJ,KAAKkI,YAAL,M,2DAI0BwE,IAAmBlO,IAAI2L,EAAaf,K,QAAxDyB,E,OACN7K,KAAKC,SAAS,CAAE4K,gB,mDAEhB7K,KAAKkI,YAAL,M,QAGFlI,KAAKC,SAAS,CAAEoK,QAAQ,EAAOS,kBAAchL,I,uMAGzBoK,G,4EAEpBlK,KAAKC,SAAS,CAAEiK,WAAUE,mBAAoBF,EAAS6C,QAAvD,sBAAiE,sBAAArO,EAAA,0DAE5DwL,EAAS6C,OAFmD,0CAIjCL,IAAmBlO,IAAI0L,EAASd,KAJC,OAI9Dc,EAASW,YAJqD,OAM9D,EAAK5K,SAAS,CAAEiK,WAAUE,oBAAoB,IAAS,WACtD3C,SAASgG,eAAe,kBAAkBC,oBAPmB,uDAU9D,EAAKzN,SAAS,CAAEmK,oBAAoB,IAV0B,kBAWvD,EAAKlC,YAAL,OAXuD,QAc5D,EAAK1I,MAAMmO,UAAU,EAAKnO,MAAMmO,SAASzD,GAdmB,0D,qJAiBZ,EAA/BmD,gBAA+B,EAAd9D,KAAc,EAARqE,KAC7C,OAAO,I,+CAU+C,EAA/BP,gBAAgC,IAAf9D,EAAc,EAAdA,KAChCqB,GAD8C,EAARgD,KACnB5N,KAAKP,MAAxBmL,gBAEJpB,GADaxJ,KAAKR,MAAdiN,KACQ7B,EAAekC,QAAO,SAACnC,GAAD,OAAW5B,IAAOC,GAAG2B,EAAM7B,UAAW,gBAAgB+E,OAAOtE,EAAM,WACrGuE,EAAStE,EAAUsD,QAAO,SAACnC,GAAD,MAA4B,WAAjBA,EAAMqC,UAAqBhB,OAAS,EAE7E,OAAOxC,EAAUwC,SAAU8B,EAAS,qBAAuB,wB,2CAE1B,EAAdvE,KAAc,EAARqE,O,uFACIzO,G,wEAC7Ba,KAAKC,SAAS,CAAEoK,QAAQ,I,kBAEjBqC,IAAmBrN,OAAOF,G,OAChCa,KAAKC,SAAS,CAAE4K,iBAAa/K,EAAWoK,cAAUpK,IAClDE,KAAKuM,iBAAiBvM,KAAKP,MAAM8J,MAAM,G,gDAEvCvJ,KAAKkI,YAAL,M,QAEDlI,KAAKC,SAAS,CAAEoK,QAAQ,I,uMAEKQ,G,wEAC7B7K,KAAKC,SAAS,CAAEqK,YAAY,I,kBAErBoC,IAAmBqB,OAAOlD,EAAYkC,OAAQlC,EAAYzB,K,OAChEpJ,KAAKuM,iBAAiBvM,KAAKP,MAAM8J,MAAM,G,gDAEvCvJ,KAAKkI,YAAL,M,QAEDlI,KAAKC,SAAS,CAAEqK,YAAY,I,iMAEL0D,G,gFACftD,EAAW1K,KAAKP,MAAhBiL,OACF7B,EAAQ6B,EAAOoC,QAAO,SAACmB,GAAD,OAAOA,EAAE7E,MAAQ4E,EAAI3L,SAAO,G,SAClDrC,KAAKiM,cAAc,CAAEpD,QAAOqB,cAAUpK,I,OAC5CE,KAAKkM,U,0IAIL,OADiBlM,KAAKR,MAAdiN,KAEL1D,MAASC,GAAG,gBAAgBjK,IAAI,SAAU,IAAImP,SAC9CnF,MAASC,GAAG,gBAAgBjK,IAAI,SAAU,GAAGmP,W,mCAIhD,OADiBlO,KAAKR,MAAdiN,KACM1D,MAASC,GAAG,gBAAgBmF,SAAS,SAAU,IAAID,SAAW,IAAIjE,O,kCAErE3C,GACX,IAAMzH,EAAQyH,EAAIC,UAAYD,EAAIC,SAAS1I,KAAOyI,EAAIC,SAAS1I,KAAKmE,QAAUsE,EAAItE,SAAWsE,EAAIE,WACjGxH,KAAKC,SAAS,CAAEJ,UACZG,KAAKR,MAAMiB,SAAST,KAAKR,MAAMiB,QAAQ6G,K,2CAEvByD,GAAqB,IAAD,OAGxC,OAFA/K,KAAKC,SAAS,CAAE8K,uBAET,IAAIqB,QAAJ,uCAAY,WAAOC,EAAS+B,GAAhB,eAAA1P,EAAA,2DACdqM,EAAmBiB,OAAS,GADd,yCACwBK,EAAQ,KADhC,gCAGUgC,IAAYzH,OAAOmE,GAH7B,OAIjBC,GADIA,EAHa,QAIe4B,KAAI,SAAC0B,GACpC,MAAO,CACNC,MAAOD,EAAE7K,UAAY,IAAM6K,EAAE5K,SAAW,KAAO4K,EAAE1M,MAAQ,IACzDS,MAAOiM,EAAElF,QAGXiD,EAAQrB,GACR,EAAK/K,SAAS,CAAE+K,mBAXC,kDAajBoD,EAAO,EAAD,IAbW,0DAAZ,2D,mDAiBqBnD,EAAUuD,GACtCxO,KAAKC,SAAS,CAAEgL,e,qFAEW9I,G,oFAC3BA,EAAEG,iB,EAE6BtC,KAAKP,MAA5BwL,E,EAAAA,SAAUf,E,EAAAA,SAEbe,E,yCAAiBjL,KAAKkI,YAAY,yB,UAClCgC,E,yCAAiBlK,KAAKkI,YAAY,iC,cAEjC6E,EAAS9B,EAAS5I,MAClBoM,EAAgBvE,EAASd,IAE/BpJ,KAAKC,SAAS,CAAEiL,SAAS,I,mBAEEwB,IAAmBgC,aAAa3B,EAAQ0B,G,eAA5D5D,E,OACNX,EAASW,YAAcA,EACvB7K,KAAKC,SAAS,CAAEiK,a,UACVlK,KAAKkM,U,0DAEXlM,KAAKkI,YAAL,M,QAEDlI,KAAKC,SAAS,CAAEiL,SAAS,I,gJAEhB,IAAD,SAmBJlL,KAAKP,MAjBRC,EAFO,EAEPA,KACA6J,EAHO,EAGPA,KACA3J,EAJO,EAIPA,QACAwK,EALO,EAKPA,mBACAU,EANO,EAMPA,aACAT,EAPO,EAOPA,OACAC,EARO,EAQPA,WACAC,EATO,EASPA,WACAf,EAVO,EAUPA,UACAoB,EAXO,EAWPA,eACAV,EAZO,EAYPA,SACArB,EAbO,EAaPA,MACA6B,EAdO,EAcPA,OAGAO,GAjBO,EAePD,eAfO,EAgBPD,mBAhBO,EAiBPE,UACAC,EAlBO,EAkBPA,QAlBO,EAqBmBlL,KAAKR,MAAxBiN,EArBA,EAqBAA,KAAMX,EArBN,EAqBMA,SACR6C,EAAU3O,KAAK4O,aACfC,EAAc,CACnBC,eAAgB,SAACC,EAAUtP,GAC1B,OAAO,2BAAKsP,GAAZ,IAAsBC,eAAgB,SAAUC,WAAY,WAIxDC,EAAQ1F,EAAUoD,KAAI,SAAClO,EAAGmO,GAC/B,IAAI9J,EAUJ,OAToEA,EAAnD,cAAbrE,EAAEsO,QAA0B9C,GAAYA,EAASd,MAAQ1K,EAAE0K,IAAiB,6BAC1D,cAAb1K,EAAEsO,OAAoC,oBACtCtO,EAAEqO,QAAU7C,GAAYA,EAASd,MAAQ1K,EAAE0K,IAAiB,0BAC5D1K,EAAEqO,OAAoB,iBACtB7C,GAAYA,EAASd,MAAQ1K,EAAE0K,MAAQc,EAASb,UAAuB,0BACvEa,GAAYA,EAASd,MAAQ1K,EAAE0K,KAAOc,EAASb,UAAuB,+BACrE3K,EAAE2K,UACK,UADkB,oBAIlC,kBAAC,IAAD,CACCpB,IAAK,OAAS4E,EACdsC,YAAa,kBAAM,EAAKC,yBAAyB1Q,IACjD2Q,MAAO,kBAAM,EAAKC,eAAe5Q,KAEjC,yBAAKuJ,IAAK,cAAgB4E,EAAK9J,UAAWA,GACzC,yBAAKA,UAAU,gBACA,cAAbrE,EAAEsO,OACA,YACAjE,IAAOC,GAAGtK,EAAEoK,UAAW,gBAAgBG,OAAO,SAC9C,MACAF,IAAOC,GAAGtK,EAAEyK,QAAS,gBAAgBF,OAAO,UAE/C6B,IAAiBpM,EAAE0K,KAAO,kBAAC,IAAD,CAAQmG,OAAQ,CAAEC,gBAAiB,sBAAwB1O,KAAK,cAM/F,OAAIlB,EAAgB,kBAAC,IAAD,MAGnB,yBAAKT,GAAG,WACP,yBAAKA,GAAG,MACN0J,GAAS6B,GACT,yBAAKvL,GAAG,wBACP,kBAAC,IAAD,CACCwB,SAAUX,KAAKyL,kBACfpJ,MAAO,CACNA,MAAOwG,EAAMO,IACbmF,MAAO1F,EAAMlG,KAAO,KAAOkG,EAAM4G,KAAO,KAAO5G,EAAM6G,WAAa,KAEnEC,cAAc,SACdC,cAAc,EACdL,OAAQV,EACRgB,QAASnF,EAAOkC,KAAI,SAAC/D,GACpB,MAAO,CACNxG,MAAOwG,EAAMO,IACbmF,MAAO1F,EAAMlG,KAAO,KAAOkG,EAAM4G,KAAO,KAAO5G,EAAM6G,WAAa,WAMvE,kBAAC,IAAD,CACCf,QAASA,EAETmB,UAAW,QACXC,UAAW,QACXC,OAAqB,OAAblE,EAAoB,QAAU,QACtCnL,SAAUX,KAAKoL,kBACf6E,aAAcjQ,KAAKqL,qBACnB6E,cAAe,SAACrR,GAAD,OAAU,EAAK0M,sBAAsB1M,IACpDsR,YAAa,SAACtR,GAAD,OAAU,EAAKuR,kBAAkBvR,IAC9CwD,MAAOkH,EACP8G,WAAY,KACZC,WAAY,KACZC,sBAAsB,EACtBC,wBAAyBxQ,KAAKwL,wBAE/B,yBAAKrM,GAAG,YACNoK,GAAQC,EAAUwC,OAAS,EAC3B,yBAAK7M,GAAG,iBAAiB+P,GACI,IAA1BtE,EAAeoB,OAClB,yBAAK7M,GAAG,kBAAkBO,EAAK+Q,8BAE/B,yBAAKtR,GAAG,kBAAkBO,EAAKgR,yBAE/BnG,GAAc,kBAAC,IAAD,OAEfkC,GAAQvC,GACR,yBAAK/K,GAAG,kBACNiL,EACA,kBAAC,IAAD,CAAQuG,SAAS,IAEjB,kBAAC,IAAMjO,SAAP,KACC,yBAAKvD,GAAG,0BACP,yBAAKA,GAAG,oCACP,yBAAKA,GAAG,+BACN4J,IAAOmB,EAASpB,WAAWE,GAAG,sBAAiBC,OAAO,SADxD,IACmEvJ,EAAKkR,GAAI,IAC1E7H,IAAOmB,EAASf,SAASH,GAAG,gBAAgBC,OAAO,UAErD,yBAAK9J,GAAG,+BACN4J,IAAOC,GAAGkB,EAASpB,UAAW,gBAAgBG,OAAO,gBAEvD,yBAAK9J,GAAG,gCACN+K,EAASrB,MAAMlG,KADjB,KACyBuH,EAASrB,MAAM6G,aAGxCxF,EAASW,aAAeX,EAASW,YAAYvK,KAC7C,yBAAKnB,GAAG,+BACP,yBAAKA,GAAG,+BACN+K,EAASW,YAAYvK,KAAKmD,UAD5B,IACwCyG,EAASW,YAAYvK,KAAKoD,UAGlE,yBAAKvE,GAAG,gCAAgC+K,EAASW,YAAYvK,KAAKsB,OAClE,yBAAKzC,GAAG,gCAAgC+K,EAASW,YAAYvK,KAAKsD,QAGnE,yBAAKzE,GAAG,+BACP,0BAAMA,GAAG,2BAA2BoD,SAAUvC,KAAK4L,uBAClD,kBAAC,IAAD,CACCjL,SAAUX,KAAK2L,6BACf9I,YAAY,sBACZgO,YAAa7Q,KAAK0L,qBAClBoF,cAAY,EACZzO,MAAO4I,EACP8F,mBAAmB,IAEpB,kBAAC,IAAD,CAAQnR,QAASsL,EAAS8F,UAAU/F,GAApC,WAQJ,yBAAK9L,GAAG,0BACN+K,EAASW,YACT,kBAAC,IAAMnI,SAAP,KACC,kBAAC,IAAD,CAAQ9C,QAAS0K,EAAYrJ,QAAS,kBAAM,EAAKgQ,wBAAwB/G,EAASW,eAAlF,UAGA,kBAAC,IAAD,CAAQjL,QAASyK,EAAQpJ,QAAS,kBAAM,EAAKqK,wBAAwBpB,EAASW,YAAYzB,OAA1F,UAIC,uBAAG/H,KAAM,QAAU6I,EAASW,YAAYvK,KAAO4J,EAASW,YAAYvK,KAAKsD,MAAQ,KAChF,kBAAC,IAAD,CACCoN,UAAU9G,EAASW,YAAYvK,OAAQ4J,EAASW,YAAYvK,KAAKsD,OADlE,SAOF,uBAAGvC,KAAM,UAAY6I,EAASW,YAAYjJ,OACzC,kBAAC,IAAD,iBAIF,kBAAC,IAAMc,SAAP,KACC,kBAAC,IAAD,CAAQ9C,QAASyK,EAAQpJ,QAAS,kBAAM,EAAKmO,yBAAyBlF,KACpEA,EAASb,UAAY,WAAa,yB,GAvgBd5H,aAshBnBuI,O,yHC5jBTlH,E,kDACL,WAAYtD,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAQ,GAFK,E,wDAIP0C,GACX,GAAInC,KAAKP,MAAMG,QAAS,OAAOuC,EAAEG,iBAC7BtC,KAAKR,MAAMyB,SAASjB,KAAKR,MAAMyB,QAAQkB,K,+BAElC,IAAD,SAC0CnC,KAAKR,MAA/CsB,EADA,EACAA,KAAMiH,EADN,EACMA,MAAOiJ,EADb,EACaA,SAAUpR,EADvB,EACuBA,QAASyC,EADhC,EACgCA,MAExC,OACC,4BACCU,UAAW,SACXgF,MAAOA,QAASjI,EAChBgB,KAAMA,EACNkQ,SAAUA,QAAYlR,EACtBmB,QAAS,SAACkB,GAAD,OAAO,EAAK+O,YAAY/O,KAEhCvC,EAAU,kBAAC,IAAD,CAAemD,UAAU,mBAAsB/C,KAAKR,MAAMqB,UAAYwB,EAPlF,c,GAbkBZ,aAyBNqB,O,qEC3BA,KACdzC,QAAQ,WAAD,4BAAE,4BAAA3B,EAAA,sEACQC,IAAMH,IAAI,WADlB,cACJI,EADI,yBAEDA,EAAIC,MAFH,2CAAF,kDAAC,GAIRqC,MAAM,WAAD,4BAAE,WAAOU,EAAOC,GAAd,eAAAnD,EAAA,sEACUC,IAAMM,KAAK,sBAAuB,CAAE2C,QAAOC,aADrD,cACFjD,EADE,yBAECA,EAAIC,MAFL,2CAAF,qDAAC,GAIN6B,OAAO,WAAD,4BAAE,WAAOkB,GAAP,eAAAlD,EAAA,sEACSC,IAAMM,KAAK,uBAAwB,CAAE2C,UAD9C,cACHhD,EADG,yBAEAA,EAAIC,MAFJ,2CAAF,mDAAC,GAIPsC,OAAO,WAAD,4BAAE,WAAOnC,GAAP,eAAAN,EAAA,sEACSC,IAAMM,KAAK,uBAAwBD,GAD5C,cACHJ,EADG,yBAEAA,EAAIC,MAFJ,2CAAF,mDAAC,GAIP8G,OAAO,WAAD,4BAAE,WAAOwL,GAAP,eAAAzS,EAAA,sEACSC,IAAMH,IAAI,wBAA0B2S,GAD7C,cACHvS,EADG,yBAEAA,EAAIC,MAFJ,2CAAF,mDAAC,GAIPuH,SAAS,WAAD,4BAAE,WAAOxE,GAAP,eAAAlD,EAAA,sEACOC,IAAMH,IAAI,0BAA4BoD,GAD7C,cACLhD,EADK,yBAEFA,EAAIC,MAFF,2CAAF,mDAAC,GAIT4F,qBAAqB,WAAD,4BAAE,WAAO7C,GAAP,eAAAlD,EAAA,sEACLC,IAAMH,IAAI,uBAAyBoD,GAD9B,cACjBhD,EADiB,yBAEdA,EAAIC,MAFU,2CAAF,mDAAC,GAIrBmG,eAAe,WAAD,4BAAE,WAAOxB,EAAO3B,EAAUgC,GAAxB,eAAAnF,EAAA,sEACCC,IAAMM,KAAK,uBAAwB,CAAEuE,QAAO3B,WAAUgC,cADvD,cACXjF,EADW,yBAERA,EAAIC,MAFI,2CAAF,uDAAC,K,gCC/BhB,yDACAF,IAAMyS,SAASC,iBAAkB,G,qECClB,KACd7S,IAAI,WAAD,4BAAE,WAAOW,GAAP,eAAAT,EAAA,sEACYC,IAAMH,IAAI,sBAAwBW,GAD9C,cACAP,EADA,yBAEGA,EAAIC,MAAQ,IAFf,2CAAF,mDAAC,GAIJC,OAAO,WAAD,4BAAE,4BAAAJ,EAAA,sEACSC,IAAMH,IAAI,uBADnB,cACHI,EADG,yBAEAA,EAAIC,MAAQ,IAFZ,2CAAF,kDAAC,GAIPsB,cAAc,WAAD,4BAAE,WAAO2L,GAAP,eAAApN,EAAA,sEACEC,IAAMH,IAAI,mBADZ,cACVI,EADU,yBAEPA,EAAIC,MAFG,2CAAF,mDAAC,GAIdE,IAAI,WAAD,4BAAE,WAAOuS,GAAP,eAAA5S,EAAA,sEACYC,IAAMM,KAAK,mBAAoB,CAAEqS,SAD7C,cACA1S,EADA,yBAEGA,EAAIC,MAFP,2CAAF,mDAAC,GAIJK,OAAO,WAAD,4BAAE,WAAOQ,GAAP,eAAAhB,EAAA,sEACSC,IAAMS,MAAM,mBAAqBM,EAAK0J,IAAK1J,GADpD,cACHd,EADG,yBAEAA,EAAIC,MAFJ,2CAAF,mDAAC,GAIP0S,WAAW,WAAD,4BAAE,WAAOC,GAAP,eAAA9S,EAAA,sEACSC,IAAMS,MAAM,kBAAmBoS,GADxC,cACLC,EADK,yBAEJA,GAFI,2CAAF,mDAAC,GAYXpS,OAAO,WAAD,4BAAE,WAAOF,GAAP,eAAAT,EAAA,sEACSC,IAAMU,OAAO,mBAAqBF,GAD3C,cACHP,EADG,yBAEAA,EAAIC,MAFJ,2CAAF,mDAAC,GAIPS,UAAU,WAAD,4BAAE,4BAAAZ,EAAA,sEACMC,IAAMU,OAAO,mBADnB,cACNT,EADM,yBAEHA,EAAIC,MAFD,2CAAF,kDAAC,K,uLCFI6S,E,kDAhCd,WAAYlS,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAL,eACID,GAHc,E,kGAWT,IAAD,EACmCQ,KAAKP,MAAxCC,EADA,EACAA,KAAMoM,EADN,EACMA,SAAUvC,EADhB,EACgBA,KAAMW,EADtB,EACsBA,SAE9B,OACC,yBAAK/K,GAAG,sBACP,yBAAKA,GAAG,wBACP,kBAAC6K,EAAA,EAAD,CACC/B,IAAI,uBACJvI,KAAMA,EACNoM,SAAUA,EACVW,MAAM,EACNlD,KAAMA,EACNW,SAAUA,EACVvJ,SAAUX,KAAKR,MAAMmS,aACrBhE,SAAU3N,KAAKR,MAAMoS,yB,gDAlBMC,EAAWC,GAC1C,OAAOD,M,GATqBpQ,a,SCiBfsQ,E,kDAfd,WAAYvS,GAAQ,IAAD,8BAClB,cAAMA,IAEDC,MAAQ,GAHK,E,mSAMT,IACDqB,EAASd,KAAKR,MAAdsB,KACR,OACC,yBAAK3B,GAAG,4BACP,kBAAC,UAAD,CAAc2B,KAAMA,EAAMiG,cAAc,EAAMhG,QAAQ,EAAM0B,QAASzC,KAAKR,MAAMiD,e,GAX9ChB,a,kCC4CvBuQ,E,kDAlCd,WAAYxS,GAAQ,IAAD,8BAClB,cAAMA,IAEDC,MAAQ,GAHK,E,mSAMT,IAAD,EACyBO,KAAKR,MAA9BE,EADA,EACAA,KAAMwK,EADN,EACMA,SAENrB,GAHA,EACgBvI,KAEN4J,EAAVrB,OAER,OACC,yBAAK1J,GAAG,oBACP,yBAAKA,GAAG,yBACP,yBAAKA,GAAG,oBAAR,oBACA,6BACA,yBAAKA,GAAG,yBA1Bc,SAACgL,EAAczK,GACzC,OACC,6BACEqJ,IAAOoB,EAAarB,WAAWG,OAAO,gBACvC,6BACCF,IAAOoB,EAAarB,WAAWG,OAAO,SAHxC,IAGmDvJ,EAAKkR,GAHxD,IAG6D7H,IAAOoB,EAAahB,SAASF,OAAO,UAqB7DgJ,CAAmB/H,EAAUxK,IAC9D,kCACA,6BACEmJ,EAAMlG,KACP,6BACCkG,EAAMqJ,QACP,6BACCrJ,EAAM6G,YAER,6BACC,yBAAKvQ,GAAI,mBAAoBoC,IAAKC,IAAMF,IAAI,kBAE7C,yBAAKnC,GAAG,wBAAwBO,EAAKyS,2B,GA7BZ1Q,aCiCf2Q,E,uKAhCJ,IAAD,EACsBpS,KAAKR,MAA3BE,EADA,EACAA,KAAMmL,EADN,EACMA,YAEd,OACC,yBAAK1L,GAAG,wBACP,yBAAKA,GAAG,4BACP,yBAAKA,GAAG,yBACP,0BAAMA,GAAG,mCAAmCO,EAAK2S,eACjD,6BACA,0BAAMlT,GAAG,sCAAsCO,EAAK4S,sBACpD,6BACA,6BAtBqB,SAACnI,EAAczK,GAEzC,OADAqJ,IAAOiH,OAAOtQ,EAAK6S,WAElB,6BACExJ,IAAOoB,EAAarB,WAAWG,OAAO,gBACvC,6BACCF,IAAOoB,EAAarB,WAAWG,OAAO,SAHxC,IAGmDvJ,EAAKkR,GAHxD,IAG6D7H,IAAOoB,EAAahB,SAASF,OAAO,UAiB5FgJ,CAAmBpH,EAAanL,IAElC,yBAAKP,GAAG,0BAAR,IACE,6BACA0L,EAAYhC,MAAMlG,KACnB,6BACCkI,EAAYhC,MAAMqJ,QACnB,6BACCrH,EAAYhC,MAAM6G,YAEpB,yBAAKvQ,GAAG,4BACP,2BACEO,EAAK8S,YADP,IACoB,uBAAGnR,KAAK,YAAR,mB,GAzBYI,aCuCvBgR,E,kDA/Cd,WAAYjT,GAAQ,IAAD,8BAClB,cAAMA,IAEDC,MAAQ,GAHK,E,mSAMT,IAAD,SACqCO,KAAKR,MAA1C0K,EADA,EACAA,SAAUxK,EADV,EACUA,KAAMgT,EADhB,EACgBA,KAAMC,EADtB,EACsBA,KAAMC,EAD5B,EAC4BA,KAEpC,OACC,yBAAKzT,GAAG,uBACLwT,GAAQzI,GACT,yBAAK/K,GAAG,4BACP,yBAAKA,GAAG,mCACP,yBAAKA,GAAG,iCACN4J,IAAOmB,EAASpB,WAAWG,OAAO,gBACnC,6BACCF,IAAOmB,EAASpB,WAAWG,OAAO,SAHpC,OAGkDF,IAAOmB,EAASf,SAASF,OAAO,YAKpFiB,GACA,yBAAK/K,GAAG,8BACP,kBAAC2D,EAAA,EAAD,CAAQC,UAAW,qBAAsB9B,QAAS,kBAAM,EAAKzB,MAAMqT,UAAU7B,UAAW0B,GACtFhT,EAAKoT,WAEGhT,IAAT8S,GACA,kBAAC9P,EAAA,EAAD,CAAQC,UAAW,qBAAsB9B,QAAS,kBAAM,EAAKzB,MAAMuT,UAAU/B,UAAW4B,GACtFlT,EAAKkT,MAGPD,GACA,kBAAC7P,EAAA,EAAD,CACCiF,MAAO,CAAEyH,gBAAiB,kBAAmBwD,MAAO,QACpD/R,QAAS,kBAAM,EAAKzB,MAAMyT,qBAC1BjC,UAAU,GAETtR,EAAKwT,e,GAvCezR,a,gBCQvB0R,EAAQ,CAAC,OAAQ,eAAgB,OAAQ,gBACzCC,EAAe,CACpB1T,UAAMI,EACNF,SAAS,EACTyK,QAAQ,EACRG,MAAM,EACNjB,KAAM,IAAIU,KACVyI,UAAM5S,EACN8S,UAAM9S,EACN0J,UAAW,GACXU,cAAUpK,EACV+K,iBAAa/K,EACb8N,KAAMuF,EAAM,GACZE,MAAOF,EACPG,UAAW,EACXC,SAAU,eACV1K,WAAO/I,EACPgM,SAAU,KACVxL,UAAMR,GAED0T,E,kDACL,WAAYhU,GAAQ,IAAD,8BAClB,cAAMA,IAEDC,MAAL,eACI2T,GAGJ,EAAKK,sBAAwB,EAAKA,sBAAsB1R,KAA3B,gBAC7B,EAAKG,YAAc,EAAKA,YAAYH,KAAjB,gBACnB,EAAK2R,sBAAwB,EAAKA,sBAAsB3R,KAA3B,gBAC7B,EAAK4R,cAAgB,EAAKA,cAAc5R,KAAnB,gBACrB,EAAK6R,iBAAmB,EAAKA,iBAAiB7R,KAAtB,gBACxB,EAAK8R,iBAAmB,EAAKA,iBAAiB9R,KAAtB,gBACxB,EAAK+R,WAAa,EAAKA,WAAW/R,KAAhB,gBAClB,EAAKgS,WAAa,EAAKA,WAAWhS,KAAhB,gBAdA,E,uLAiBlB0F,SAASC,MAAQ,6BACjB1H,KAAKC,SAAS,CAAEL,SAAS,I,kBAELM,IAAkBC,gB,cAA/BT,E,OAENM,KAAKC,SAAS,CAAEP,OAAMoM,SAAUpM,EAAK6S,Y,SAC/BvS,KAAKgU,4B,yDAEXhU,KAAKkI,YAAL,M,QAEDlI,KAAKC,SAAS,CAAEL,SAAS,I,2RAGzBW,QAAQC,IAAI,uB,SAGH+I,EAASvJ,KAAKP,MAAd8J,K,SACgBmD,IAAmBQ,WAAW3D,EAAKI,cAAeJ,EAAKK,Y,OAAzEJ,E,OACNxJ,KAAKC,SAAS,CAAEuJ,c,gDAEhBxJ,KAAKkI,YAAL,M,2JAKoBgC,GAAW,IAAD,OAC/BlK,KAAKC,SAAS,CAAEiK,aAAY,kBAAM,EAAK+J,WAAW,a,gLAGvBjU,KAAKP,MAAxByK,E,EAAAA,SAAU5J,E,EAAAA,KACb4J,GAAa5J,E,yCAAaN,KAAKkI,YAAY,2B,cAEhDlI,KAAKC,SAAS,CAAEoK,QAAQ,I,kBAGGqC,IAAmBiG,KAAKrS,EAAK8I,IAAKc,EAASd,K,QAA/DyB,E,QACMvK,KAAOA,EACnBN,KAAKC,SAAS,CAAE4K,gBAAe,kBAAM,EAAKoJ,WAAW,mB,kDAErD1T,QAAQC,IAAR,MACAR,KAAKkI,YAAL,M,QAGDlI,KAAKC,SAAS,CAAEoK,QAAQ,I,wJAGxB,OAAO,I,kCAEI/J,GAAO,IAAD,OACjBC,QAAQC,IAAI,qBAAsBF,GADjB,IAETuK,EAAgB7K,KAAKP,MAArBoL,YACJA,IAAaA,EAAYvK,KAAOA,GACpCN,KAAKC,SAAS,CAAEK,OAAMuK,gBAAe,WACpC,EAAKoJ,WAAW,a,iCAGPrG,GACVrN,QAAQC,IAAI,cAAeoN,GADX,MAEW5N,KAAKP,MAAxByK,EAFQ,EAERA,SAAU5J,EAFF,EAEEA,KACL,SAATsN,EAAiB5N,KAAKC,SAAS,CAAEyS,UAAM5S,EAAW8S,OAAM1I,IAC1C,iBAAT0D,EAAyB5N,KAAKC,SAAS,CAAEyS,MAAM,EAAME,OAAMtS,IAClD,SAATsN,EAAiB5N,KAAKC,SAAS,CAAEyS,MAAM,EAAME,UAAM9S,IAC1C,iBAAT8N,GAAyB5N,KAAKC,SAAS,CAAEyS,UAAM5S,EAAW8S,UAAM9S,IAEzEE,KAAKC,SAAS,CAAE2N,W,mCAEH,IAAD,OACN0F,EAActT,KAAKP,MAAnB6T,UACAY,IAAiBZ,EACvBtT,KAAKC,SAAS,CAAEqT,UAAWY,IAAgB,WAC1C,EAAKD,WAAWd,EAAMe,S,mCAGV,IAAD,SAC8BlU,KAAKP,MAAzCmO,EADM,EACNA,KAAM0F,EADA,EACAA,UAAWpJ,EADX,EACWA,SAAU5J,EADrB,EACqBA,KAC3B4T,IAAiBZ,GAEV,SAAT1F,GAAoB1D,KACN,iBAAT0D,GAA4BtN,KACnB,SAATsN,GAAqB1D,IAAY5J,IACxB,iBAATsN,GAET5N,KAAKC,SAAS,CAAEqT,UAAWY,IAAgB,WAC1C,EAAKD,WAAWd,EAAMe,S,uCAGP3K,GAChBvJ,KAAKC,SAAS,CAAEsJ,W,kCAELjC,GACX/G,QAAQC,IAAI8G,GACZ,IAAMzH,EAAQyH,EAAIC,UAAYD,EAAIC,SAAS1I,KAAOyI,EAAIC,SAAS1I,KAAKmE,QAAUsE,EAAItE,SAAWsE,EAAIE,YAAcF,EAC/GtH,KAAKC,SAAS,CAAEJ,MAAOA,GAAS,oB,yCAGhCG,KAAKC,SAAS,CAAEJ,WAAOC,M,sCAEP,IAAD,OACPyJ,EAASvJ,KAAKP,MAAd8J,KACRvJ,KAAKC,SAAL,2BAAmBmT,GAAnB,IAAiC7J,UAAQ,kBAAM,EAAK4K,yB,+BAE3C,IAAD,EACgGnU,KAAKP,MAArG8J,EADA,EACAA,KAAM3J,EADN,EACMA,QAASyK,EADf,EACeA,OAAQH,EADvB,EACuBA,SAAUW,EADjC,EACiCA,YAAa+C,EAD9C,EAC8CA,KAAM8E,EADpD,EACoDA,KAAME,EAD1D,EAC0DA,KAAMtS,EADhE,EACgEA,KAAMT,EADtE,EACsEA,MAAOH,EAD7E,EAC6EA,KAAMoM,EADnF,EACmFA,SAG3F,OAFAvL,QAAQC,IAAI0J,GAERtK,EAAgB,kBAACwB,EAAA,EAAD,MAGnB,yBAAKjC,GAAG,eACP,yBAAKA,GAAG,sBACP,yBAAKA,GAAG,gCACP,uBAAGkC,KAAK,KACP,yBAAKE,IAAKC,IAAMF,IAAI,eAAenC,GAAG,8BAGxC,4BAAKO,EAAK0U,kBAEX,yBAAKjV,GAAG,uBACR,yBAAKA,GAAG,4BACP,yBAAKA,GAAG,uBACG,SAATyO,EACA,kBAAC,EAAD,CACClO,KAAMA,EACNoM,SAAUA,EACVvC,KAAMA,EACNW,SAAUA,EACVyH,aAAc3R,KAAK4T,iBACnBhC,kBAAmB5R,KAAKyT,wBAEb,iBAAT7F,EACH,kBAAC,EAAD,CAAyB9M,KAAK,QAAQ2B,QAASzC,KAAKkC,cACxC,SAAT0L,EACH,kBAAC,EAAD,CAAiB1D,SAAUA,EAAUxK,KAAMA,EAAMY,KAAMA,IAC3C,iBAATsN,EACH,kBAAC,EAAD,CAAyBlO,KAAMA,EAAMmL,YAAaA,IAC/C,KACM,iBAAT+C,GACA,kBAAC,EAAD,CACC1D,SAAUA,EACVxK,KAAMA,EACNgT,KAAMA,EACNE,KAAMA,EACND,KAAe,SAAT/E,EACNiF,OAAQ7S,KAAK8T,WACbf,OAAQ/S,KAAK+T,WACbd,kBAAmBjT,KAAK0T,wBAGzB9T,GAAW,kBAACwB,EAAA,EAAD,MACXiJ,GAAU,kBAACjJ,EAAA,EAAD,CAAQ4B,QAAStD,EAAK2U,mBAChCxU,GACA,yBAAKV,GAAG,0BACP,yBAAKA,GAAG,qBACP,yBAAKA,GAAG,4BAAR,YACA,yBAAKA,GAAG,6BAA6BU,GACrC,yBAAKV,GAAG,2BACP,kBAAC2D,EAAA,EAAD,CAAQC,UAAW,qBAAsBjC,KAAK,SAASG,QAASjB,KAAK6T,kBACnEnU,EAAKoT,gB,GA/KSrR,aA2LX+R,a,0FC1NA,KACdhV,IAAI,WAAD,4BAAE,WAAOuO,GAAP,eAAArO,EAAA,sEACYC,IAAMH,IAAI,aAAeuO,GADrC,cACAnO,EADA,yBAEGA,EAAIC,MAFP,2CAAF,mDAAC,GAIJC,OAAO,WAAD,4BAAE,4BAAAJ,EAAA,sEACSC,IAAMH,IAAI,aADnB,cACHI,EADG,yBAEAA,EAAIC,MAAQ,IAFZ,2CAAF,kDAAC,GAIPyV,gBAAgB,WAAD,4BAAE,4BAAA5V,EAAA,sEACAC,IAAMH,IAAI,6BADV,cACZI,EADY,yBAETA,EAAIC,MAAQ,IAFH,2CAAF,kDAAC,GAIhBE,IAAI,WAAD,4BAAE,WAAOC,GAAP,eAAAN,EAAA,sEACYC,IAAMM,KAAK,YAAaD,GADpC,cACAJ,EADA,yBAEGA,EAAIC,MAFP,2CAAF,mDAAC,GAIJK,OAAO,WAAD,4BAAE,WAAOC,EAAIH,GAAX,eAAAN,EAAA,sEACSC,IAAMS,MAAM,aAAeD,EAAIH,GADxC,cACHJ,EADG,yBAEAA,EAAIC,MAFJ,2CAAF,qDAAC,GAIPQ,OAAO,WAAD,4BAAE,WAAOF,GAAP,eAAAT,EAAA,sEACSC,IAAMU,OAAO,aAAeF,GADrC,cACHP,EADG,yBAEAA,EAAIC,MAFJ,2CAAF,mDAAC,GAIPS,UAAU,WAAD,4BAAE,4BAAAZ,EAAA,sEACMC,IAAMU,OAAO,aADnB,cACNT,EADM,yBAEHA,EAAIC,MAFD,2CAAF,kDAAC,GAIV+H,OAAO,WAAD,4BAAE,WAAO0K,GAAP,eAAA5S,EAAA,sEACSC,IAAMH,IAAI,yBAA2B8S,GAD9C,cACH1S,EADG,yBAEAA,EAAIC,MAAQ,IAFZ,2CAAF,mDAAC,K,qEC7BO,KACdL,IAAI,WAAD,4BAAE,WAAOW,GAAP,eAAAT,EAAA,sEACYC,IAAMH,IAAI,oBAAsBW,GAD5C,cACAP,EADA,yBAEGA,EAAIC,MAFP,2CAAF,mDAAC,GAIJC,OAAO,WAAD,4BAAE,4BAAAJ,EAAA,sEACSC,IAAMH,IAAI,oBADnB,cACHI,EADG,yBAEAA,EAAIC,MAAQ,IAFZ,2CAAF,kDAAC,GAIP8N,UAAU,WAAD,4BAAE,WAAOnE,EAAMC,EAAOc,EAAM9K,GAA1B,iBAAAC,EAAA,6DACJ6V,EACL,oBACA/L,QACW1I,IAAV2I,EAAsB,IAAMA,EAAQ,UAC1B3I,IAAV2I,GAAuBc,EAAO,IAAMA,EAAO,KAC3C9K,EAAU,UAAYA,EAAU,IANxB,SAOME,IAAMH,IAAI+V,GAPhB,cAON3V,EAPM,yBAQHA,EAAIC,MAAQ,IART,2CAAF,yDAAC,GAUVqO,WAAW,WAAD,4BAAE,WAAO1E,EAAMC,EAAOhK,GAApB,eAAAC,EAAA,sEACKC,IAAMH,IAAI,oBAAsBgK,EAAO,IAAMC,GAAShK,EAAU,UAAYA,EAAU,KAD3F,cACPG,EADO,yBAEJA,EAAIC,MAAQ,IAFR,2CAAF,uDAAC,GAIX2V,cAAc,WAAD,4BAAE,WAAOhM,EAAMC,GAAb,eAAA/J,EAAA,sEACEC,IAAMH,IAAI,oBAAsBgK,EAAO,IAAMC,GAD/C,cACV7J,EADU,yBAEPA,EAAIC,MAAQ,IAFL,2CAAF,qDAAC,GAId4V,aAAa,WAAD,4BAAE,WAAOjM,EAAMkM,GAAb,eAAAhW,EAAA,sEACGC,IAAMH,IAAI,gCAAkCgK,EAAO,IAAMkM,GAD5D,cACT9V,EADS,yBAENA,EAAIC,MAAQ,IAFN,2CAAF,qDAAC,GAIb8V,aAAa,WAAD,4BAAE,WAAO5H,GAAP,eAAArO,EAAA,sEACGC,IAAMH,IAAI,yBAA2BuO,GADxC,cACTnO,EADS,yBAENA,EAAIC,MAAQ,IAFN,2CAAF,mDAAC,GAIb+V,QAAQ,WAAD,4BAAE,WAAOC,EAAW/I,GAAlB,eAAApN,EAAA,sEACQC,IAAMH,IAAI,oBAAsBqW,EAAY,IAAM/I,GAD1D,cACJlN,EADI,yBAEDA,EAAIC,MAAQ,IAFX,2CAAF,qDAAC,GAIRE,IAAI,WAAD,4BAAE,WAAOC,GAAP,eAAAN,EAAA,sEACYC,IAAMM,KAAK,mBAAoBD,GAD3C,cACAJ,EADA,yBAEGA,EAAIC,MAFP,2CAAF,mDAAC,GAIJK,OAAO,WAAD,4BAAE,WAAOC,EAAI0L,GAAX,eAAAnM,EAAA,sEACSC,IAAMS,MAAM,oBAAsBD,EAAI0L,GAD/C,cACHjM,EADG,yBAEAA,EAAIC,MAFJ,2CAAF,qDAAC,GAIPQ,OAAO,WAAD,4BAAE,WAAOwV,GAAP,eAAAnW,EAAA,sEACSC,IAAMU,OAAO,oBAAsBwV,GAD5C,cACHjW,EADG,yBAEAA,EAAIC,MAFJ,2CAAF,mDAAC,GAIPS,UAAU,WAAD,4BAAE,4BAAAZ,EAAA,sEACMC,IAAMU,OAAO,oBADnB,cACNT,EADM,yBAEHA,EAAIC,MAFD,2CAAF,kDAAC,GAIVkP,OAAO,WAAD,4BAAE,WAAOhB,EAAQ0B,GAAf,eAAA/P,EAAA,sEACSC,IAAMM,KAAK,yBAA2B8N,EAAS,gBAAkB0B,EAAgB,WAD1F,cACH7P,EADG,yBAEAA,EAAIC,MAFJ,2CAAF,qDAAC,GAIP8T,KAAK,WAAD,4BAAE,WAAO5F,EAAQ0B,GAAf,eAAA/P,EAAA,sEACWC,IAAMM,KAAK,yBAA2B8N,EAAS,gBAAkB0B,EAAgB,SAD5F,cACD7P,EADC,yBAEEA,EAAIC,MAFN,2CAAF,qDAAC,GAIL6P,aAAa,WAAD,4BAAE,WAAO3B,EAAQ0B,GAAf,eAAA/P,EAAA,sEACGC,IAAMM,KAAK,yBAA2B8N,EAAS,gBAAkB0B,EAAgB,iBADpF,cACT7P,EADS,yBAENA,EAAIC,MAFE,2CAAF,qDAAC,K","file":"static/js/9.a071db7a.chunk.js","sourcesContent":["import { axios } from './';\n\nexport default {\n\tget: async (storeId) => {\n\t\tlet res = await axios.get('/api/store/' + storeId);\n\t\treturn res.data;\n\t},\n\tgetAll: async () => {\n\t\tlet res = await axios.get('/api/store');\n\t\treturn res.data || [];\n\t},\n\tadd: async (params) => {\n\t\tlet res = await axios.post('/api/store', params);\n\t\treturn res.data;\n\t},\n\tupdate: async (id, params) => {\n\t\tlet res = await axios.patch('/api/store/' + id, params);\n\t\treturn res.data;\n\t},\n\tdelete: async (storeId) => {\n\t\tlet res = await axios.delete('/api/store/' + storeId);\n\t\treturn res.data;\n\t},\n\tdeleteAll: async () => {\n\t\tlet res = await axios.delete('/api/store');\n\t\treturn res.data;\n\t},\n};\n","import React, { Component } from 'react';\nimport './Container.css';\nimport logo from '../../images/cm_logo_white_128px.png';\nimport verificationService from '../../services/verificationService';\nimport dictionaryService from '../../services/dictionaryService';\nimport Loader from '../util/Loader';\n\nclass Container extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdict: {},\n\t\t\tredirect: props.redirect,\n\t\t\tloading: true,\n\t\t\terror: undefined,\n\t\t\tform: {},\n\t\t};\n\t}\n\tasync componentDidMount() {\n\t\tthis.setState({ loading: true });\n\n\t\ttry {\n\t\t\tconst dict = await dictionaryService.getDictionary('en');\n\t\t\tthis.setState({ dict });\n\t\t} catch (err) {}\n\n\t\ttry {\n\t\t\tconst user = await verificationService.getUser();\n\n\t\t\tif (user) this.setState({ user });\n\t\t\telse console.log('user not logged in');\n\t\t} catch (err) {\n\t\t\tthis.setState({ getUser: false });\n\t\t}\n\t\tthis.setState({ loading: false });\n\t}\n\tasync loadDictionary() {\n\t\ttry {\n\t\t\tconst dict = await dictionaryService.getDictionary('en');\n\t\t\tthis.setState({ dict });\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\tasync handleLogout() {\n\t\ttry {\n\t\t\tawait verificationService.logout();\n\t\t\tthis.props.onChange('login');\n\t\t\tthis.setState({ user: undefined });\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\trender() {\n\t\tconst { loading } = this.state;\n\t\tconst { header, children, type, error, noLogo, dict } = this.props;\n\t\tconst nav =\n\t\t\ttype !== 'login' ? (\n\t\t\t\t<div id='container-logout' onClick={() => this.props.onChange('login')}>\n\t\t\t\t\t{dict.login}\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<div id='container-signup' onClick={() => this.props.onChange('signup')}>\n\t\t\t\t\t{dict.signup}\n\t\t\t\t</div>\n\t\t\t);\n\n\t\tif (loading) return <Loader />;\n\n\t\treturn (\n\t\t\t<div id='container-wrapper'>\n\t\t\t\t<div id='container-top'>\n\t\t\t\t\t<div id='container-spacer'></div>\n\t\t\t\t\t{nav}\n\t\t\t\t</div>\n\t\t\t\t<div id='container-header-border'></div>\n\t\t\t\t<div id='container-header'>\n\t\t\t\t\t{header}\n\t\t\t\t\t<div id='container-header-logo-wrap'>\n\t\t\t\t\t\t{!noLogo && (\n\t\t\t\t\t\t\t<a href='/'>\n\t\t\t\t\t\t\t\t<img alt='Chinemachine' src={logo} id='container-header-logo' />\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div id='container-content'>{children}</div>\n\t\t\t\t{error && <div id='container-error'>{error}</div>}\n\t\t\t\t{loading && <Loader />}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Container;\n","import React, { Component } from 'react';\nimport './Login.css';\nimport verificationService from '../../services/verificationService';\nimport dictionaryService from '../../services/dictionaryService';\nimport Loader from '../util/Loader';\nimport Button from '../util/Button';\n\nclass Login extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdict: {},\n\t\t\tredirect: props.redirect,\n\t\t\tloading: true,\n\t\t\tgetUser: false,\n\t\t\tloggingIn: false,\n\t\t\terror: undefined,\n\t\t\tuser: undefined,\n\t\t\tform: {\n\t\t\t\temail: '',\n\t\t\t\tpassword: '',\n\t\t\t},\n\t\t};\n\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t\tthis.handleFormChange = this.handleFormChange.bind(this);\n\t\tthis.handleLogout = this.handleLogout.bind(this);\n\t}\n\tasync componentDidMount() {\n\t\tthis.setState({ loading: true });\n\n\t\ttry {\n\t\t\tconst dict = await dictionaryService.getDictionary('en');\n\t\t\tthis.setState({ dict });\n\t\t} catch (err) {}\n\n\t\ttry {\n\t\t\tconst user = await verificationService.getUser();\n\t\t\tif (user) {\n\t\t\t\tconsole.log('user already logged in');\n\t\t\t\tthis.setState({ getUser: true, user }, () => {\n\t\t\t\t\tthis.handleLogin(user);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.log('user not logged in');\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tthis.setState({ getUser: false });\n\t\t}\n\t\tthis.setState({ loading: false });\n\t}\n\tcomponentWillUnmount() {}\n\tasync loadDictionary() {\n\t\ttry {\n\t\t\tconst dict = await dictionaryService.getDictionary('en');\n\t\t\tthis.setState({ dict });\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\n\thandleFormChange(e) {\n\t\tconst form = this.state.form;\n\t\tform[e.target.id] = e.target.value;\n\t\tthis.setState({ form });\n\t}\n\tasync handleSubmit(e) {\n\t\te.preventDefault();\n\t\tconst { form } = this.state;\n\t\tthis.setState({ error: undefined, loggingIn: true });\n\t\ttry {\n\t\t\tthis.props.onSubmit();\n\t\t\tconst user = await verificationService.login(form.email, form.password);\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.setState({ user, loggingIn: false, getUser: true }, () => this.handleLogin(user));\n\t\t\t}, 500);\n\t\t} catch (err) {\n\t\t\tthis.setState({ loggingIn: false });\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\thandleLogin(user) {\n\t\tif (this.props.onLogin) this.props.onLogin(user || this.state.user);\n\t}\n\tasync handleLogout() {\n\t\ttry {\n\t\t\tawait verificationService.logout();\n\t\t\tthis.setState({ getUser: false });\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\trender() {\n\t\tconst { form, loading, loggingIn, getUser } = this.state;\n\t\tconst { dict } = this.props;\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<form onSubmit={this.handleSubmit}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid='email'\n\t\t\t\t\t\tname='email'\n\t\t\t\t\t\tautoFocus={false}\n\t\t\t\t\t\tplaceholder={dict.email + '...'}\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tvalue={form.email}\n\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid='password'\n\t\t\t\t\t\tname='password'\n\t\t\t\t\t\tplaceholder={dict.password + '...'}\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\tvalue={form.password}\n\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button className='button-wide' type='submit' loading={loggingIn}>\n\t\t\t\t\t\tOkey\n\t\t\t\t\t</Button>\n\t\t\t\t</form>\n\t\t\t\t{loggingIn && <Loader message={dict.loggingIn} />}\n\t\t\t\t{getUser && (\n\t\t\t\t\t<div id='login-loggedin'>\n\t\t\t\t\t\t<div id='login-loggedin-message'>{dict.youAreLoggedIn}</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{loading && <Loader />}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default Login;\n","import React, { Component } from 'react';\nimport './Logout.css';\nimport verificationService from '../../services/verificationService';\nimport Loader from '../util/Loader';\n\nclass Logout extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tloading: true,\n\t\t\terror: undefined,\n\t\t};\n\t}\n\tasync componentDidMount() {\n\t\ttry {\n\t\t\tthis.props.onSubmit();\n\t\t\tawait verificationService.logout();\n\t\t\tthis.setState({ loading: false });\n\t\t\tthis.props.onLogout();\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\trender() {\n\t\tconst { loading } = this.state;\n\t\tconst { dict } = this.props;\n\t\tif (loading) return <Loader message={dict.loggingOut + '...'} />;\n\t\treturn <div>{dict.youAreLoggedIn}</div>;\n\t}\n}\n\nexport default Logout;\n","import React, { Component } from 'react';\nimport './Signup.css';\nimport 'react-phone-number-input/style.css';\nimport PhoneInput from 'react-phone-number-input';\nimport verificationService from '../../services/verificationService';\nimport dictionaryService from '../../services/dictionaryService';\nimport Loader from '../util/Loader';\nimport Button from '../util/Button';\n\nclass Signup extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdict: {},\n\t\t\tisSignedUp: false,\n\t\t\tloading: false,\n\t\t\tsigningUp: false,\n\t\t\terror: undefined,\n\t\t\ttoken: props.token,\n\t\t\tform: {\n\t\t\t\tfirstName: '',\n\t\t\t\tlastName: '',\n\t\t\t\temail: '',\n\t\t\t\temail2: '',\n\t\t\t\tphone: '',\n\t\t\t\tpassword: '',\n\t\t\t\tpassword2: '',\n\t\t\t},\n\t\t};\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t\tthis.handleFormChange = this.handleFormChange.bind(this);\n\t}\n\tcomponentDidMount() {\n\t\tthis.loadDictionary();\n\t}\n\tasync loadDictionary() {\n\t\ttry {\n\t\t\tconst dict = await dictionaryService.getDictionary('en');\n\t\t\tthis.setState({ dict });\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\thandleFormChange(e) {\n\t\tconst form = this.state.form;\n\t\tform[e.target.id] = e.target.value;\n\t\tthis.setState({ form });\n\t}\n\thandlePhoneChange(value) {\n\t\tconst form = this.state.form;\n\t\tform.phone = value;\n\t\tthis.setState({ form });\n\t}\n\tasync handleSubmit(e) {\n\t\tconsole.log('saving signup');\n\t\te.preventDefault();\n\t\tconst { form } = this.state;\n\t\tthis.setState({ signingUp: true, error: undefined });\n\t\ttry {\n\t\t\tconsole.log('signing up no...');\n\t\t\tthis.props.onSubmit();\n\t\t\tconst user = await verificationService.signup(form);\n\t\t\tconsole.log('SIGNED UP');\n\t\t\tthis.setState({ user }, () => this.handleSignUp(user));\n\t\t} catch (err) {\n\t\t\tconsole.log('was errors');\n\t\t\tthis.props.onError(err);\n\t\t}\n\t\tsetTimeout(() => {\n\t\t\tthis.setState({ signingUp: false });\n\t\t}, 300);\n\t}\n\thandleSignUp(user) {\n\t\tconsole.log('signed up', user);\n\t\tif (!user) return this.props.onError('User signed in is empty');\n\n\t\tthis.setState({ isSignedUp: true, user, error: undefined });\n\t\tif (this.props.onSignUp) this.props.onSignUp(user);\n\t}\n\trender() {\n\t\tconst { form, signingUp, error } = this.state;\n\t\tconst { dict } = this.props;\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<form onSubmit={this.handleSubmit}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid='firstName'\n\t\t\t\t\t\tvalue={form.firstName}\n\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\tplaceholder={dict.firstName + '...'}\n\t\t\t\t\t\tname='firstName'\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid='lastName'\n\t\t\t\t\t\tvalue={form.lastName}\n\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\tplaceholder={dict.lastName + '...'}\n\t\t\t\t\t\tname='firstName'\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid='email'\n\t\t\t\t\t\tvalue={form.email}\n\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\tplaceholder={dict.email + '...'}\n\t\t\t\t\t\tname='email'\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid='email2'\n\t\t\t\t\t\tvalue={form.email2}\n\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\tplaceholder={dict.reType + ' ' + dict.email + '...'}\n\t\t\t\t\t\tname='email2'\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid='password'\n\t\t\t\t\t\tvalue={form.password}\n\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\tplaceholder={dict.password + '...'}\n\t\t\t\t\t\tname='password'\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid='password2'\n\t\t\t\t\t\tvalue={form.password2}\n\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\tplaceholder={dict.reType + ' ' + dict.password + '...'}\n\t\t\t\t\t\tname='password'\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t/>\n\t\t\t\t\t<PhoneInput\n\t\t\t\t\t\tplaceholder={dict.phone + '...'}\n\t\t\t\t\t\tvalue={form.phone}\n\t\t\t\t\t\tdefaultCountry={'FR'}\n\t\t\t\t\t\tonChange={(val) => this.handlePhoneChange(val)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button type='submit' loading={signingUp}>\n\t\t\t\t\t\tOkey\n\t\t\t\t\t</Button>\n\t\t\t\t</form>\n\t\t\t\t{signingUp && <Loader message={dict.signingUp} />}\n\t\t\t\t{error && <div id='signup-error'>{error}</div>}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default Signup;\n","import React, { Component } from 'react';\nimport './Reset.css';\nimport verificationService from '../../services/verificationService';\nimport Loader from '../util/Loader';\nimport Button from '../util/Button';\n\nclass Reset extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdict: {},\n\t\t\tloading: true,\n\t\t\tresetting: false,\n\t\t\tsuccess: false,\n\t\t\terror: undefined,\n\t\t\tuser: undefined,\n\t\t\tform: {\n\t\t\t\temail: '',\n\t\t\t},\n\t\t};\n\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t\tthis.handleFormChange = this.handleFormChange.bind(this);\n\t}\n\tasync componentDidMount() {}\n\thandleFormChange(e) {\n\t\tconst form = this.state.form;\n\t\tform[e.target.id] = e.target.value;\n\t\tthis.setState({ form });\n\t}\n\tasync handleSubmit(e) {\n\t\te.preventDefault();\n\n\t\tconst { form } = this.state;\n\t\tthis.setState({ error: undefined, resetting: true, success: false });\n\t\ttry {\n\t\t\tthis.props.onSubmit();\n\t\t\tawait verificationService.requestPasswordReset(form.email);\n\t\t\tsetTimeout(() => this.setState({ resetting: false, success: true }), 500);\n\t\t} catch (err) {\n\t\t\tthis.setState({ resetting: false, success: false });\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\trender() {\n\t\tconst { form, success, resetting } = this.state;\n\t\tconst { dict } = this.props;\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<form onSubmit={this.handleSubmit}>\n\t\t\t\t\t{!success ? (\n\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t<div id='reset-password-message'>{dict.fillInEmailPasswordReset}</div>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid='email'\n\t\t\t\t\t\t\t\tname='email'\n\t\t\t\t\t\t\t\tautoFocus={true}\n\t\t\t\t\t\t\t\tplaceholder={dict.email + '...'}\n\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\tvalue={form.email}\n\t\t\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Button type='submit' loading={resetting}>\n\t\t\t\t\t\t\t\tOkey\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div id='reset-password-message-done'>{dict.checkEmailForPasswordResetLink}</div>\n\t\t\t\t\t)}\n\t\t\t\t</form>\n\t\t\t\t{resetting && <Loader />}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default Reset;\n","import React, { Component } from 'react';\nimport './Update.css';\nimport verificationService from '../../services/verificationService';\nimport Loader from '../util/Loader';\nimport Button from '../util/Button';\n\nclass Update extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttoken: props.token,\n\t\t\tloading: false,\n\t\t\tupdating: false,\n\t\t\tsuccess: false,\n\t\t\terror: undefined,\n\t\t\tuser: undefined,\n\t\t\tform: {\n\t\t\t\tnewpassword: '',\n\t\t\t\tnewpassword2: '',\n\t\t\t\ttoken: props.token,\n\t\t\t},\n\t\t};\n\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t\tthis.handleFormChange = this.handleFormChange.bind(this);\n\t}\n\tasync componentDidMount() {}\n\thandleFormChange(e) {\n\t\tconst form = this.state.form;\n\t\tform[e.target.id] = e.target.value;\n\t\tthis.setState({ form });\n\t}\n\tasync handleSubmit(e) {\n\t\te.preventDefault();\n\t\tconst { form } = this.state;\n\t\tif (form.newpassword !== form.newpassword2) return this.props.onError({ message: 'Password does not match' });\n\n\t\tthis.setState({ error: undefined, updating: true, success: false });\n\t\ttry {\n\t\t\tthis.props.onSubmit();\n\t\t\tawait verificationService.updatePassword(form.token, form.newpassword, form.newpassword2);\n\t\t\tsetTimeout(() => this.setState({ updating: false, success: true }), 500);\n\t\t} catch (err) {\n\t\t\tthis.setState({ updating: false, success: false });\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\trender() {\n\t\tconst { form, loading, success, updating } = this.state;\n\n\t\tconst { dict } = this.props;\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t{!success ? (\n\t\t\t\t\t<form onSubmit={this.handleSubmit}>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid='newpassword'\n\t\t\t\t\t\t\tname='newpassword'\n\t\t\t\t\t\t\tautoFocus={true}\n\t\t\t\t\t\t\tplaceholder={dict.newPassword + '...'}\n\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\tvalue={form.newpassword}\n\t\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid='newpassword2'\n\t\t\t\t\t\t\tname='newpassword2'\n\t\t\t\t\t\t\tautoFocus={false}\n\t\t\t\t\t\t\tplaceholder={dict.reType + ' ' + dict.newPassword + '...'}\n\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\tvalue={form.newpassword2}\n\t\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input id='token' name='token' type='hidden' value={form.token} onChange={this.handleFormChange} />\n\t\t\t\t\t\t<Button type='submit' loading={loading}>\n\t\t\t\t\t\t\t{dict.send}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</form>\n\t\t\t\t) : (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<div id='reset-password-message'>{dict.yourPasswordWasReset}</div>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t)}\n\t\t\t\t{updating && <Loader />}\n\t\t\t\t{loading && <Loader />}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default Update;\n","import React, { Component } from 'react';\nimport './Verify.css';\nimport verificationService from '../../services/verificationService';\nimport dictionaryService from '../../services/dictionaryService';\nimport Loader from '../util/Loader';\nimport Button from '../util/Button';\n\nclass Verify extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdict: {},\n\t\t\ttoken: props.token,\n\t\t\tverified: false,\n\t\t\tverifying: false,\n\t\t\tloading: false,\n\t\t\terror: undefined,\n\t\t\tform: {\n\t\t\t\tcode: '',\n\t\t\t\ttoken: props.token || '',\n\t\t\t},\n\t\t};\n\t\tthis.formRef = React.createRef();\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t\tthis.handleFormChange = this.handleFormChange.bind(this);\n\t}\n\tasync componentDidMount() {\n\t\tawait this.loadDictionary();\n\t\tconst { token } = this.state;\n\t\tif (token) this.handleSubmit();\n\t}\n\tasync loadDictionary() {\n\t\ttry {\n\t\t\tconst dict = await dictionaryService.getDictionary();\n\t\t\tthis.setState({ dict });\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\thandleFormChange(e) {\n\t\tconst form = this.state.form;\n\t\tform[e.target.id] = e.target.value;\n\t\tthis.setState({ form });\n\t}\n\tasync handleSubmit(e) {\n\t\tconsole.log('verifying signup');\n\t\tif (e) e.preventDefault();\n\n\t\tconst { form } = this.state;\n\t\ttry {\n\t\t\tthis.setState({ verifying: true, verified: false, error: undefined });\n\t\t\tthis.props.onSubmit();\n\t\t\tawait verificationService.verify(form.token || form.code);\n\t\t\tthis.setState({ verified: true, verifying: false });\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t\tthis.setState({ verifying: false, verified: false, error: err });\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { form, verifying, verified, error, user } = this.state;\n\n\t\tconst { dict } = this.props;\n\n\t\tif (verifying) return <Loader message={'verifying account'} />;\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t{!error && verified && (\n\t\t\t\t\t<div id='verify-finished-message'>\n\t\t\t\t\t\t{dict.accountIsVerified}\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<div id={'verify-finished-gotologin'}>\n\t\t\t\t\t\t\t<Button onClick={() => this.props.onVerification(user)}>{dict.login}</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{!verified && (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<div id='verify-finished-message'>{dict.checkEmailToVerifyAccount}</div>\n\t\t\t\t\t\t<form ref={this.formRef} onSubmit={this.handleSubmit}>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid='code'\n\t\t\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\t\t\tautoFocus={false}\n\t\t\t\t\t\t\t\tvalue={form.code}\n\t\t\t\t\t\t\t\tplaceholder={dict.securityCode + '...'}\n\t\t\t\t\t\t\t\tname='code'\n\t\t\t\t\t\t\t\ttype='number'\n\t\t\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<input id='token' name='token' type='hidden' value={form.token} onChange={this.handleFormChange} />\n\t\t\t\t\t\t\t<Button type='submit' loading={verifying}>\n\t\t\t\t\t\t\t\tOkey\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t)}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default Verify;\n","import React, { Component } from 'react';\nimport './ReCode.css';\nimport verificationService from '../../services/verificationService';\nimport dictionaryService from '../../services/dictionaryService';\nimport Loader from '../util/Loader';\nimport Button from '../util/Button';\n\nclass ReCode extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdict: {},\n\t\t\ttoken: props.token,\n\t\t\tresent: false,\n\t\t\tresending: false,\n\t\t\tloading: false,\n\t\t\terror: undefined,\n\t\t\tform: {\n\t\t\t\temail: '',\n\t\t\t},\n\t\t};\n\t\tthis.formRef = React.createRef();\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t\tthis.handleFormChange = this.handleFormChange.bind(this);\n\t}\n\tasync componentDidMount() {\n\t\tawait this.loadDictionary();\n\t}\n\tasync loadDictionary() {\n\t\ttry {\n\t\t\tconst dict = await dictionaryService.getDictionary('en');\n\t\t\tthis.setState({ dict });\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\thandleFormChange(e) {\n\t\tconst form = this.state.form;\n\t\tform[e.target.id] = e.target.value;\n\t\tthis.setState({ form });\n\t}\n\tasync handleSubmit(e) {\n\t\tconsole.log('verifying signup');\n\t\tif (e) e.preventDefault();\n\n\t\tconst { form } = this.state;\n\t\ttry {\n\t\t\tthis.props.onSubmit();\n\t\t\tthis.setState({ resending: true, resent: false, error: undefined });\n\t\t\tawait verificationService.reverify(form.email);\n\t\t\tthis.setState({ resending: false, resent: true });\n\t\t\tthis.props.onReCode();\n\t\t} catch (err) {\n\t\t\tthis.setState({ resending: false });\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { form, resent, resending, user } = this.state;\n\t\tconst { dict } = this.props;\n\t\t//if(loading) return <Loader/>\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div id='recode-enter-email'>{dict.enterEmailForCode}</div>\n\t\t\t\t{resent ? (\n\t\t\t\t\t<div id='recode-finished-message'>\n\t\t\t\t\t\t{dict.accountIsVerified}\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<Button id={'recode-finished-gotologin'} onClick={() => this.props.onVerification(user)}>\n\t\t\t\t\t\t\t{dict.login}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<form ref={this.formRef} onSubmit={this.handleSubmit}>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid='email'\n\t\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\t\tautoFocus={false}\n\t\t\t\t\t\t\tvalue={form.email}\n\t\t\t\t\t\t\tplaceholder={dict.email + '...'}\n\t\t\t\t\t\t\tname='email'\n\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button type='submit' loading={resending}>\n\t\t\t\t\t\t\tOkey\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</form>\n\t\t\t\t)}\n\t\t\t\t{resending && <Loader message={dict.reSendingVerificationCode} />}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default ReCode;\n","import React, { Component } from 'react';\nimport './index.css';\nimport dictionaryService from '../../services/dictionaryService';\nimport Loader from '../util/Loader';\nimport Container from './Container';\nimport Login from './Login';\nimport Logout from './Logout';\nimport Signup from './Signup';\nimport Reset from './Reset';\nimport Update from './Update';\nimport Verify from './Verify';\nimport ReCode from './ReCode';\n\nclass Verification extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tconst searchParams = new URLSearchParams(props.location ? props.location.search : '');\n\t\tconst type =\n\t\t\tprops.location && props.location.pathname.replace('/verification', '')\n\t\t\t\t? props.location.pathname.replace('/verification/', '')\n\t\t\t\t: props.type || 'login';\n\n\t\tthis.state = {\n\t\t\tloading: false,\n\t\t\ttype: type,\n\t\t\tdict: {},\n\t\t\tnoBackground: props.noBackground,\n\t\t\terror: searchParams.get('error') || undefined,\n\t\t\tredirect: searchParams.get('redirect'),\n\t\t\ttoken: searchParams.get('token'),\n\t\t\ttypes: {\n\t\t\t\tlogin: 'Login',\n\t\t\t\tlogout: 'Log out',\n\t\t\t\tsignup: 'Sign Up',\n\t\t\t\tverify: 'Verify',\n\t\t\t\treset: 'Reset password',\n\t\t\t\tupdate: 'Change password',\n\t\t\t\trecode: 'Verify account',\n\t\t\t},\n\t\t};\n\n\t\tthis.handleLogin = this.handleLogin.bind(this);\n\t\tthis.handleLogout = this.handleLogout.bind(this);\n\t\tthis.handleSignUp = this.handleSignUp.bind(this);\n\t}\n\tcomponentDidMount() {\n\t\tthis.loadDictionary();\n\t}\n\tasync loadDictionary() {\n\t\tconst dict = await dictionaryService.getDictionary();\n\t\tconst types = {\n\t\t\tlogin: dict.login,\n\t\t\tlogout: dict.logout,\n\t\t\tsignup: dict.signup,\n\t\t\tverify: dict.verify,\n\t\t\treset: dict.resetPassword,\n\t\t\tupdate: dict.changePassword,\n\t\t\trecode: dict.verifyAccount,\n\t\t};\n\t\tthis.setState({ dict, types });\n\t}\n\thandleSubmit() {\n\t\tthis.setState({ error: undefined });\n\t}\n\thandleError(err) {\n\t\tconst error = !err\n\t\t\t? undefined\n\t\t\t: err.response && err.response.data\n\t\t\t? err.response.data.message\n\t\t\t: err.message || err.toString();\n\t\tthis.setState({ error });\n\t}\n\thandleShowType(type, user) {\n\t\tconsole.log(type, user);\n\t\tthis.setState({ type, user, error: undefined }, () => {\n\t\t\tdocument.title = 'Chinemachine / ' + this.state.types[this.state.type];\n\t\t});\n\t}\n\thandleShowLogin(user) {\n\t\tthis.setState({ component: Login, user });\n\t}\n\thandleLogin(user) {\n\t\tthis.setState({ user, error: undefined });\n\t\tif (this.props.onLogin) this.props.onLogin(user);\n\t\tthis.redirect();\n\t\tconsole.log('logged in');\n\t}\n\thandleLogout() {\n\t\tthis.setState({ user: null, type: 'login', error: undefined });\n\t\tif (this.props.onLogout) this.props.onLogout();\n\t\tthis.redirect();\n\t\tconsole.log('logged out');\n\t}\n\thandleSignUp(user) {\n\t\tconsole.log('NEW SIGNUP', user);\n\t\tthis.setState({ user, error: undefined });\n\t\tif (this.props.onSignUp) this.props.onSignUp();\n\t\tthis.handleShowType('verify');\n\t\tconsole.log('signed up');\n\t}\n\thandleVerification(user) {\n\t\tconsole.log('verified account');\n\t\tthis.setState({ error: undefined });\n\t\tif (this.props.onVerification) this.props.onVerification();\n\t\tthis.handleShowType('login');\n\t}\n\n\thandleUpdated(user) {\n\t\tconsole.log(user);\n\t\tthis.handleShowType('login');\n\t}\n\tredirect() {\n\t\tconsole.log('REDIRECT', this.state.redirect);\n\t\t//return\n\t\tif (this.state.redirect) this.props.history.push(this.state.redirect);\n\t}\n\trender() {\n\t\tconst { user, type, types, loading, redirect, noBackground, token, dict, error } = this.state;\n\n\t\tconst { noLogo } = this.props;\n\n\t\treturn (\n\t\t\t<div id='verification' style={noBackground ? { background: 'none' } : undefined}>\n\t\t\t\t<Container\n\t\t\t\t\theader={types[type]}\n\t\t\t\t\ttype={type}\n\t\t\t\t\terror={error}\n\t\t\t\t\tnoLogo={noLogo}\n\t\t\t\t\tdict={dict}\n\t\t\t\t\tonChange={(type) => this.handleShowType(type)}\n\t\t\t\t>\n\t\t\t\t\t{type === 'login' ? (\n\t\t\t\t\t\t<Login\n\t\t\t\t\t\t\tkey={'login'}\n\t\t\t\t\t\t\temail={user && user.email}\n\t\t\t\t\t\t\tonLogin={this.handleLogin}\n\t\t\t\t\t\t\tredirect={redirect}\n\t\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\t\tonError={(err) => this.handleError(err)}\n\t\t\t\t\t\t\tonSubmit={() => this.handleSubmit()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : type === 'logout' ? (\n\t\t\t\t\t\t<Logout\n\t\t\t\t\t\t\tkey={'logout'}\n\t\t\t\t\t\t\temail={user && user.email}\n\t\t\t\t\t\t\tonLogout={this.handleLogout}\n\t\t\t\t\t\t\tredirect={redirect}\n\t\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\t\tonError={(err) => this.handleError(err)}\n\t\t\t\t\t\t\tonSubmit={() => this.handleSubmit()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : type === 'reset' ? (\n\t\t\t\t\t\t<Reset\n\t\t\t\t\t\t\tkey={'reset'}\n\t\t\t\t\t\t\temail={user && user.email}\n\t\t\t\t\t\t\ttoken={token}\n\t\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\t\tonError={(err) => this.handleError(err)}\n\t\t\t\t\t\t\tonSubmit={() => this.handleSubmit()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : type === 'update' ? (\n\t\t\t\t\t\t<Update\n\t\t\t\t\t\t\tkey={'update'}\n\t\t\t\t\t\t\temail={user && user.email}\n\t\t\t\t\t\t\ttoken={token}\n\t\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\t\tonUpdated={() => this.handleUpdated()}\n\t\t\t\t\t\t\tonError={(err) => this.handleError(err)}\n\t\t\t\t\t\t\tonSubmit={() => this.handleSubmit()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : type === 'verify' ? (\n\t\t\t\t\t\t<Verify\n\t\t\t\t\t\t\tkey={'update'}\n\t\t\t\t\t\t\ttoken={token}\n\t\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\t\tonVerification={(user) => this.handleVerification(user)}\n\t\t\t\t\t\t\tonError={(err) => this.handleError(err)}\n\t\t\t\t\t\t\tonSubmit={() => this.handleSubmit()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : type === 'recode' ? (\n\t\t\t\t\t\t<ReCode\n\t\t\t\t\t\t\tkey={'recode'}\n\t\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\t\tonReCode={() => this.handleShowType('verify')}\n\t\t\t\t\t\t\tonError={(err) => this.handleError(err)}\n\t\t\t\t\t\t\tonSubmit={() => this.handleSubmit()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : type === 'signup' ? (\n\t\t\t\t\t\t<Signup\n\t\t\t\t\t\t\tkey={'signup'}\n\t\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\t\tonSignUp={this.handleSignUp}\n\t\t\t\t\t\t\tredirect={redirect}\n\t\t\t\t\t\t\tonError={(err) => this.handleError(err)}\n\t\t\t\t\t\t\tonSubmit={() => this.handleSubmit()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div>Invalid type</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{loading && <Loader />}\n\t\t\t\t</Container>\n\t\t\t\t<div id='verification-bubbles'>\n\t\t\t\t\t<div className='verification-bubble' onClick={() => this.handleShowType('reset')}>\n\t\t\t\t\t\t{dict.forgotPassword}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='verification-bubble' onClick={() => this.handleShowType('recode')}>\n\t\t\t\t\t\t{dict.verifyAccount}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Verification;\n","import React, { Component } from 'react';\nimport './AppointmentCalendar.css';\nimport Select from 'react-select';\nimport AsyncSelect from 'react-select/async';\nimport moment from 'moment-timezone';\nimport Hammer from 'rc-hammerjs';\nimport Button from '../util/Button';\nimport Loader from '../util/Loader';\nimport Calendar from 'react-calendar';\n\nimport dictionaryService from '../../services/dictionaryService';\nimport storeService from '../../services/storeService';\nimport userService from '../../services/userService';\nimport appointmentService from '../../services/appointmentService';\nimport { findTimeZone, getZonedTime, getUnixTime } from 'timezone-support';\n\nconst REFRESH_INTERVAL = 30000;\n\nconst createAvailableTime = (year, month, day, hour, minute, store) => {\n\tconst startTime =\n\t\tmoment\n\t\t\t.tz(moment({ year, month, day, hour, minute }).format('YYYY-MM-DD HH:mm'), 'YYYY-MM-DD HH:mm', 'Europe/Paris')\n\t\t\t.unix() * 1000;\n\tconst endTime = startTime + 30 * 60 * 1000;\n\treturn {\n\t\t_id: startTime + '-' + endTime,\n\t\tstartTime: startTime,\n\t\tendTime: endTime,\n\t\tstoreId: store._id,\n\t\tstore,\n\t\tgenerated: true,\n\t};\n};\nconst generateAvailable = (date, store) => {\n\tconst available = [];\n\tfor (var i = 0, h = 12, m = 0; h < 20; i++, h += 0.5) {\n\t\tavailable.push(createAvailableTime(date.getFullYear(), date.getMonth(), date.getDate(), Math.floor(h), m, store));\n\t\tm = m === 0 ? 30 : 0;\n\t}\n\treturn available;\n};\n\nclass AppointmentCalendar extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdate: props.date || new Date(),\n\t\t\tselected: props.selected || undefined,\n\t\t\tavailability: props.availability,\n\t\t\tdict: {},\n\t\t\tloading: true,\n\t\t\tloadingAppointment: false,\n\t\t\tsaving: false,\n\t\t\tcancelling: false,\n\t\t\trefreshing: false,\n\t\t\terror: undefined,\n\t\t\tdone: false,\n\t\t\tcalendarDate: undefined,\n\t\t\tstore: undefined,\n\t\t\tstores: [],\n\t\t\tavail: undefined,\n\t\t\tavailable: [],\n\t\t\tavailableMonth: [],\n\t\t\tappointment: undefined,\n\t\t\tupdatingSlot: undefined,\n\t\t\tcustomerSearchTerm: '',\n\t\t\tcustomerSearch: [],\n\t\t\tcustomer: undefined,\n\t\t\tbooking: false,\n\t\t};\n\n\t\tthis.handleCalendarChange = this.handleCalendarChange.bind(this);\n\t\tthis.handleDateChanged = this.handleDateChanged.bind(this);\n\t\tthis.handleIsDateDisabled = this.handleIsDateDisabled.bind(this);\n\t\tthis.handleDeleteAppointment = this.handleDeleteAppointment.bind(this);\n\t\tthis.handleIsDateAvailable = this.handleIsDateAvailable.bind(this);\n\t\tthis.handleStartDateChange = this.handleStartDateChange.bind(this);\n\t\tthis.handleStoreChange = this.handleStoreChange.bind(this);\n\t\tthis.handleCustomerSearch = this.handleCustomerSearch.bind(this);\n\t\tthis.handleCustomerSearchSelected = this.handleCustomerSearchSelected.bind(this);\n\t\tthis.handleCustomerBooking = this.handleCustomerBooking.bind(this);\n\t\tthis.refreshInterval = null;\n\t}\n\tasync componentDidMount() {\n\t\tlet { dict, langCode } = this.props;\n\t\tthis.setState({ loading: true });\n\t\ttry {\n\t\t\tif (!dict) dict = await dictionaryService.getDictionary(langCode);\n\t\t\tconst stores = await storeService.getAll();\n\t\t\tconst store = stores.length ? stores[1] : undefined;\n\t\t\tconst { date } = this.state;\n\t\t\tawait this.setStateAsync({ dict, stores, store, date });\n\t\t\tawait this.loadAll(date);\n\t\t\tthis.refreshInterval = setInterval(() => this.loadAll(this.state.date, true), REFRESH_INTERVAL);\n\t\t} catch (err) {\n\t\t\tthis.handleError(err);\n\t\t}\n\n\t\tthis.setState({ loading: false });\n\t}\n\tsetStateAsync(state) {\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.setState(state, resolve);\n\t\t});\n\t}\n\n\tasync loadAll(date, background) {\n\t\tawait this.loadAppointmentsByMonth(date, background);\n\t\tawait this.loadAppointments(date, background);\n\t}\n\tcomponentWillUnmount() {\n\t\tclearInterval(this.refreshInterval);\n\t}\n\tasync loadAppointments(date, background) {\n\t\tconst { store } = this.state;\n\t\tconst { edit } = this.props;\n\n\t\tdate = date || this.state.date ? new Date(date || this.state.date) : new Date();\n\n\t\tif (!store) return;\n\n\t\tif (!background) this.setState({ refreshing: true, date });\n\t\ttry {\n\t\t\tlet available = await appointmentService.getByDate(\n\t\t\t\tdate.getFullYear(),\n\t\t\t\tdate.getMonth(),\n\t\t\t\tdate.getDate(),\n\t\t\t\tstore._id\n\t\t\t);\n\t\t\tif (edit) {\n\t\t\t\tavailable = generateAvailable(date, store).map((avail, idx) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\tavailable.filter(\n\t\t\t\t\t\t\t(a) =>\n\t\t\t\t\t\t\t\tmoment(a.startTime).format('HH:mm') === moment(avail.startTime).format('HH:mm') &&\n\t\t\t\t\t\t\t\tmoment(a.endTime).format('HH:mm') === moment(avail.endTime).format('HH:mm')\n\t\t\t\t\t\t)[0] || avail\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t} else\n\t\t\t\tavailable = available.filter(\n\t\t\t\t\t(avail) =>\n\t\t\t\t\t\t!avail.userId &&\n\t\t\t\t\t\tavail.status === 'ACTIVE' &&\n\t\t\t\t\t\t!moment(avail.startTime).isBefore(moment().tz('Europe/Paris'), 'day')\n\t\t\t\t);\n\n\t\t\tthis.setState({ available, date });\n\t\t} catch (err) {\n\t\t\tthis.handleError(err);\n\t\t}\n\n\t\tthis.setState({ refreshing: false });\n\t}\n\tasync loadAppointmentsByMonth(date, background) {\n\t\tconst { store } = this.state;\n\t\tconst { edit } = this.props;\n\n\t\tdate = date || this.state.date ? new Date(date || this.state.date) : new Date();\n\t\tif (!background) this.setState({ refreshing: true });\n\t\ttry {\n\t\t\tlet availableMonth = await appointmentService.getByMonth(date.getFullYear(), date.getMonth(), store._id);\n\t\t\tif (!edit)\n\t\t\t\tavailableMonth = availableMonth.filter(\n\t\t\t\t\t(avail) =>\n\t\t\t\t\t\t!avail.userId &&\n\t\t\t\t\t\tavail.status === 'ACTIVE' &&\n\t\t\t\t\t\t!moment(avail.startTime).isBefore(moment().tz('Europe/Paris'), 'day')\n\t\t\t\t);\n\n\t\t\tthis.setState({ availableMonth, date });\n\t\t} catch (err) {\n\t\t\tthis.handleError(err);\n\t\t}\n\t\tthis.setState({ refreshing: false });\n\t}\n\n\tupdateAvailabilities(availability) {\n\t\tlet { available, availableMonth } = this.state;\n\t\tavailable = available.map((avail) =>\n\t\t\tavail._id === availability._id ||\n\t\t\t(avail.startTime === availability.startTime && avail.endTime === availability.endTime)\n\t\t\t\t? availability\n\t\t\t\t: avail\n\t\t);\n\t\tavailableMonth = availableMonth.map((avail) =>\n\t\t\tavail._id === availability._id ||\n\t\t\t(avail.startTime === availability.startTime && avail.endTime === availability.endTime)\n\t\t\t\t? availability\n\t\t\t\t: avail\n\t\t);\n\t\tthis.setState({ available, selected: availability, availableMonth });\n\t}\n\tremoveAvailability(id) {\n\t\tlet { selected, available, availableMonth } = this.state;\n\t\tselected = {\n\t\t\t...selected,\n\t\t\tgenerated: true,\n\t\t\t_id: new Date(selected.startTime).getTime() + '-' + new Date(selected.endTime).getTime(),\n\t\t};\n\t\tavailable = available.map((avail) => (avail._id === id ? selected : avail));\n\t\tavailableMonth = availableMonth.filter((avail) => avail._id !== id);\n\t\tthis.setState({ available, selected, availableMonth });\n\t}\n\thandleCalendarChange(date) {\n\t\tthis.setState({ date });\n\t}\n\tasync handleDateChanged(newDate) {\n\n\t\tawait this.loadAppointments(newDate);\n\t\tthis.setState({ selected: undefined });\n\t\tif (this.props.onChange) this.props.onChange(newDate);\n\t}\n\thandleStartDateChange({ activeStartDate }) {\n\t\tthis.setState({ appointment: undefined });\n\t\tthis.loadAppointments(activeStartDate);\n\t}\n\tasync handleToggleAvailability(availability) {\n\t\tconst { edit, langCode } = this.props;\n\t\tconst { store } = this.state;\n\t\tif (!edit) return;\n\n\t\tthis.setState({ saving: true, updatingSlot: availability._id });\n\t\tif (!availability.userId) {\n\t\t\ttry {\n\t\t\t\tif (!availability.generated) {\n\t\t\t\t\tawait appointmentService.delete(availability._id);\n\t\t\t\t\tthis.removeAvailability(availability._id);\n\t\t\t\t} else {\n\t\t\t\t\tconst newAvailability = await appointmentService.add({\n\t\t\t\t\t\t...availability,\n\t\t\t\t\t\tlangCode,\n\t\t\t\t\t\t_id: undefined,\n\t\t\t\t\t\tstoreId: store._id,\n\t\t\t\t\t});\n\t\t\t\t\tthis.updateAvailabilities(newAvailability);\n\t\t\t\t}\n\t\t\t\tthis.loadAll(this.state.date, true);\n\t\t\t} catch (err) {\n\t\t\t\tthis.handleError(err);\n\t\t\t}\n\t\t} else {\n\t\t\ttry {\n\t\t\t\tconst appointment = await appointmentService.get(availability._id);\n\t\t\t\tthis.setState({ appointment });\n\t\t\t} catch (err) {\n\t\t\t\tthis.handleError(err);\n\t\t\t}\n\t\t}\n\t\tthis.setState({ saving: false, updatingSlot: undefined });\n\t}\n\n\tasync handleSelected(selected) {\n\n\t\tthis.setState({ selected, loadingAppointment: selected.userId }, async () => {\n\n\t\t\tif (selected.userId) {\n\t\t\t\ttry {\n\t\t\t\t\tselected.appointment = await appointmentService.get(selected._id);\n\n\t\t\t\t\tthis.setState({ selected, loadingAppointment: false }, () => {\n\t\t\t\t\t\tdocument.getElementById('ac-appointment').scrollIntoView();\n\t\t\t\t\t});\n\t\t\t\t} catch (err) {\n\t\t\t\t\tthis.setState({ loadingAppointment: false });\n\t\t\t\t\treturn this.handleError(err);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.props.onSelect) this.props.onSelect(selected);\n\t\t});\n\t}\n\thandleIsDateDisabled({ activeStartDate, date, view }) {\n\t\treturn false;\n\t\t/*\n        const {availableMonth} = this.state;\n        const {edit} = this.props;\n        if(edit) \n            return false;\n        const available = availableMonth.filter((avail)=> moment(avail.startTime).isSame(moment(date), 'day'))\n        return available.length === 0\n        */\n\t}\n\thandleIsDateAvailable({ activeStartDate, date, view }) {\n\t\tconst { availableMonth } = this.state;\n\t\tconst { edit } = this.props;\n\t\tlet available = availableMonth.filter((avail) => moment.tz(avail.startTime, 'Europe/Paris').isSame(date, 'day'));\n\t\tlet booked = available.filter((avail) => avail.status === 'BOOKED').length > 0;\n\t\t//if(available.length) console.log(date, available)\n\t\treturn available.length ? (booked ? 'ac-calendar-booked' : 'ac-calendar-active') : true;\n\t}\n\thandleTileContent({ date, view }) {}\n\tasync handleDeleteAppointment(id) {\n\t\tthis.setState({ saving: true });\n\t\ttry {\n\t\t\tawait appointmentService.delete(id);\n\t\t\tthis.setState({ appointment: undefined, selected: undefined });\n\t\t\tthis.loadAppointments(this.state.date, true);\n\t\t} catch (err) {\n\t\t\tthis.handleError(err);\n\t\t}\n\t\tthis.setState({ saving: false });\n\t}\n\tasync handleCancelAppointment(appointment) {\n\t\tthis.setState({ cancelling: true });\n\t\ttry {\n\t\t\tawait appointmentService.cancel(appointment.userId, appointment._id);\n\t\t\tthis.loadAppointments(this.state.date, true);\n\t\t} catch (err) {\n\t\t\tthis.handleError(err);\n\t\t}\n\t\tthis.setState({ cancelling: false });\n\t}\n\tasync handleStoreChange(opt) {\n\t\tconst { stores } = this.state;\n\t\tconst store = stores.filter((s) => s._id === opt.value)[0];\n\t\tawait this.setStateAsync({ store, selected: undefined });\n\t\tthis.loadAll();\n\t}\n\tgetMaxDate() {\n\t\tconst { edit } = this.props;\n\t\treturn edit\n\t\t\t? moment().tz('Europe/Paris').add('months', 12).toDate()\n\t\t\t: moment().tz('Europe/Paris').add('months', 2).toDate();\n\t}\n\tgetMinDate() {\n\t\tconst { edit } = this.props;\n\t\treturn edit ? moment().tz('Europe/Paris').subtract('months', 12).toDate() : new Date();\n\t}\n\thandleError(err) {\n\t\tconst error = err.response && err.response.data ? err.response.data.message : err.message || err.toString();\n\t\tthis.setState({ error });\n\t\tif (this.props.onError) this.props.onError(err);\n\t}\n\thandleCustomerSearch(customerSearchTerm) {\n\t\tthis.setState({ customerSearchTerm });\n\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (customerSearchTerm.length < 2) return resolve([]);\n\t\t\ttry {\n\t\t\t\tlet customerSearch = await userService.search(customerSearchTerm);\n\t\t\t\tcustomerSearch = customerSearch.map((c) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tlabel: c.firstName + ' ' + c.lastName + ' (' + c.email + ')',\n\t\t\t\t\t\tvalue: c._id,\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t\tresolve(customerSearch);\n\t\t\t\tthis.setState({ customerSearch });\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t}\n\thandleCustomerSearchSelected(customer, action) {\n\t\tthis.setState({ customer });\n\t}\n\tasync handleCustomerBooking(e) {\n\t\te.preventDefault();\n\n\t\tconst { customer, selected } = this.state;\n\n\t\tif (!customer) return this.handleError('Not a valid customer');\n\t\tif (!selected) return this.handleError('No appointment time selected');\n\n\t\tconst userId = customer.value;\n\t\tconst appointmentId = selected._id;\n\n\t\tthis.setState({ booking: true });\n\t\ttry {\n\t\t\tconst appointment = await appointmentService.bookInternal(userId, appointmentId);\n\t\t\tselected.appointment = appointment;\n\t\t\tthis.setState({ selected });\n\t\t\tawait this.loadAll();\n\t\t} catch (err) {\n\t\t\tthis.handleError(err);\n\t\t}\n\t\tthis.setState({ booking: false });\n\t}\n\trender() {\n\t\tconst {\n\t\t\tdict,\n\t\t\tdate,\n\t\t\tloading,\n\t\t\tloadingAppointment,\n\t\t\tupdatingSlot,\n\t\t\tsaving,\n\t\t\tcancelling,\n\t\t\trefreshing,\n\t\t\tavailable,\n\t\t\tavailableMonth,\n\t\t\tselected,\n\t\t\tstore,\n\t\t\tstores,\n\t\t\tcustomerSearch,\n\t\t\tcustomerSearchTerm,\n\t\t\tcustomer,\n\t\t\tbooking,\n\t\t} = this.state;\n\n\t\tconst { edit, langCode } = this.props;\n\t\tconst minDate = this.getMinDate();\n\t\tconst selectStyle = {\n\t\t\tvalueContainer: (provided, state) => {\n\t\t\t\treturn { ...provided, justifyContent: 'center', fontWeight: 'bold' };\n\t\t\t},\n\t\t};\n\n\t\tconst slots = available.map((a, idx) => {\n\t\t\tlet className;\n\t\t\tif (a.status === 'CANCELLED' && selected && selected._id === a._id) className = 'ac-slot-cancelled-selected';\n\t\t\telse if (a.status === 'CANCELLED') className = 'ac-slot-cancelled';\n\t\t\telse if (a.userId && selected && selected._id === a._id) className = 'ac-slot-booked-selected';\n\t\t\telse if (a.userId) className = 'ac-slot-booked';\n\t\t\telse if (selected && selected._id === a._id && !selected.generated) className = 'ac-slot-selected-active';\n\t\t\telse if (selected && selected._id === a._id && selected.generated) className = 'ac-slot-selected-deactivated';\n\t\t\telse if (!a.generated) className = 'ac-slot-available';\n\t\t\telse className = 'ac-slot';\n\n\t\t\treturn (\n\t\t\t\t<Hammer\n\t\t\t\t\tkey={'hmr-' + idx}\n\t\t\t\t\tonDoubleTap={() => this.handleToggleAvailability(a)}\n\t\t\t\t\tonTap={() => this.handleSelected(a)}\n\t\t\t\t>\n\t\t\t\t\t<div key={'appointment' + idx} className={className}>\n\t\t\t\t\t\t<div className='ac-slot-time'>\n\t\t\t\t\t\t\t{a.status === 'CANCELLED'\n\t\t\t\t\t\t\t\t? 'CANCELLED'\n\t\t\t\t\t\t\t\t: moment.tz(a.startTime, 'Europe/Paris').format('HH:mm') +\n\t\t\t\t\t\t\t\t  ' - ' +\n\t\t\t\t\t\t\t\t  moment.tz(a.endTime, 'Europe/Paris').format('HH:mm')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{updatingSlot === a._id && <Loader styles={{ backgroundColor: 'rgb(221, 221, 221)' }} type='fast' />}\n\t\t\t\t\t</div>\n\t\t\t\t</Hammer>\n\t\t\t);\n\t\t});\n\n\t\tif (loading) return <Loader />;\n\t\t\n\t\treturn (\n\t\t\t<div id='ac-wrap'>\n\t\t\t\t<div id='ac'>\n\t\t\t\t\t{store && stores && (\n\t\t\t\t\t\t<div id='ac-appointment-store'>\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tonChange={this.handleStoreChange}\n\t\t\t\t\t\t\t\tvalue={{\n\t\t\t\t\t\t\t\t\tvalue: store._id,\n\t\t\t\t\t\t\t\t\tlabel: store.name + ', ' + store.city + ' (' + store.postalCode + ')',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tmenuPlacement='bottom'\n\t\t\t\t\t\t\t\tisSearchable={false}\n\t\t\t\t\t\t\t\tstyles={selectStyle}\n\t\t\t\t\t\t\t\toptions={stores.map((store) => {\n\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\tvalue: store._id,\n\t\t\t\t\t\t\t\t\t\tlabel: store.name + ', ' + store.city + ' (' + store.postalCode + ')',\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<Calendar\n\t\t\t\t\t\tminDate={minDate}\n\t\t\t\t\t\t//maxDate={maxDate}\n\t\t\t\t\t\tmaxDetail={'month'}\n\t\t\t\t\t\tminDetail={'month'}\n\t\t\t\t\t\tlocale={langCode === 'fr' ? 'fr-FR' : 'en-EN'}\n\t\t\t\t\t\tonChange={this.handleDateChanged}\n\t\t\t\t\t\ttileDisabled={this.handleIsDateDisabled}\n\t\t\t\t\t\ttileClassName={(data) => this.handleIsDateAvailable(data)}\n\t\t\t\t\t\ttileContent={(data) => this.handleTileContent(data)}\n\t\t\t\t\t\tvalue={date}\n\t\t\t\t\t\tnext2Label={null}\n\t\t\t\t\t\tprev2Label={null}\n\t\t\t\t\t\tshowNeighboringMonth={false}\n\t\t\t\t\t\tonActiveStartDateChange={this.handleStartDateChange}\n\t\t\t\t\t/>\n\t\t\t\t\t<div id='ac-slots'>\n\t\t\t\t\t\t{date && available.length > 0 ? (\n\t\t\t\t\t\t\t<div id='ac-slots-wrap'>{slots}</div>\n\t\t\t\t\t\t) : availableMonth.length === 0 ? (\n\t\t\t\t\t\t\t<div id='ac-slots-empty'>{dict.noAppointmentsAvailableMonth}</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div id='ac-slots-empty'>{dict.noAppointmentsAvailable}</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{refreshing && <Loader />}\n\t\t\t\t\t</div>\n\t\t\t\t\t{edit && selected && (\n\t\t\t\t\t\t<div id='ac-appointment'>\n\t\t\t\t\t\t\t{loadingAppointment ? (\n\t\t\t\t\t\t\t\t<Loader overlay={true} />\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t<div id='ac-appointment-details'>\n\t\t\t\t\t\t\t\t\t\t<div id='ac-appointment-details-date-wrap'>\n\t\t\t\t\t\t\t\t\t\t\t<div id='ac-appointment-details-date'>\n\t\t\t\t\t\t\t\t\t\t\t\t{moment(selected.startTime).tz('Paris/Europe').format('HH:mm')} {dict.to}{' '}\n\t\t\t\t\t\t\t\t\t\t\t\t{moment(selected.endTime).tz('Europe/Paris').format('HH:mm')}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div id='ac-appointment-details-time'>\n\t\t\t\t\t\t\t\t\t\t\t\t{moment.tz(selected.startTime, 'Europe/Paris').format('dddd MMM Do')}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div id='ac-appointment-details-store'>\n\t\t\t\t\t\t\t\t\t\t\t\t{selected.store.name}, {selected.store.postalCode}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{selected.appointment && selected.appointment.user ? (\n\t\t\t\t\t\t\t\t\t\t\t<div id='ac-appointment-details-wrap'>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id='ac-appointment-details-name'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{selected.appointment.user.firstName} {selected.appointment.user.lastName}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t<div id='ac-appointment-details-email'>{selected.appointment.user.email}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id='ac-appointment-details-phone'>{selected.appointment.user.phone}</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<div id='ac-appointment-details-book'>\n\t\t\t\t\t\t\t\t\t\t\t\t<form id='ac-appointment-book-form' onSubmit={this.handleCustomerBooking}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<AsyncSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleCustomerSearchSelected}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Search customers...'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tloadOptions={this.handleCustomerSearch}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcacheOptions\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={customer}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tblurInputOnSelect={true}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button loading={booking} disabled={customer ? false : true}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tBOOK\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div id='ac-appointment-buttons'>\n\t\t\t\t\t\t\t\t\t\t{selected.appointment ? (\n\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button loading={cancelling} onClick={() => this.handleCancelAppointment(selected.appointment)}>\n\t\t\t\t\t\t\t\t\t\t\t\t\tCANCEL\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button loading={saving} onClick={() => this.handleDeleteAppointment(selected.appointment._id)}>\n\t\t\t\t\t\t\t\t\t\t\t\t\tDELETE\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href={'tel:' + (selected.appointment.user ? selected.appointment.user.phone : '')}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={selected.appointment.user && selected.appointment.user.phone ? false : true}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCALL\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t<a href={'mailto:' + selected.appointment.email}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button>E-MAIL</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button loading={saving} onClick={() => this.handleToggleAvailability(selected)}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{selected.generated ? 'ACTIVATE' : 'DE-ACTIVATE'}\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default AppointmentCalendar;\n","import React, { Component } from 'react';\nimport './Button.css';\nimport { RiLoader5Line } from 'react-icons/ri';\n\nclass Button extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\t}\n\thandleClick(e) {\n\t\tif (this.state.loading) return e.preventDefault();\n\t\tif (this.props.onClick) this.props.onClick(e);\n\t}\n\trender() {\n\t\tconst { type, style, disabled, loading, value } = this.props;\n\n\t\treturn (\n\t\t\t<button\n\t\t\t\tclassName={'button'}\n\t\t\t\tstyle={style || undefined}\n\t\t\t\ttype={type}\n\t\t\t\tdisabled={disabled || undefined}\n\t\t\t\tonClick={(e) => this.handleClick(e)}\n\t\t\t>\n\t\t\t\t{loading ? <RiLoader5Line className='button-loading' /> : this.props.children || value}\n\t\t\t</button>\n\t\t);\n\t}\n}\nexport default Button;\n","import { axios } from './';\n\nexport default {\n\tgetUser: async () => {\n\t\tlet res = await axios.get('/status');\n\t\treturn res.data;\n\t},\n\tlogin: async (email, password) => {\n\t\tlet res = await axios.post('/verification/login', { email, password });\n\t\treturn res.data;\n\t},\n\tlogout: async (email) => {\n\t\tlet res = await axios.post('/verification/logout', { email });\n\t\treturn res.data;\n\t},\n\tsignup: async (params) => {\n\t\tlet res = await axios.post('/verification/signup', params);\n\t\treturn res.data;\n\t},\n\tverify: async (tokenOrCode) => {\n\t\tlet res = await axios.get('/verification/verify/' + tokenOrCode);\n\t\treturn res.data;\n\t},\n\treverify: async (email) => {\n\t\tlet res = await axios.get('/verification/reverify/' + email);\n\t\treturn res.data;\n\t},\n\trequestPasswordReset: async (email) => {\n\t\tlet res = await axios.get('/verification/reset/' + email);\n\t\treturn res.data;\n\t},\n\tupdatePassword: async (token, password, password2) => {\n\t\tlet res = await axios.post('/verification/update', { token, password, password2 });\n\t\treturn res.data;\n\t},\n};\n","import axios from 'axios';\naxios.defaults.withCredentials = true;\nexport { axios };\n","import { axios } from './';\n\nexport default {\n\tget: async (id) => {\n\t\tlet res = await axios.get('/api/dictionary/id/' + id);\n\t\treturn res.data || {};\n\t},\n\tgetAll: async () => {\n\t\tlet res = await axios.get('/api/dictionary/all');\n\t\treturn res.data || [];\n\t},\n\tgetDictionary: async (langCode) => {\n\t\tlet res = await axios.get('/api/dictionary');\n\t\treturn res.data;\n\t},\n\tadd: async (term) => {\n\t\tlet res = await axios.post('/api/dictionary/', { term });\n\t\treturn res.data;\n\t},\n\tupdate: async (dict) => {\n\t\tlet res = await axios.patch('/api/dictionary/' + dict._id, dict);\n\t\treturn res.data;\n\t},\n\tupdateMany: async (dictionary) => {\n\t\tconst items = await axios.patch('/api/dictionary', dictionary);\n\t\treturn items;\n\t\t/*\n        const data = []\n        for (var i = 0; i < dictionary.length; i++){\n            const item = await axios.patch('/api/dictionary/' +dictionary[i]._id, dictionary[i])\n            data.push(item.data)\n        }\n        return data || []\n        */\n\t},\n\tdelete: async (id) => {\n\t\tlet res = await axios.delete('/api/dictionary/' + id);\n\t\treturn res.data;\n\t},\n\tdeleteAll: async () => {\n\t\tlet res = await axios.delete('/api/dictionary');\n\t\treturn res.data;\n\t},\n};\n","import React, { Component } from 'react';\nimport './index.css';\nimport AppointmentCalendar from '../util/AppointmentCalendar';\n\nclass AppointmentDate extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\t...props,\n\t\t};\n\t}\n\tcomponentDidMount() {}\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\n\t\treturn nextProps;\n\t}\n\n\trender() {\n\t\tconst { dict, langCode, date, selected } = this.state;\n\n\t\treturn (\n\t\t\t<div id='appointment-select'>\n\t\t\t\t<div id='appointment-calendar'>\n\t\t\t\t\t<AppointmentCalendar\n\t\t\t\t\t\tkey='appointment-calendar'\n\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\tlangCode={langCode}\n\t\t\t\t\t\tedit={false}\n\t\t\t\t\t\tdate={date}\n\t\t\t\t\t\tselected={selected}\n\t\t\t\t\t\tonChange={this.props.onDateChange}\n\t\t\t\t\t\tonSelect={this.props.onSelectAvailable}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default AppointmentDate;\n","import React, { Component } from 'react';\nimport './index.css';\n\nimport Verification from '../verification';\n\nclass AppointmentVerification extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {};\n\t}\n\tasync componentDidMount() {}\n\trender() {\n\t\tconst { type } = this.props;\n\t\treturn (\n\t\t\t<div id='appointment-verification'>\n\t\t\t\t<Verification type={type} noBackground={true} noLogo={true} onLogin={this.props.onLogin} />\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default AppointmentVerification;\n","import React, { Component } from 'react';\nimport './index.css';\nimport logo from '../../images/cm_logo_black_128px.png';\nimport moment from 'moment';\n\nconst formatAvailability = (availability, dict) => {\n\treturn (\n\t\t<div>\n\t\t\t{moment(availability.startTime).format('dddd MMMM Do')}\n\t\t\t<br />\n\t\t\t{moment(availability.startTime).format('HH:mm')} {dict.to} {moment(availability.endTime).format('HH:mm')}\n\t\t</div>\n\t);\n};\nclass AppointmentBook extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {};\n\t}\n\tasync componentDidMount() {}\n\trender() {\n\t\tconst { dict, selected, user } = this.props;\n\n\t\tconst { store } = selected;\n\n\t\treturn (\n\t\t\t<div id='appointment-book'>\n\t\t\t\t<div id='appointment-book-wrap'>\n\t\t\t\t\t<div id=\"appointment-your\">Your appointment</div>\n\t\t\t\t\t<br/>\n\t\t\t\t\t<div id='appointment-book-time'>{formatAvailability(selected, dict)}</div>\n\t\t\t\t\t<div>@</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{store.name}\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t{store.address}\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t{store.postalCode}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<img id={'appointment-logo'} src={logo} alt='Chinemachine' />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id='appointment-book-now'>{dict.bookThisAppointment}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default AppointmentBook;\n","import React, { Component } from 'react';\nimport './index.css';\nimport moment from 'moment';\n\nconst formatAvailability = (availability, dict) => {\n\tmoment.locale(dict._langCode);\n\treturn (\n\t\t<div>\n\t\t\t{moment(availability.startTime).format('dddd MMMM Do')}\n\t\t\t<br />\n\t\t\t{moment(availability.startTime).format('HH:mm')} {dict.to} {moment(availability.endTime).format('HH:mm')}\n\t\t</div>\n\t);\n};\nclass AppointmentConfirmation extends Component {\n\trender() {\n\t\tconst { dict, appointment } = this.props;\n\n\t\treturn (\n\t\t\t<div id='appointment-finished'>\n\t\t\t\t<div id='appointment-confirmation'>\n\t\t\t\t\t<div id='appointment-form-time'>\n\t\t\t\t\t\t<span id='appointment-confirmation-thanks'>{dict.thanksBooking}</span>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<span id='appointment-confirmation-bookedfor'>{dict.appointmentBookedFor}</span>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t{formatAvailability(appointment, dict)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id='appointment-form-store'>\n\t\t\t\t\t\t@<br />\n\t\t\t\t\t\t{appointment.store.name}\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t{appointment.store.address}\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t{appointment.store.postalCode}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id='appointment-goto-account'>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t{dict.gotoAccount} <a href='/account'>account</a>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default AppointmentConfirmation;\n","import React, { Component } from 'react';\nimport './index.css';\nimport Button from '../util/Button';\nimport moment from 'moment';\n\nclass AppointmentNav extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {};\n\t}\n\tasync componentDidMount() {}\n\trender() {\n\t\tconst { selected, dict, prev, book, next } = this.props;\n\n\t\treturn (\n\t\t\t<div id='appointment-bottom'>\n\t\t\t\t{!book && selected && (\n\t\t\t\t\t<div id='appointment-booking-time'>\n\t\t\t\t\t\t<div id='appointment-booking-time-header'>\n\t\t\t\t\t\t\t<div id='appointment-booking-time-date'>\n\t\t\t\t\t\t\t\t{moment(selected.startTime).format('dddd MMMM Do')}\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t{moment(selected.startTime).format('HH:mm')} to {moment(selected.endTime).format('HH:mm')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{selected && (\n\t\t\t\t\t<div id='appointment-bottom-buttons'>\n\t\t\t\t\t\t<Button className={'appointment-button'} onClick={() => this.props.onPrev()} disabled={!prev}>\n\t\t\t\t\t\t\t{dict.back}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{next !== undefined && (\n\t\t\t\t\t\t\t<Button className={'appointment-button'} onClick={() => this.props.onNext()} disabled={!next}>\n\t\t\t\t\t\t\t\t{dict.next}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{book && (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tstyle={{ backgroundColor: 'rgb(5, 155, 29)', color: '#fff' }}\n\t\t\t\t\t\t\t\tonClick={() => this.props.onBookAppointment()}\n\t\t\t\t\t\t\t\tdisabled={false}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{dict.confirm}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default AppointmentNav;\n","import React, { Component } from 'react';\nimport './index.css';\nimport logo from '../../images/cm_logo_white_128px.png';\nimport Loader from '../util/Loader';\nimport Button from '../util/Button';\nimport AppointmentDate from './AppointmentDate';\nimport AppointmentVerification from './AppointmentVerification';\nimport AppointmentBook from './AppointmentBook';\nimport AppointmentConfirmation from './AppointmentConfirmation';\nimport AppointmentNav from './AppointmentNav';\nimport dictionaryService from '../../services/dictionaryService';\nimport appointmentService from '../../services/appointmentService';\n\nconst VIEWS = ['date', 'verification', 'book', 'confirmation'];\nconst defaultState = {\n\tdict: undefined,\n\tloading: true,\n\tsaving: false,\n\tdone: false,\n\tdate: new Date(),\n\tprev: undefined,\n\tnext: undefined,\n\tavailable: [],\n\tselected: undefined,\n\tappointment: undefined,\n\tview: VIEWS[0],\n\tviews: VIEWS,\n\tviewIndex: 0,\n\tnextView: 'verification',\n\tstore: undefined,\n\tlangCode: 'en',\n\tuser: undefined,\n};\nclass Appointment extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\t...defaultState,\n\t\t};\n\n\t\tthis.handleSelectAvailable = this.handleSelectAvailable.bind(this);\n\t\tthis.handleLogin = this.handleLogin.bind(this);\n\t\tthis.handleBookAppointment = this.handleBookAppointment.bind(this);\n\t\tthis.handleRefresh = this.handleRefresh.bind(this);\n\t\tthis.handleDateChange = this.handleDateChange.bind(this);\n\t\tthis.handleCloseError = this.handleCloseError.bind(this);\n\t\tthis.handlePrev = this.handlePrev.bind(this);\n\t\tthis.handleNext = this.handleNext.bind(this);\n\t}\n\tasync componentDidMount() {\n\t\tdocument.title = 'Chinemachine / Appointment';\n\t\tthis.setState({ loading: true });\n\t\ttry {\n\t\t\tconst dict = await dictionaryService.getDictionary();\n\n\t\t\tthis.setState({ dict, langCode: dict._langCode });\n\t\t\tawait this.loadAppointAvailabilities();\n\t\t} catch (err) {\n\t\t\tthis.handleError(err);\n\t\t}\n\t\tthis.setState({ loading: false });\n\t}\n\tasync loadAppointAvailabilities() {\n\t\tconsole.log('load availabilities');\n\t\t//this.setState({loading:true})\n\t\ttry {\n\t\t\tconst { date } = this.state;\n\t\t\tconst available = await appointmentService.getByMonth(date.getFullYear(), date.getMonth());\n\t\t\tthis.setState({ available });\n\t\t} catch (err) {\n\t\t\tthis.handleError(err);\n\t\t}\n\t\t//this.setState({loading:false})\n\t}\n\n\thandleSelectAvailable(selected) {\n\t\tthis.setState({ selected }, () => this.handleView('date'));\n\t}\n\tasync handleBookAppointment() {\n\t\tconst { selected, user } = this.state;\n\t\tif (!selected || !user) return this.handleError('Not valid appointment!');\n\n\t\tthis.setState({ saving: true });\n\n\t\ttry {\n\t\t\tconst appointment = await appointmentService.book(user._id, selected._id);\n\t\t\tappointment.user = user;\n\t\t\tthis.setState({ appointment }, () => this.handleView('confirmation'));\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t\tthis.handleError(err);\n\t\t}\n\n\t\tthis.setState({ saving: false });\n\t}\n\tvalidateBooking() {\n\t\treturn true;\n\t}\n\thandleLogin(user) {\n\t\tconsole.log('handle login......', user);\n\t\tconst { appointment } = this.state;\n\t\tif (appointment) appointment.user = user;\n\t\tthis.setState({ user, appointment }, () => {\n\t\t\tthis.handleView('book');\n\t\t});\n\t}\n\thandleView(view) {\n\t\tconsole.log('handle view', view);\n\t\tconst { selected, user } = this.state;\n\t\tif (view === 'date') this.setState({ prev: undefined, next: selected ? true : false });\n\t\telse if (view === 'verification') this.setState({ prev: true, next: user ? true : false });\n\t\telse if (view === 'book') this.setState({ prev: true, next: undefined });\n\t\telse if (view === 'confirmation') this.setState({ prev: undefined, next: undefined });\n\n\t\tthis.setState({ view });\n\t}\n\thandlePrev() {\n\t\tlet { viewIndex } = this.state;\n\t\tconst newViewIndex = --viewIndex;\n\t\tthis.setState({ viewIndex: newViewIndex }, () => {\n\t\t\tthis.handleView(VIEWS[newViewIndex]);\n\t\t});\n\t}\n\thandleNext() {\n\t\tlet { view, viewIndex, selected, user } = this.state;\n\t\tconst newViewIndex = ++viewIndex;\n\n\t\tif (view === 'date' && !selected) return;\n\t\telse if (view === 'verification' && !user) return;\n\t\telse if (view === 'book' && (!selected || user)) return;\n\t\telse if (view === 'confirmation') return;\n\n\t\tthis.setState({ viewIndex: newViewIndex }, () => {\n\t\t\tthis.handleView(VIEWS[newViewIndex]);\n\t\t});\n\t}\n\thandleDateChange(date) {\n\t\tthis.setState({ date });\n\t}\n\thandleError(err) {\n\t\tconsole.log(err);\n\t\tconst error = err.response && err.response.data ? err.response.data.message : err.message || err.toString() || err;\n\t\tthis.setState({ error: error || 'Unknown error' });\n\t}\n\thandleCloseError() {\n\t\tthis.setState({ error: undefined });\n\t}\n\thandleRefresh() {\n\t\tconst { date } = this.state;\n\t\tthis.setState({ ...defaultState, date }, () => this.componentDidMount());\n\t}\n\trender() {\n\t\tconst { date, loading, saving, selected, appointment, view, prev, next, user, error, dict, langCode } = this.state;\n\t\tconsole.log(selected);\n\n\t\tif (loading) return <Loader />;\n\n\t\treturn (\n\t\t\t<div id='appointment'>\n\t\t\t\t<div id='appointment-header'>\n\t\t\t\t\t<div id='appointment-header-logo-wrap'>\n\t\t\t\t\t\t<a href='/'>\n\t\t\t\t\t\t\t<img src={logo} alt='Chinemachine' id='appointment-header-logo' />\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<h2>{dict.bookAppointment}</h2>\n\t\t\t\t</div>\n\t\t\t\t<div id='appointment-border'></div>\n\t\t\t\t<div id='appointment-content-wrap'>\n\t\t\t\t\t<div id='appointment-content'>\n\t\t\t\t\t\t{view === 'date' ? (\n\t\t\t\t\t\t\t<AppointmentDate\n\t\t\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\t\t\tlangCode={langCode}\n\t\t\t\t\t\t\t\tdate={date}\n\t\t\t\t\t\t\t\tselected={selected}\n\t\t\t\t\t\t\t\tonDateChange={this.handleDateChange}\n\t\t\t\t\t\t\t\tonSelectAvailable={this.handleSelectAvailable}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : view === 'verification' ? (\n\t\t\t\t\t\t\t<AppointmentVerification type='login' onLogin={this.handleLogin} />\n\t\t\t\t\t\t) : view === 'book' ? (\n\t\t\t\t\t\t\t<AppointmentBook selected={selected} dict={dict} user={user} />\n\t\t\t\t\t\t) : view === 'confirmation' ? (\n\t\t\t\t\t\t\t<AppointmentConfirmation dict={dict} appointment={appointment} />\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{view !== 'confirmation' && (\n\t\t\t\t\t\t\t<AppointmentNav\n\t\t\t\t\t\t\t\tselected={selected}\n\t\t\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\t\t\tprev={prev}\n\t\t\t\t\t\t\t\tnext={next}\n\t\t\t\t\t\t\t\tbook={view === 'book'}\n\t\t\t\t\t\t\t\tonPrev={this.handlePrev}\n\t\t\t\t\t\t\t\tonNext={this.handleNext}\n\t\t\t\t\t\t\t\tonBookAppointment={this.handleBookAppointment}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{loading && <Loader />}\n\t\t\t\t\t\t{saving && <Loader message={dict.savingApointment} />}\n\t\t\t\t\t\t{error && (\n\t\t\t\t\t\t\t<div id='appointment-error-wrap'>\n\t\t\t\t\t\t\t\t<div id='appointment-error'>\n\t\t\t\t\t\t\t\t\t<div id='appointment-error-header'>Oh no...</div>\n\t\t\t\t\t\t\t\t\t<div id='appointment-error-message'>{error}</div>\n\t\t\t\t\t\t\t\t\t<div id='appointment-error-close'>\n\t\t\t\t\t\t\t\t\t\t<Button className={'appointment-button'} type='button' onClick={this.handleCloseError}>\n\t\t\t\t\t\t\t\t\t\t\t{dict.back}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default Appointment;\n","import { axios } from './';\n\nexport default {\n\tget: async (userId) => {\n\t\tlet res = await axios.get('/api/user/' + userId);\n\t\treturn res.data;\n\t},\n\tgetAll: async () => {\n\t\tlet res = await axios.get('/api/user');\n\t\treturn res.data || [];\n\t},\n\tgetAppointments: async () => {\n\t\tlet res = await axios.get('/api/user/appointmens/all');\n\t\treturn res.data || [];\n\t},\n\tadd: async (params) => {\n\t\tlet res = await axios.post('/api/user', params);\n\t\treturn res.data;\n\t},\n\tupdate: async (id, params) => {\n\t\tlet res = await axios.patch('/api/user/' + id, params);\n\t\treturn res.data;\n\t},\n\tdelete: async (id) => {\n\t\tlet res = await axios.delete('/api/user/' + id);\n\t\treturn res.data;\n\t},\n\tdeleteAll: async () => {\n\t\tlet res = await axios.delete('/api/user');\n\t\treturn res.data;\n\t},\n\tsearch: async (term) => {\n\t\tlet res = await axios.get('/api/user/util/search/' + term);\n\t\treturn res.data || [];\n\t},\n};\n","import { axios } from './';\n\nexport default {\n\tget: async (id) => {\n\t\tlet res = await axios.get('/api/appointment/' + id);\n\t\treturn res.data;\n\t},\n\tgetAll: async () => {\n\t\tlet res = await axios.get('/api/appointment');\n\t\treturn res.data || [];\n\t},\n\tgetByDate: async (year, month, date, storeId) => {\n\t\tconst path =\n\t\t\t'/api/appointment/' +\n\t\t\tyear +\n\t\t\t(month !== undefined ? '/' + month : '') +\n\t\t\t(month !== undefined && date ? '/' + date : '') +\n\t\t\t(storeId ? '/store/' + storeId : '');\n\t\tlet res = await axios.get(path);\n\t\treturn res.data || [];\n\t},\n\tgetByMonth: async (year, month, storeId) => {\n\t\tlet res = await axios.get('/api/appointment/' + year + '/' + month + (storeId ? '/store/' + storeId : ''));\n\t\treturn res.data || [];\n\t},\n\tgetAllByMonth: async (year, month) => {\n\t\tlet res = await axios.get('/api/appointment/' + year + '/' + month);\n\t\treturn res.data || [];\n\t},\n\tgetAllByWeek: async (year, week) => {\n\t\tlet res = await axios.get('/api/appointment/util/byweek/' + year + '/' + week);\n\t\treturn res.data || [];\n\t},\n\tgetAllByUser: async (userId) => {\n\t\tlet res = await axios.get('/api/appointment/user/' + userId);\n\t\treturn res.data || [];\n\t},\n\tgetData: async (sectionId, langCode) => {\n\t\tlet res = await axios.get('/api/appointment/' + sectionId + '/' + langCode);\n\t\treturn res.data || {};\n\t},\n\tadd: async (params) => {\n\t\tlet res = await axios.post('/api/appointment', params);\n\t\treturn res.data;\n\t},\n\tupdate: async (id, appointment) => {\n\t\tlet res = await axios.patch('/api/appointment/' + id, appointment);\n\t\treturn res.data;\n\t},\n\tdelete: async (sectionId) => {\n\t\tlet res = await axios.delete('/api/appointment/' + sectionId);\n\t\treturn res.data;\n\t},\n\tdeleteAll: async () => {\n\t\tlet res = await axios.delete('/api/appointment');\n\t\treturn res.data;\n\t},\n\tcancel: async (userId, appointmentId) => {\n\t\tlet res = await axios.post('/api/appointment/user/' + userId + '/appointment/' + appointmentId + '/cancel');\n\t\treturn res.data;\n\t},\n\tbook: async (userId, appointmentId) => {\n\t\tlet res = await axios.post('/api/appointment/user/' + userId + '/appointment/' + appointmentId + '/book');\n\t\treturn res.data;\n\t},\n\tbookInternal: async (userId, appointmentId) => {\n\t\tlet res = await axios.post('/api/appointment/user/' + userId + '/appointment/' + appointmentId + '/bookinternal');\n\t\treturn res.data;\n\t},\n};\n"],"sourceRoot":""}