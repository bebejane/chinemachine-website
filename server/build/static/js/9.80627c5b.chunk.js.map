{"version":3,"sources":["services/storeService.js","components/verification/Container.js","components/verification/Login.js","components/verification/Logout.js","components/verification/Signup.js","components/verification/Reset.js","components/verification/Update.js","components/verification/Verify.js","components/verification/ReCode.js","components/verification/index.js","components/util/AppointmentCalendar.js","components/util/Button.js","services/verificationService.js","services/index.js","services/dictionaryService.js","components/util/NoAppointments.js","components/appointment/AppointmentDate.js","components/appointment/AppointmentVerification.js","components/appointment/AppointmentBook.js","components/appointment/AppointmentConfirmation.js","components/appointment/AppointmentNav.js","components/appointment/index.js","services/userService.js","services/appointmentService.js"],"names":["get","storeId","axios","res","data","getAll","add","params","post","update","id","patch","delete","deleteAll","i","Container","props","state","dict","redirect","loading","error","undefined","form","this","setState","dictionaryService","getDictionary","verificationService","getUser","user","console","log","onError","logout","onChange","header","children","type","noLogo","nav","onClick","login","signup","Loader","href","alt","src","logo","Component","Login","loggingIn","email","password","handleSubmit","bind","handleFormChange","handleLogout","handleLogin","e","target","value","preventDefault","onSubmit","setTimeout","onLogin","Fragment","name","autoFocus","placeholder","Button","className","message","youAreLoggedIn","Logout","onLogout","loggingOut","Signup","isSignedUp","signingUp","token","firstName","lastName","email2","phone","password2","loadDictionary","handleSignUp","onSignUp","autoComplete","reType","defaultCountry","val","handlePhoneChange","Reset","resetting","success","requestPasswordReset","checkEmailForPasswordResetLink","fillInEmailPasswordReset","Update","updating","newpassword","newpassword2","updatePassword","yourPasswordWasReset","newPassword","send","Verify","verified","verifying","code","formRef","React","createRef","verify","accountIsVerified","onVerification","checkEmailToVerifyAccount","ref","securityCode","ReCode","resent","resending","reverify","onReCode","enterEmailForCode","reSendingVerificationCode","Verification","searchParams","URLSearchParams","location","search","pathname","replace","noBackground","types","reset","recode","resetPassword","changePassword","verifyAccount","err","response","toString","document","title","component","handleShowType","history","push","style","background","key","handleError","onUpdated","handleUpdated","handleVerification","forgotPassword","createAvailableTime","year","month","day","hour","minute","store","startTime","moment","tz","format","unix","endTime","_id","generated","generateAvailable","date","available","h","m","getFullYear","getMonth","getDate","Math","floor","AppointmentCalendar","Date","selected","availability","loadingAppointment","saving","cancelling","refreshing","done","calendarDate","stores","avail","availableMonth","appointment","updatingSlot","customerSearchTerm","customerSearch","customer","booking","handleCalendarChange","handleDateChanged","handleIsDateDisabled","handleDeleteAppointment","handleIsDateAvailable","handleStartDateChange","handleStoreChange","handleCustomerSearch","handleCustomerSearchSelected","handleCustomerBooking","refreshInterval","langCode","storeService","length","setStateAsync","loadAll","setInterval","Promise","resolve","loadAppointmentsByMonth","loadAppointments","clearInterval","edit","appointmentService","getByDate","map","idx","filter","a","userId","status","isBefore","getByMonth","getTime","newDate","activeStartDate","removeAvailability","newAvailability","updateAvailabilities","getElementById","scrollIntoView","onSelect","view","isSame","booked","cancel","opt","s","toDate","subtract","reject","userService","c","label","action","appointmentId","bookInternal","minDate","getMinDate","selectStyle","valueContainer","provided","justifyContent","fontWeight","slots","onDoubleTap","handleToggleAvailability","onTap","handleSelected","styles","backgroundColor","city","postalCode","menuPlacement","isSearchable","options","maxDetail","minDetail","locale","tileDisabled","tileClassName","tileContent","handleTileContent","next2Label","prev2Label","showNeighboringMonth","onActiveStartDateChange","noAppointmentsAvailableMonth","noAppointmentsAvailable","overlay","to","loadOptions","cacheOptions","blurInputOnSelect","disabled","handleCancelAppointment","handleClick","tokenOrCode","defaults","withCredentials","term","updateMany","dictionary","items","NoAppointments","noAppointments","AppointmentDate","onDateChange","onSelectAvailable","nextProps","prevState","AppointmentVerification","AppointmentBook","formatAvailability","address","bookThisAppointment","AppointmentConfirmation","thanksBooking","appointmentBookedFor","_langCode","gotoAccount","AppointmentNav","prev","book","next","onPrev","back","onNext","color","onBookAppointment","confirm","VIEWS","defaultState","views","viewIndex","activeCount","nextView","Appointment","handleSelectAvailable","handleBookAppointment","handleRefresh","handleDateChange","handleCloseError","handlePrev","handleNext","getActiveCount","loadAppointAvailabilities","handleView","newViewIndex","componentDidMount","bookAppointment","savingApointment","getAppointments","path","getAllByMonth","getAllByWeek","week","getAllByUser","getData","sectionId"],"mappings":"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","file":"static/js/9.80627c5b.chunk.js","sourcesContent":["import { axios } from './';\n\nexport default {\n\tget: async (storeId) => {\n\t\tlet res = await axios.get('/api/store/' + storeId);\n\t\treturn res.data;\n\t},\n\tgetAll: async () => {\n\t\tlet res = await axios.get('/api/store');\n\t\treturn res.data || [];\n\t},\n\tadd: async (params) => {\n\t\tlet res = await axios.post('/api/store', params);\n\t\treturn res.data;\n\t},\n\tupdate: async (id, params) => {\n\t\tlet res = await axios.patch('/api/store/' + id, params);\n\t\treturn res.data;\n\t},\n\tdelete: async (storeId) => {\n\t\tlet res = await axios.delete('/api/store/' + storeId);\n\t\treturn res.data;\n\t},\n\tdeleteAll: async () => {\n\t\tlet res = await axios.delete('/api/store');\n\t\treturn res.data;\n\t},\n};\n","import React, { Component } from 'react';\nimport './Container.css';\nimport logo from '../../images/cm_logo_white_128px.png';\nimport verificationService from '../../services/verificationService';\nimport dictionaryService from '../../services/dictionaryService';\nimport Loader from '../util/Loader';\n\nclass Container extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdict: {},\n\t\t\tredirect: props.redirect,\n\t\t\tloading: true,\n\t\t\terror: undefined,\n\t\t\tform: {},\n\t\t};\n\t}\n\tasync componentDidMount() {\n\t\tthis.setState({ loading: true });\n\n\t\ttry {\n\t\t\tconst dict = await dictionaryService.getDictionary('en');\n\t\t\tthis.setState({ dict });\n\t\t} catch (err) {}\n\n\t\ttry {\n\t\t\tconst user = await verificationService.getUser();\n\n\t\t\tif (user) this.setState({ user });\n\t\t\telse console.log('user not logged in');\n\t\t} catch (err) {\n\t\t\tthis.setState({ getUser: false });\n\t\t}\n\t\tthis.setState({ loading: false });\n\t}\n\tasync loadDictionary() {\n\t\ttry {\n\t\t\tconst dict = await dictionaryService.getDictionary('en');\n\t\t\tthis.setState({ dict });\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\tasync handleLogout() {\n\t\ttry {\n\t\t\tawait verificationService.logout();\n\t\t\tthis.props.onChange('login');\n\t\t\tthis.setState({ user: undefined });\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\trender() {\n\t\tconst { loading } = this.state;\n\t\tconst { header, children, type, error, noLogo, dict } = this.props;\n\t\tconst nav =\n\t\t\ttype !== 'login' ? (\n\t\t\t\t<div id='container-logout' onClick={() => this.props.onChange('login')}>\n\t\t\t\t\t{dict.login}\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<div id='container-signup' onClick={() => this.props.onChange('signup')}>\n\t\t\t\t\t{dict.signup}\n\t\t\t\t</div>\n\t\t\t);\n\n\t\tif (loading) return <Loader />;\n\n\t\treturn (\n\t\t\t<div id='container-wrapper'>\n\t\t\t\t<div id='container-top'>\n\t\t\t\t\t<div id='container-spacer'></div>\n\t\t\t\t\t{nav}\n\t\t\t\t</div>\n\t\t\t\t<div id='container-header-border'></div>\n\t\t\t\t<div id='container-header'>\n\t\t\t\t\t{header}\n\t\t\t\t\t<div id='container-header-logo-wrap'>\n\t\t\t\t\t\t{!noLogo && (\n\t\t\t\t\t\t\t<a href='/'>\n\t\t\t\t\t\t\t\t<img alt='Chinemachine' src={logo} id='container-header-logo' />\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div id='container-content'>{children}</div>\n\t\t\t\t{error && <div id='container-error'>{error}</div>}\n\t\t\t\t{loading && <Loader />}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Container;\n","import React, { Component } from 'react';\nimport './Login.css';\nimport verificationService from '../../services/verificationService';\nimport dictionaryService from '../../services/dictionaryService';\nimport Loader from '../util/Loader';\nimport Button from '../util/Button';\n\nclass Login extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdict: {},\n\t\t\tredirect: props.redirect,\n\t\t\tloading: true,\n\t\t\tgetUser: false,\n\t\t\tloggingIn: false,\n\t\t\terror: undefined,\n\t\t\tuser: undefined,\n\t\t\tform: {\n\t\t\t\temail: '',\n\t\t\t\tpassword: '',\n\t\t\t},\n\t\t};\n\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t\tthis.handleFormChange = this.handleFormChange.bind(this);\n\t\tthis.handleLogout = this.handleLogout.bind(this);\n\t}\n\tasync componentDidMount() {\n\t\tthis.setState({ loading: true });\n\n\t\ttry {\n\t\t\tconst dict = await dictionaryService.getDictionary('en');\n\t\t\tthis.setState({ dict });\n\t\t} catch (err) {}\n\n\t\ttry {\n\t\t\tconst user = await verificationService.getUser();\n\t\t\tif (user) {\n\t\t\t\tconsole.log('user already logged in');\n\t\t\t\tthis.setState({ getUser: true, user }, () => {\n\t\t\t\t\tthis.handleLogin(user);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.log('user not logged in');\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tthis.setState({ getUser: false });\n\t\t}\n\t\tthis.setState({ loading: false });\n\t}\n\tcomponentWillUnmount() {}\n\tasync loadDictionary() {\n\t\ttry {\n\t\t\tconst dict = await dictionaryService.getDictionary('en');\n\t\t\tthis.setState({ dict });\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\n\thandleFormChange(e) {\n\t\tconst form = this.state.form;\n\t\tform[e.target.id] = e.target.value;\n\t\tthis.setState({ form });\n\t}\n\tasync handleSubmit(e) {\n\t\te.preventDefault();\n\t\tconst { form } = this.state;\n\t\tthis.setState({ error: undefined, loggingIn: true });\n\t\ttry {\n\t\t\tthis.props.onSubmit();\n\t\t\tconst user = await verificationService.login(form.email, form.password);\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.setState({ user, loggingIn: false, getUser: true }, () => this.handleLogin(user));\n\t\t\t}, 500);\n\t\t} catch (err) {\n\t\t\tthis.setState({ loggingIn: false });\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\thandleLogin(user) {\n\t\tif (this.props.onLogin) this.props.onLogin(user || this.state.user);\n\t}\n\tasync handleLogout() {\n\t\ttry {\n\t\t\tawait verificationService.logout();\n\t\t\tthis.setState({ getUser: false });\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\trender() {\n\t\tconst { form, loading, loggingIn, getUser } = this.state;\n\t\tconst { dict } = this.props;\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<form onSubmit={this.handleSubmit}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid='email'\n\t\t\t\t\t\tname='email'\n\t\t\t\t\t\tautoFocus={false}\n\t\t\t\t\t\tplaceholder={dict.email + '...'}\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tvalue={form.email}\n\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid='password'\n\t\t\t\t\t\tname='password'\n\t\t\t\t\t\tplaceholder={dict.password + '...'}\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\tvalue={form.password}\n\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button className='button-wide' type='submit' loading={loggingIn}>\n\t\t\t\t\t\tOkey\n\t\t\t\t\t</Button>\n\t\t\t\t</form>\n\t\t\t\t{loggingIn && <Loader message={dict.loggingIn} />}\n\t\t\t\t{getUser && (\n\t\t\t\t\t<div id='login-loggedin'>\n\t\t\t\t\t\t<div id='login-loggedin-message'>{dict.youAreLoggedIn}</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{loading && <Loader />}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default Login;\n","import React, { Component } from 'react';\nimport './Logout.css';\nimport verificationService from '../../services/verificationService';\nimport Loader from '../util/Loader';\n\nclass Logout extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tloading: true,\n\t\t\terror: undefined,\n\t\t};\n\t}\n\tasync componentDidMount() {\n\t\ttry {\n\t\t\tthis.props.onSubmit();\n\t\t\tawait verificationService.logout();\n\t\t\tthis.setState({ loading: false });\n\t\t\tthis.props.onLogout();\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\trender() {\n\t\tconst { loading } = this.state;\n\t\tconst { dict } = this.props;\n\t\tif (loading) return <Loader message={dict.loggingOut + '...'} />;\n\t\treturn <div>{dict.youAreLoggedIn}</div>;\n\t}\n}\n\nexport default Logout;\n","import React, { Component } from 'react';\nimport './Signup.css';\nimport 'react-phone-number-input/style.css';\nimport PhoneInput from 'react-phone-number-input';\nimport verificationService from '../../services/verificationService';\nimport dictionaryService from '../../services/dictionaryService';\nimport Loader from '../util/Loader';\nimport Button from '../util/Button';\n\nclass Signup extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdict: {},\n\t\t\tisSignedUp: false,\n\t\t\tloading: false,\n\t\t\tsigningUp: false,\n\t\t\terror: undefined,\n\t\t\ttoken: props.token,\n\t\t\tform: {\n\t\t\t\tfirstName: '',\n\t\t\t\tlastName: '',\n\t\t\t\temail: '',\n\t\t\t\temail2: '',\n\t\t\t\tphone: '',\n\t\t\t\tpassword: '',\n\t\t\t\tpassword2: '',\n\t\t\t},\n\t\t};\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t\tthis.handleFormChange = this.handleFormChange.bind(this);\n\t}\n\tcomponentDidMount() {\n\t\tthis.loadDictionary();\n\t}\n\tasync loadDictionary() {\n\t\ttry {\n\t\t\tconst dict = await dictionaryService.getDictionary('en');\n\t\t\tthis.setState({ dict });\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\thandleFormChange(e) {\n\t\tconst form = this.state.form;\n\t\tform[e.target.id] = e.target.value;\n\t\tthis.setState({ form });\n\t}\n\thandlePhoneChange(value) {\n\t\tconst form = this.state.form;\n\t\tform.phone = value;\n\t\tthis.setState({ form });\n\t}\n\tasync handleSubmit(e) {\n\t\tconsole.log('saving signup');\n\t\te.preventDefault();\n\t\tconst { form } = this.state;\n\t\tthis.setState({ signingUp: true, error: undefined });\n\t\ttry {\n\t\t\tconsole.log('signing up no...');\n\t\t\tthis.props.onSubmit();\n\t\t\tconst user = await verificationService.signup(form);\n\t\t\tconsole.log('SIGNED UP');\n\t\t\tthis.setState({ user }, () => this.handleSignUp(user));\n\t\t} catch (err) {\n\t\t\tconsole.log('was errors');\n\t\t\tthis.props.onError(err);\n\t\t}\n\t\tsetTimeout(() => {\n\t\t\tthis.setState({ signingUp: false });\n\t\t}, 300);\n\t}\n\thandleSignUp(user) {\n\t\tconsole.log('signed up', user);\n\t\tif (!user) return this.props.onError('User signed in is empty');\n\n\t\tthis.setState({ isSignedUp: true, user, error: undefined });\n\t\tif (this.props.onSignUp) this.props.onSignUp(user);\n\t}\n\trender() {\n\t\tconst { form, signingUp, error } = this.state;\n\t\tconst { dict } = this.props;\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<form onSubmit={this.handleSubmit}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid='firstName'\n\t\t\t\t\t\tvalue={form.firstName}\n\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\tplaceholder={dict.firstName + '...'}\n\t\t\t\t\t\tname='firstName'\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid='lastName'\n\t\t\t\t\t\tvalue={form.lastName}\n\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\tplaceholder={dict.lastName + '...'}\n\t\t\t\t\t\tname='firstName'\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid='email'\n\t\t\t\t\t\tvalue={form.email}\n\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\tplaceholder={dict.email + '...'}\n\t\t\t\t\t\tname='email'\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid='email2'\n\t\t\t\t\t\tvalue={form.email2}\n\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\tplaceholder={dict.reType + ' ' + dict.email + '...'}\n\t\t\t\t\t\tname='email2'\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid='password'\n\t\t\t\t\t\tvalue={form.password}\n\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\tplaceholder={dict.password + '...'}\n\t\t\t\t\t\tname='password'\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid='password2'\n\t\t\t\t\t\tvalue={form.password2}\n\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\tplaceholder={dict.reType + ' ' + dict.password + '...'}\n\t\t\t\t\t\tname='password'\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t/>\n\t\t\t\t\t<PhoneInput\n\t\t\t\t\t\tplaceholder={dict.phone + '...'}\n\t\t\t\t\t\tvalue={form.phone}\n\t\t\t\t\t\tdefaultCountry={'FR'}\n\t\t\t\t\t\tonChange={(val) => this.handlePhoneChange(val)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button type='submit' loading={signingUp}>\n\t\t\t\t\t\tOkey\n\t\t\t\t\t</Button>\n\t\t\t\t</form>\n\t\t\t\t{signingUp && <Loader message={dict.signingUp} />}\n\t\t\t\t{error && <div id='signup-error'>{error}</div>}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default Signup;\n","import React, { Component } from 'react';\nimport './Reset.css';\nimport verificationService from '../../services/verificationService';\nimport Loader from '../util/Loader';\nimport Button from '../util/Button';\n\nclass Reset extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdict: {},\n\t\t\tloading: true,\n\t\t\tresetting: false,\n\t\t\tsuccess: false,\n\t\t\terror: undefined,\n\t\t\tuser: undefined,\n\t\t\tform: {\n\t\t\t\temail: '',\n\t\t\t},\n\t\t};\n\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t\tthis.handleFormChange = this.handleFormChange.bind(this);\n\t}\n\tasync componentDidMount() {}\n\thandleFormChange(e) {\n\t\tconst form = this.state.form;\n\t\tform[e.target.id] = e.target.value;\n\t\tthis.setState({ form });\n\t}\n\tasync handleSubmit(e) {\n\t\te.preventDefault();\n\n\t\tconst { form } = this.state;\n\t\tthis.setState({ error: undefined, resetting: true, success: false });\n\t\ttry {\n\t\t\tthis.props.onSubmit();\n\t\t\tawait verificationService.requestPasswordReset(form.email);\n\t\t\tsetTimeout(() => this.setState({ resetting: false, success: true }), 500);\n\t\t} catch (err) {\n\t\t\tthis.setState({ resetting: false, success: false });\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\trender() {\n\t\tconst { form, success, resetting } = this.state;\n\t\tconst { dict } = this.props;\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<form onSubmit={this.handleSubmit}>\n\t\t\t\t\t{!success ? (\n\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t<div id='reset-password-message'>{dict.fillInEmailPasswordReset}</div>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid='email'\n\t\t\t\t\t\t\t\tname='email'\n\t\t\t\t\t\t\t\tautoFocus={true}\n\t\t\t\t\t\t\t\tplaceholder={dict.email + '...'}\n\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\tvalue={form.email}\n\t\t\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Button type='submit' loading={resetting}>\n\t\t\t\t\t\t\t\tOkey\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div id='reset-password-message-done'>{dict.checkEmailForPasswordResetLink}</div>\n\t\t\t\t\t)}\n\t\t\t\t</form>\n\t\t\t\t{resetting && <Loader />}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default Reset;\n","import React, { Component } from 'react';\nimport './Update.css';\nimport verificationService from '../../services/verificationService';\nimport Loader from '../util/Loader';\nimport Button from '../util/Button';\n\nclass Update extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttoken: props.token,\n\t\t\tloading: false,\n\t\t\tupdating: false,\n\t\t\tsuccess: false,\n\t\t\terror: undefined,\n\t\t\tuser: undefined,\n\t\t\tform: {\n\t\t\t\tnewpassword: '',\n\t\t\t\tnewpassword2: '',\n\t\t\t\ttoken: props.token,\n\t\t\t},\n\t\t};\n\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t\tthis.handleFormChange = this.handleFormChange.bind(this);\n\t}\n\tasync componentDidMount() {}\n\thandleFormChange(e) {\n\t\tconst form = this.state.form;\n\t\tform[e.target.id] = e.target.value;\n\t\tthis.setState({ form });\n\t}\n\tasync handleSubmit(e) {\n\t\te.preventDefault();\n\t\tconst { form } = this.state;\n\t\tif (form.newpassword !== form.newpassword2) return this.props.onError({ message: 'Password does not match' });\n\n\t\tthis.setState({ error: undefined, updating: true, success: false });\n\t\ttry {\n\t\t\tthis.props.onSubmit();\n\t\t\tawait verificationService.updatePassword(form.token, form.newpassword, form.newpassword2);\n\t\t\tsetTimeout(() => this.setState({ updating: false, success: true }), 500);\n\t\t} catch (err) {\n\t\t\tthis.setState({ updating: false, success: false });\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\trender() {\n\t\tconst { form, loading, success, updating } = this.state;\n\n\t\tconst { dict } = this.props;\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t{!success ? (\n\t\t\t\t\t<form onSubmit={this.handleSubmit}>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid='newpassword'\n\t\t\t\t\t\t\tname='newpassword'\n\t\t\t\t\t\t\tautoFocus={true}\n\t\t\t\t\t\t\tplaceholder={dict.newPassword + '...'}\n\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\tvalue={form.newpassword}\n\t\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid='newpassword2'\n\t\t\t\t\t\t\tname='newpassword2'\n\t\t\t\t\t\t\tautoFocus={false}\n\t\t\t\t\t\t\tplaceholder={dict.reType + ' ' + dict.newPassword + '...'}\n\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\tvalue={form.newpassword2}\n\t\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input id='token' name='token' type='hidden' value={form.token} onChange={this.handleFormChange} />\n\t\t\t\t\t\t<Button type='submit' loading={loading}>\n\t\t\t\t\t\t\t{dict.send}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</form>\n\t\t\t\t) : (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<div id='reset-password-message'>{dict.yourPasswordWasReset}</div>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t)}\n\t\t\t\t{updating && <Loader />}\n\t\t\t\t{loading && <Loader />}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default Update;\n","import React, { Component } from 'react';\nimport './Verify.css';\nimport verificationService from '../../services/verificationService';\nimport dictionaryService from '../../services/dictionaryService';\nimport Loader from '../util/Loader';\nimport Button from '../util/Button';\n\nclass Verify extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdict: {},\n\t\t\ttoken: props.token,\n\t\t\tverified: false,\n\t\t\tverifying: false,\n\t\t\tloading: false,\n\t\t\terror: undefined,\n\t\t\tform: {\n\t\t\t\tcode: '',\n\t\t\t\ttoken: props.token || '',\n\t\t\t},\n\t\t};\n\t\tthis.formRef = React.createRef();\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t\tthis.handleFormChange = this.handleFormChange.bind(this);\n\t}\n\tasync componentDidMount() {\n\t\tawait this.loadDictionary();\n\t\tconst { token } = this.state;\n\t\tif (token) this.handleSubmit();\n\t}\n\tasync loadDictionary() {\n\t\ttry {\n\t\t\tconst dict = await dictionaryService.getDictionary();\n\t\t\tthis.setState({ dict });\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\thandleFormChange(e) {\n\t\tconst form = this.state.form;\n\t\tform[e.target.id] = e.target.value;\n\t\tthis.setState({ form });\n\t}\n\tasync handleSubmit(e) {\n\t\tconsole.log('verifying signup');\n\t\tif (e) e.preventDefault();\n\n\t\tconst { form } = this.state;\n\t\ttry {\n\t\t\tthis.setState({ verifying: true, verified: false, error: undefined });\n\t\t\tthis.props.onSubmit();\n\t\t\tawait verificationService.verify(form.token || form.code);\n\t\t\tthis.setState({ verified: true, verifying: false });\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t\tthis.setState({ verifying: false, verified: false, error: err });\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { form, verifying, verified, error, user } = this.state;\n\n\t\tconst { dict } = this.props;\n\n\t\tif (verifying) return <Loader message={'verifying account'} />;\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t{!error && verified && (\n\t\t\t\t\t<div id='verify-finished-message'>\n\t\t\t\t\t\t{dict.accountIsVerified}\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<div id={'verify-finished-gotologin'}>\n\t\t\t\t\t\t\t<Button onClick={() => this.props.onVerification(user)}>{dict.login}</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{!verified && (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<div id='verify-finished-message'>{dict.checkEmailToVerifyAccount}</div>\n\t\t\t\t\t\t<form ref={this.formRef} onSubmit={this.handleSubmit}>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid='code'\n\t\t\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\t\t\tautoFocus={false}\n\t\t\t\t\t\t\t\tvalue={form.code}\n\t\t\t\t\t\t\t\tplaceholder={dict.securityCode + '...'}\n\t\t\t\t\t\t\t\tname='code'\n\t\t\t\t\t\t\t\ttype='number'\n\t\t\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<input id='token' name='token' type='hidden' value={form.token} onChange={this.handleFormChange} />\n\t\t\t\t\t\t\t<Button type='submit' loading={verifying}>\n\t\t\t\t\t\t\t\tOkey\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t)}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default Verify;\n","import React, { Component } from 'react';\nimport './ReCode.css';\nimport verificationService from '../../services/verificationService';\nimport dictionaryService from '../../services/dictionaryService';\nimport Loader from '../util/Loader';\nimport Button from '../util/Button';\n\nclass ReCode extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdict: {},\n\t\t\ttoken: props.token,\n\t\t\tresent: false,\n\t\t\tresending: false,\n\t\t\tloading: false,\n\t\t\terror: undefined,\n\t\t\tform: {\n\t\t\t\temail: '',\n\t\t\t},\n\t\t};\n\t\tthis.formRef = React.createRef();\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t\tthis.handleFormChange = this.handleFormChange.bind(this);\n\t}\n\tasync componentDidMount() {\n\t\tawait this.loadDictionary();\n\t}\n\tasync loadDictionary() {\n\t\ttry {\n\t\t\tconst dict = await dictionaryService.getDictionary('en');\n\t\t\tthis.setState({ dict });\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\thandleFormChange(e) {\n\t\tconst form = this.state.form;\n\t\tform[e.target.id] = e.target.value;\n\t\tthis.setState({ form });\n\t}\n\tasync handleSubmit(e) {\n\t\tconsole.log('verifying signup');\n\t\tif (e) e.preventDefault();\n\n\t\tconst { form } = this.state;\n\t\ttry {\n\t\t\tthis.props.onSubmit();\n\t\t\tthis.setState({ resending: true, resent: false, error: undefined });\n\t\t\tawait verificationService.reverify(form.email);\n\t\t\tthis.setState({ resending: false, resent: true });\n\t\t\tthis.props.onReCode();\n\t\t} catch (err) {\n\t\t\tthis.setState({ resending: false });\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { form, resent, resending, user } = this.state;\n\t\tconst { dict } = this.props;\n\t\t//if(loading) return <Loader/>\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div id='recode-enter-email'>{dict.enterEmailForCode}</div>\n\t\t\t\t{resent ? (\n\t\t\t\t\t<div id='recode-finished-message'>\n\t\t\t\t\t\t{dict.accountIsVerified}\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<Button id={'recode-finished-gotologin'} onClick={() => this.props.onVerification(user)}>\n\t\t\t\t\t\t\t{dict.login}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<form ref={this.formRef} onSubmit={this.handleSubmit}>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid='email'\n\t\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\t\tautoFocus={false}\n\t\t\t\t\t\t\tvalue={form.email}\n\t\t\t\t\t\t\tplaceholder={dict.email + '...'}\n\t\t\t\t\t\t\tname='email'\n\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button type='submit' loading={resending}>\n\t\t\t\t\t\t\tOkey\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</form>\n\t\t\t\t)}\n\t\t\t\t{resending && <Loader message={dict.reSendingVerificationCode} />}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default ReCode;\n","import React, { Component } from 'react';\nimport './index.css';\nimport dictionaryService from '../../services/dictionaryService';\nimport Loader from '../util/Loader';\nimport Container from './Container';\nimport Login from './Login';\nimport Logout from './Logout';\nimport Signup from './Signup';\nimport Reset from './Reset';\nimport Update from './Update';\nimport Verify from './Verify';\nimport ReCode from './ReCode';\n\nclass Verification extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tconst searchParams = new URLSearchParams(props.location ? props.location.search : '');\n\t\tconst type =\n\t\t\tprops.location && props.location.pathname.replace('/verification', '')\n\t\t\t\t? props.location.pathname.replace('/verification/', '')\n\t\t\t\t: props.type || 'login';\n\n\t\tthis.state = {\n\t\t\tloading: false,\n\t\t\ttype: type,\n\t\t\tdict: {},\n\t\t\tnoBackground: props.noBackground,\n\t\t\terror: searchParams.get('error') || undefined,\n\t\t\tredirect: searchParams.get('redirect'),\n\t\t\ttoken: searchParams.get('token'),\n\t\t\ttypes: {\n\t\t\t\tlogin: 'Login',\n\t\t\t\tlogout: 'Log out',\n\t\t\t\tsignup: 'Sign Up',\n\t\t\t\tverify: 'Verify',\n\t\t\t\treset: 'Reset password',\n\t\t\t\tupdate: 'Change password',\n\t\t\t\trecode: 'Verify account',\n\t\t\t},\n\t\t};\n\n\t\tthis.handleLogin = this.handleLogin.bind(this);\n\t\tthis.handleLogout = this.handleLogout.bind(this);\n\t\tthis.handleSignUp = this.handleSignUp.bind(this);\n\t}\n\tcomponentDidMount() {\n\t\tthis.loadDictionary();\n\t}\n\tasync loadDictionary() {\n\t\tconst dict = await dictionaryService.getDictionary();\n\t\tconst types = {\n\t\t\tlogin: dict.login,\n\t\t\tlogout: dict.logout,\n\t\t\tsignup: dict.signup,\n\t\t\tverify: dict.verify,\n\t\t\treset: dict.resetPassword,\n\t\t\tupdate: dict.changePassword,\n\t\t\trecode: dict.verifyAccount,\n\t\t};\n\t\tthis.setState({ dict, types });\n\t}\n\thandleSubmit() {\n\t\tthis.setState({ error: undefined });\n\t}\n\thandleError(err) {\n\t\tconst error = !err\n\t\t\t? undefined\n\t\t\t: err.response && err.response.data\n\t\t\t? err.response.data.message\n\t\t\t: err.message || err.toString();\n\t\tthis.setState({ error });\n\t}\n\thandleShowType(type, user) {\n\t\tconsole.log(type, user);\n\t\tthis.setState({ type, user, error: undefined }, () => {\n\t\t\tdocument.title = 'Chinemachine / ' + this.state.types[this.state.type];\n\t\t});\n\t}\n\thandleShowLogin(user) {\n\t\tthis.setState({ component: Login, user });\n\t}\n\thandleLogin(user) {\n\t\tthis.setState({ user, error: undefined });\n\t\tif (this.props.onLogin) this.props.onLogin(user);\n\t\tthis.redirect();\n\t\tconsole.log('logged in');\n\t}\n\thandleLogout() {\n\t\tthis.setState({ user: null, type: 'login', error: undefined });\n\t\tif (this.props.onLogout) this.props.onLogout();\n\t\tthis.redirect();\n\t\tconsole.log('logged out');\n\t}\n\thandleSignUp(user) {\n\t\tconsole.log('NEW SIGNUP', user);\n\t\tthis.setState({ user, error: undefined });\n\t\tif (this.props.onSignUp) this.props.onSignUp();\n\t\tthis.handleShowType('verify');\n\t\tconsole.log('signed up');\n\t}\n\thandleVerification(user) {\n\t\tconsole.log('verified account');\n\t\tthis.setState({ error: undefined });\n\t\tif (this.props.onVerification) this.props.onVerification();\n\t\tthis.handleShowType('login');\n\t}\n\n\thandleUpdated(user) {\n\t\tconsole.log(user);\n\t\tthis.handleShowType('login');\n\t}\n\tredirect() {\n\t\tconsole.log('REDIRECT', this.state.redirect);\n\t\t//return\n\t\tif (this.state.redirect) this.props.history.push(this.state.redirect);\n\t}\n\trender() {\n\t\tconst { user, type, types, loading, redirect, noBackground, token, dict, error } = this.state;\n\n\t\tconst { noLogo } = this.props;\n\n\t\treturn (\n\t\t\t<div id='verification' style={noBackground ? { background: 'none' } : undefined}>\n\t\t\t\t<Container\n\t\t\t\t\theader={types[type]}\n\t\t\t\t\ttype={type}\n\t\t\t\t\terror={error}\n\t\t\t\t\tnoLogo={noLogo}\n\t\t\t\t\tdict={dict}\n\t\t\t\t\tonChange={(type) => this.handleShowType(type)}\n\t\t\t\t>\n\t\t\t\t\t{type === 'login' ? (\n\t\t\t\t\t\t<Login\n\t\t\t\t\t\t\tkey={'login'}\n\t\t\t\t\t\t\temail={user && user.email}\n\t\t\t\t\t\t\tonLogin={this.handleLogin}\n\t\t\t\t\t\t\tredirect={redirect}\n\t\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\t\tonError={(err) => this.handleError(err)}\n\t\t\t\t\t\t\tonSubmit={() => this.handleSubmit()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : type === 'logout' ? (\n\t\t\t\t\t\t<Logout\n\t\t\t\t\t\t\tkey={'logout'}\n\t\t\t\t\t\t\temail={user && user.email}\n\t\t\t\t\t\t\tonLogout={this.handleLogout}\n\t\t\t\t\t\t\tredirect={redirect}\n\t\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\t\tonError={(err) => this.handleError(err)}\n\t\t\t\t\t\t\tonSubmit={() => this.handleSubmit()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : type === 'reset' ? (\n\t\t\t\t\t\t<Reset\n\t\t\t\t\t\t\tkey={'reset'}\n\t\t\t\t\t\t\temail={user && user.email}\n\t\t\t\t\t\t\ttoken={token}\n\t\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\t\tonError={(err) => this.handleError(err)}\n\t\t\t\t\t\t\tonSubmit={() => this.handleSubmit()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : type === 'update' ? (\n\t\t\t\t\t\t<Update\n\t\t\t\t\t\t\tkey={'update'}\n\t\t\t\t\t\t\temail={user && user.email}\n\t\t\t\t\t\t\ttoken={token}\n\t\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\t\tonUpdated={() => this.handleUpdated()}\n\t\t\t\t\t\t\tonError={(err) => this.handleError(err)}\n\t\t\t\t\t\t\tonSubmit={() => this.handleSubmit()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : type === 'verify' ? (\n\t\t\t\t\t\t<Verify\n\t\t\t\t\t\t\tkey={'update'}\n\t\t\t\t\t\t\ttoken={token}\n\t\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\t\tonVerification={(user) => this.handleVerification(user)}\n\t\t\t\t\t\t\tonError={(err) => this.handleError(err)}\n\t\t\t\t\t\t\tonSubmit={() => this.handleSubmit()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : type === 'recode' ? (\n\t\t\t\t\t\t<ReCode\n\t\t\t\t\t\t\tkey={'recode'}\n\t\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\t\tonReCode={() => this.handleShowType('verify')}\n\t\t\t\t\t\t\tonError={(err) => this.handleError(err)}\n\t\t\t\t\t\t\tonSubmit={() => this.handleSubmit()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : type === 'signup' ? (\n\t\t\t\t\t\t<Signup\n\t\t\t\t\t\t\tkey={'signup'}\n\t\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\t\tonSignUp={this.handleSignUp}\n\t\t\t\t\t\t\tredirect={redirect}\n\t\t\t\t\t\t\tonError={(err) => this.handleError(err)}\n\t\t\t\t\t\t\tonSubmit={() => this.handleSubmit()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div>Invalid type</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{loading && <Loader />}\n\t\t\t\t</Container>\n\t\t\t\t<div id='verification-bubbles'>\n\t\t\t\t\t<div className='verification-bubble' onClick={() => this.handleShowType('reset')}>\n\t\t\t\t\t\t{dict.forgotPassword}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='verification-bubble' onClick={() => this.handleShowType('recode')}>\n\t\t\t\t\t\t{dict.verifyAccount}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Verification;\n","import React, { Component } from 'react';\nimport './AppointmentCalendar.css';\nimport Select from 'react-select';\nimport AsyncSelect from 'react-select/async';\nimport moment from 'moment-timezone';\nimport Hammer from 'rc-hammerjs';\nimport Button from '../util/Button';\nimport Loader from '../util/Loader';\nimport Calendar from 'react-calendar';\n\nimport dictionaryService from '../../services/dictionaryService';\nimport storeService from '../../services/storeService';\nimport userService from '../../services/userService';\nimport appointmentService from '../../services/appointmentService';\nimport { findTimeZone, getZonedTime, getUnixTime } from 'timezone-support';\n\nconst REFRESH_INTERVAL = 30000;\n\nconst createAvailableTime = (year, month, day, hour, minute, store) => {\n\tconst startTime =\n\t\tmoment\n\t\t\t.tz(moment({ year, month, day, hour, minute }).format('YYYY-MM-DD HH:mm'), 'YYYY-MM-DD HH:mm', 'Europe/Paris')\n\t\t\t.unix() * 1000;\n\tconst endTime = startTime + 30 * 60 * 1000;\n\treturn {\n\t\t_id: startTime + '-' + endTime,\n\t\tstartTime: startTime,\n\t\tendTime: endTime,\n\t\tstoreId: store._id,\n\t\tstore,\n\t\tgenerated: true,\n\t};\n};\nconst generateAvailable = (date, store) => {\n\tconst available = [];\n\tfor (var i = 0, h = 12, m = 0; h < 20; i++, h += 0.5) {\n\t\tavailable.push(createAvailableTime(date.getFullYear(), date.getMonth(), date.getDate(), Math.floor(h), m, store));\n\t\tm = m === 0 ? 30 : 0;\n\t}\n\treturn available;\n};\n\nclass AppointmentCalendar extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdate: props.date || new Date(),\n\t\t\tselected: props.selected || undefined,\n\t\t\tavailability: props.availability,\n\t\t\tdict: {},\n\t\t\tloading: true,\n\t\t\tloadingAppointment: false,\n\t\t\tsaving: false,\n\t\t\tcancelling: false,\n\t\t\trefreshing: false,\n\t\t\terror: undefined,\n\t\t\tdone: false,\n\t\t\tcalendarDate: undefined,\n\t\t\tstore: undefined,\n\t\t\tstores: [],\n\t\t\tavail: undefined,\n\t\t\tavailable: [],\n\t\t\tavailableMonth: [],\n\t\t\tappointment: undefined,\n\t\t\tupdatingSlot: undefined,\n\t\t\tcustomerSearchTerm: '',\n\t\t\tcustomerSearch: [],\n\t\t\tcustomer: undefined,\n\t\t\tbooking: false,\n\t\t};\n\n\t\tthis.handleCalendarChange = this.handleCalendarChange.bind(this);\n\t\tthis.handleDateChanged = this.handleDateChanged.bind(this);\n\t\tthis.handleIsDateDisabled = this.handleIsDateDisabled.bind(this);\n\t\tthis.handleDeleteAppointment = this.handleDeleteAppointment.bind(this);\n\t\tthis.handleIsDateAvailable = this.handleIsDateAvailable.bind(this);\n\t\tthis.handleStartDateChange = this.handleStartDateChange.bind(this);\n\t\tthis.handleStoreChange = this.handleStoreChange.bind(this);\n\t\tthis.handleCustomerSearch = this.handleCustomerSearch.bind(this);\n\t\tthis.handleCustomerSearchSelected = this.handleCustomerSearchSelected.bind(this);\n\t\tthis.handleCustomerBooking = this.handleCustomerBooking.bind(this);\n\t\tthis.refreshInterval = null;\n\t}\n\tasync componentDidMount() {\n\t\tlet { dict, langCode } = this.props;\n\t\tthis.setState({ loading: true });\n\t\ttry {\n\t\t\tif (!dict) dict = await dictionaryService.getDictionary(langCode);\n\t\t\tconst stores = await storeService.getAll();\n\t\t\tconst store = stores.length ? stores[1] : undefined;\n\t\t\tconst { date } = this.state;\n\t\t\tawait this.setStateAsync({ dict, stores, store, date });\n\t\t\tawait this.loadAll(date);\n\t\t\tthis.refreshInterval = setInterval(() => this.loadAll(this.state.date, true), REFRESH_INTERVAL);\n\t\t} catch (err) {\n\t\t\tthis.handleError(err);\n\t\t}\n\n\t\tthis.setState({ loading: false });\n\t}\n\tsetStateAsync(state) {\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.setState(state, resolve);\n\t\t});\n\t}\n\n\tasync loadAll(date, background) {\n\t\tawait this.loadAppointmentsByMonth(date, background);\n\t\tawait this.loadAppointments(date, background);\n\t}\n\tcomponentWillUnmount() {\n\t\tclearInterval(this.refreshInterval);\n\t}\n\tasync loadAppointments(date, background) {\n\t\tconst { store } = this.state;\n\t\tconst { edit } = this.props;\n\n\t\tdate = date || this.state.date ? new Date(date || this.state.date) : new Date();\n\n\t\tif (!store) return;\n\n\t\tif (!background) this.setState({ refreshing: true, date });\n\t\ttry {\n\t\t\tlet available = await appointmentService.getByDate(\n\t\t\t\tdate.getFullYear(),\n\t\t\t\tdate.getMonth(),\n\t\t\t\tdate.getDate(),\n\t\t\t\tstore._id\n\t\t\t);\n\t\t\tif (edit) {\n\t\t\t\tavailable = generateAvailable(date, store).map((avail, idx) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\tavailable.filter(\n\t\t\t\t\t\t\t(a) =>\n\t\t\t\t\t\t\t\tmoment(a.startTime).format('HH:mm') === moment(avail.startTime).format('HH:mm') &&\n\t\t\t\t\t\t\t\tmoment(a.endTime).format('HH:mm') === moment(avail.endTime).format('HH:mm')\n\t\t\t\t\t\t)[0] || avail\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t} else\n\t\t\t\tavailable = available.filter(\n\t\t\t\t\t(avail) =>\n\t\t\t\t\t\t!avail.userId &&\n\t\t\t\t\t\tavail.status === 'ACTIVE' &&\n\t\t\t\t\t\t!moment(avail.startTime).isBefore(moment().tz('Europe/Paris'), 'day')\n\t\t\t\t);\n\n\t\t\tthis.setState({ available, date });\n\t\t} catch (err) {\n\t\t\tthis.handleError(err);\n\t\t}\n\n\t\tthis.setState({ refreshing: false });\n\t}\n\tasync loadAppointmentsByMonth(date, background) {\n\t\tconst { store } = this.state;\n\t\tconst { edit } = this.props;\n\n\t\tdate = date || this.state.date ? new Date(date || this.state.date) : new Date();\n\t\tif (!background) this.setState({ refreshing: true });\n\t\ttry {\n\t\t\tlet availableMonth = await appointmentService.getByMonth(date.getFullYear(), date.getMonth(), store._id);\n\t\t\tif (!edit)\n\t\t\t\tavailableMonth = availableMonth.filter(\n\t\t\t\t\t(avail) =>\n\t\t\t\t\t\t!avail.userId &&\n\t\t\t\t\t\tavail.status === 'ACTIVE' &&\n\t\t\t\t\t\t!moment(avail.startTime).isBefore(moment().tz('Europe/Paris'), 'day')\n\t\t\t\t);\n\n\t\t\tthis.setState({ availableMonth, date });\n\t\t} catch (err) {\n\t\t\tthis.handleError(err);\n\t\t}\n\t\tthis.setState({ refreshing: false });\n\t}\n\n\tupdateAvailabilities(availability) {\n\t\tlet { available, availableMonth } = this.state;\n\t\tavailable = available.map((avail) =>\n\t\t\tavail._id === availability._id ||\n\t\t\t(avail.startTime === availability.startTime && avail.endTime === availability.endTime)\n\t\t\t\t? availability\n\t\t\t\t: avail\n\t\t);\n\t\tavailableMonth = availableMonth.map((avail) =>\n\t\t\tavail._id === availability._id ||\n\t\t\t(avail.startTime === availability.startTime && avail.endTime === availability.endTime)\n\t\t\t\t? availability\n\t\t\t\t: avail\n\t\t);\n\t\tthis.setState({ available, selected: availability, availableMonth });\n\t}\n\tremoveAvailability(id) {\n\t\tlet { selected, available, availableMonth } = this.state;\n\t\tselected = {\n\t\t\t...selected,\n\t\t\tgenerated: true,\n\t\t\t_id: new Date(selected.startTime).getTime() + '-' + new Date(selected.endTime).getTime(),\n\t\t};\n\t\tavailable = available.map((avail) => (avail._id === id ? selected : avail));\n\t\tavailableMonth = availableMonth.filter((avail) => avail._id !== id);\n\t\tthis.setState({ available, selected, availableMonth });\n\t}\n\thandleCalendarChange(date) {\n\t\tthis.setState({ date });\n\t}\n\tasync handleDateChanged(newDate) {\n\n\t\tawait this.loadAppointments(newDate);\n\t\tthis.setState({ selected: undefined });\n\t\tif (this.props.onChange) this.props.onChange(newDate);\n\t}\n\thandleStartDateChange({ activeStartDate }) {\n\t\tthis.setState({ appointment: undefined });\n\t\tthis.loadAppointments(activeStartDate);\n\t}\n\tasync handleToggleAvailability(availability) {\n\t\tconst { edit, langCode } = this.props;\n\t\tconst { store } = this.state;\n\t\tif (!edit) return;\n\n\t\tthis.setState({ saving: true, updatingSlot: availability._id });\n\t\tif (!availability.userId) {\n\t\t\ttry {\n\t\t\t\tif (!availability.generated) {\n\t\t\t\t\tawait appointmentService.delete(availability._id);\n\t\t\t\t\tthis.removeAvailability(availability._id);\n\t\t\t\t} else {\n\t\t\t\t\tconst newAvailability = await appointmentService.add({\n\t\t\t\t\t\t...availability,\n\t\t\t\t\t\tlangCode,\n\t\t\t\t\t\t_id: undefined,\n\t\t\t\t\t\tstoreId: store._id,\n\t\t\t\t\t});\n\t\t\t\t\tthis.updateAvailabilities(newAvailability);\n\t\t\t\t}\n\t\t\t\tthis.loadAll(this.state.date, true);\n\t\t\t} catch (err) {\n\t\t\t\tthis.handleError(err);\n\t\t\t}\n\t\t} else {\n\t\t\ttry {\n\t\t\t\tconst appointment = await appointmentService.get(availability._id);\n\t\t\t\tthis.setState({ appointment });\n\t\t\t} catch (err) {\n\t\t\t\tthis.handleError(err);\n\t\t\t}\n\t\t}\n\t\tthis.setState({ saving: false, updatingSlot: undefined });\n\t}\n\n\tasync handleSelected(selected) {\n\n\t\tthis.setState({ selected, loadingAppointment: selected.userId }, async () => {\n\n\t\t\tif (selected.userId) {\n\t\t\t\ttry {\n\t\t\t\t\tselected.appointment = await appointmentService.get(selected._id);\n\n\t\t\t\t\tthis.setState({ selected, loadingAppointment: false }, () => {\n\t\t\t\t\t\tdocument.getElementById('ac-appointment').scrollIntoView();\n\t\t\t\t\t});\n\t\t\t\t} catch (err) {\n\t\t\t\t\tthis.setState({ loadingAppointment: false });\n\t\t\t\t\treturn this.handleError(err);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.props.onSelect) this.props.onSelect(selected);\n\t\t});\n\t}\n\thandleIsDateDisabled({ activeStartDate, date, view }) {\n\t\treturn false;\n\t\t/*\n        const {availableMonth} = this.state;\n        const {edit} = this.props;\n        if(edit) \n            return false;\n        const available = availableMonth.filter((avail)=> moment(avail.startTime).isSame(moment(date), 'day'))\n        return available.length === 0\n        */\n\t}\n\thandleIsDateAvailable({ activeStartDate, date, view }) {\n\t\tconst { availableMonth } = this.state;\n\t\tconst { edit } = this.props;\n\t\tlet available = availableMonth.filter((avail) => moment.tz(avail.startTime, 'Europe/Paris').isSame(date, 'day'));\n\t\tlet booked = available.filter((avail) => avail.status === 'BOOKED').length === available.length;\n\t\t//if(available.length) console.log(date, available)\n\t\treturn available.length ? (booked ? 'ac-calendar-booked' : 'ac-calendar-active') : true;\n\t}\n\thandleTileContent({ date, view }) {}\n\tasync handleDeleteAppointment(id) {\n\t\tthis.setState({ saving: true });\n\t\ttry {\n\t\t\tawait appointmentService.delete(id);\n\t\t\tthis.setState({ appointment: undefined, selected: undefined });\n\t\t\tthis.loadAppointments(this.state.date, true);\n\t\t} catch (err) {\n\t\t\tthis.handleError(err);\n\t\t}\n\t\tthis.setState({ saving: false });\n\t}\n\tasync handleCancelAppointment(appointment) {\n\t\tthis.setState({ cancelling: true });\n\t\ttry {\n\t\t\tawait appointmentService.cancel(appointment.userId, appointment._id);\n\t\t\tthis.loadAppointments(this.state.date, true);\n\t\t} catch (err) {\n\t\t\tthis.handleError(err);\n\t\t}\n\t\tthis.setState({ cancelling: false });\n\t}\n\tasync handleStoreChange(opt) {\n\t\tconst { stores } = this.state;\n\t\tconst store = stores.filter((s) => s._id === opt.value)[0];\n\t\tawait this.setStateAsync({ store, selected: undefined });\n\t\tthis.loadAll();\n\t}\n\tgetMaxDate() {\n\t\tconst { edit } = this.props;\n\t\treturn edit\n\t\t\t? moment().tz('Europe/Paris').add('months', 12).toDate()\n\t\t\t: moment().tz('Europe/Paris').add('months', 2).toDate();\n\t}\n\tgetMinDate() {\n\t\tconst { edit } = this.props;\n\t\treturn edit ? moment().tz('Europe/Paris').subtract('months', 12).toDate() : new Date();\n\t}\n\thandleError(err) {\n\t\tconst error = err.response && err.response.data ? err.response.data.message : err.message || err.toString();\n\t\tthis.setState({ error });\n\t\tif (this.props.onError) this.props.onError(err);\n\t}\n\thandleCustomerSearch(customerSearchTerm) {\n\t\tthis.setState({ customerSearchTerm });\n\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (customerSearchTerm.length < 2) return resolve([]);\n\t\t\ttry {\n\t\t\t\tlet customerSearch = await userService.search(customerSearchTerm);\n\t\t\t\tcustomerSearch = customerSearch.map((c) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tlabel: c.firstName + ' ' + c.lastName + ' (' + c.email + ')',\n\t\t\t\t\t\tvalue: c._id,\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t\tresolve(customerSearch);\n\t\t\t\tthis.setState({ customerSearch });\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t}\n\thandleCustomerSearchSelected(customer, action) {\n\t\tthis.setState({ customer });\n\t}\n\tasync handleCustomerBooking(e) {\n\t\te.preventDefault();\n\n\t\tconst { customer, selected } = this.state;\n\n\t\tif (!customer) return this.handleError('Not a valid customer');\n\t\tif (!selected) return this.handleError('No appointment time selected');\n\n\t\tconst userId = customer.value;\n\t\tconst appointmentId = selected._id;\n\n\t\tthis.setState({ booking: true });\n\t\ttry {\n\t\t\tconst appointment = await appointmentService.bookInternal(userId, appointmentId);\n\t\t\tselected.appointment = appointment;\n\t\t\tthis.setState({ selected });\n\t\t\tawait this.loadAll();\n\t\t} catch (err) {\n\t\t\tthis.handleError(err);\n\t\t}\n\t\tthis.setState({ booking: false });\n\t}\n\trender() {\n\t\tconst {\n\t\t\tdict,\n\t\t\tdate,\n\t\t\tloading,\n\t\t\tloadingAppointment,\n\t\t\tupdatingSlot,\n\t\t\tsaving,\n\t\t\tcancelling,\n\t\t\trefreshing,\n\t\t\tavailable,\n\t\t\tavailableMonth,\n\t\t\tselected,\n\t\t\tstore,\n\t\t\tstores,\n\t\t\tcustomerSearch,\n\t\t\tcustomerSearchTerm,\n\t\t\tcustomer,\n\t\t\tbooking,\n\t\t} = this.state;\n\n\t\tconst { edit, langCode } = this.props;\n\t\tconst minDate = this.getMinDate();\n\t\tconst selectStyle = {\n\t\t\tvalueContainer: (provided, state) => {\n\t\t\t\treturn { ...provided, justifyContent: 'center', fontWeight: 'bold' };\n\t\t\t},\n\t\t};\n\n\t\tconst slots = available.map((a, idx) => {\n\t\t\tlet className;\n\t\t\tif (a.status === 'CANCELLED' && selected && selected._id === a._id) className = 'ac-slot-cancelled-selected';\n\t\t\telse if (a.status === 'CANCELLED') className = 'ac-slot-cancelled';\n\t\t\telse if (a.userId && selected && selected._id === a._id) className = 'ac-slot-booked-selected';\n\t\t\telse if (a.userId) className = 'ac-slot-booked';\n\t\t\telse if (selected && selected._id === a._id && !selected.generated) className = 'ac-slot-selected-active';\n\t\t\telse if (selected && selected._id === a._id && selected.generated) className = 'ac-slot-selected-deactivated';\n\t\t\telse if (!a.generated) className = 'ac-slot-available';\n\t\t\telse className = 'ac-slot';\n\n\t\t\treturn (\n\t\t\t\t<Hammer\n\t\t\t\t\tkey={'hmr-' + idx}\n\t\t\t\t\tonDoubleTap={() => this.handleToggleAvailability(a)}\n\t\t\t\t\tonTap={() => this.handleSelected(a)}\n\t\t\t\t>\n\t\t\t\t\t<div key={'appointment' + idx} className={className}>\n\t\t\t\t\t\t<div className='ac-slot-time'>\n\t\t\t\t\t\t\t{a.status === 'CANCELLED'\n\t\t\t\t\t\t\t\t? 'CANCELLED'\n\t\t\t\t\t\t\t\t: moment.tz(a.startTime, 'Europe/Paris').format('HH:mm') +\n\t\t\t\t\t\t\t\t  ' - ' +\n\t\t\t\t\t\t\t\t  moment.tz(a.endTime, 'Europe/Paris').format('HH:mm')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{updatingSlot === a._id && <Loader styles={{ backgroundColor: 'rgb(221, 221, 221)' }} type='fast' />}\n\t\t\t\t\t</div>\n\t\t\t\t</Hammer>\n\t\t\t);\n\t\t});\n\n\t\tif (loading) return <Loader />;\n\t\t\n\t\treturn (\n\t\t\t<div id='ac-wrap'>\n\t\t\t\t<div id='ac'>\n\t\t\t\t\t{store && stores && (\n\t\t\t\t\t\t<div id='ac-appointment-store'>\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tonChange={this.handleStoreChange}\n\t\t\t\t\t\t\t\tvalue={{\n\t\t\t\t\t\t\t\t\tvalue: store._id,\n\t\t\t\t\t\t\t\t\tlabel: store.name + ', ' + store.city + ' (' + store.postalCode + ')',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tmenuPlacement='bottom'\n\t\t\t\t\t\t\t\tisSearchable={false}\n\t\t\t\t\t\t\t\tstyles={selectStyle}\n\t\t\t\t\t\t\t\toptions={stores.map((store) => {\n\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\tvalue: store._id,\n\t\t\t\t\t\t\t\t\t\tlabel: store.name + ', ' + store.city + ' (' + store.postalCode + ')',\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<Calendar\n\t\t\t\t\t\tminDate={minDate}\n\t\t\t\t\t\t//maxDate={maxDate}\n\t\t\t\t\t\tmaxDetail={'month'}\n\t\t\t\t\t\tminDetail={'month'}\n\t\t\t\t\t\tlocale={langCode === 'fr' ? 'fr-FR' : 'en-EN'}\n\t\t\t\t\t\tonChange={this.handleDateChanged}\n\t\t\t\t\t\ttileDisabled={this.handleIsDateDisabled}\n\t\t\t\t\t\ttileClassName={(data) => this.handleIsDateAvailable(data)}\n\t\t\t\t\t\ttileContent={(data) => this.handleTileContent(data)}\n\t\t\t\t\t\tvalue={date}\n\t\t\t\t\t\tnext2Label={null}\n\t\t\t\t\t\tprev2Label={null}\n\t\t\t\t\t\tshowNeighboringMonth={false}\n\t\t\t\t\t\tonActiveStartDateChange={this.handleStartDateChange}\n\t\t\t\t\t/>\n\t\t\t\t\t<div id='ac-slots'>\n\t\t\t\t\t\t{date && available.length > 0 ? (\n\t\t\t\t\t\t\t<div id='ac-slots-wrap'>{slots}</div>\n\t\t\t\t\t\t) : availableMonth.length === 0 ? (\n\t\t\t\t\t\t\t<div id='ac-slots-empty'>{dict.noAppointmentsAvailableMonth}</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div id='ac-slots-empty'>{dict.noAppointmentsAvailable}</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{refreshing && <Loader />}\n\t\t\t\t\t</div>\n\t\t\t\t\t{edit && selected && (\n\t\t\t\t\t\t<div id='ac-appointment'>\n\t\t\t\t\t\t\t{loadingAppointment ? (\n\t\t\t\t\t\t\t\t<Loader overlay={true} />\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t<div id='ac-appointment-details'>\n\t\t\t\t\t\t\t\t\t\t<div id='ac-appointment-details-date-wrap'>\n\t\t\t\t\t\t\t\t\t\t\t<div id='ac-appointment-details-date'>\n\t\t\t\t\t\t\t\t\t\t\t\t{moment(selected.startTime).tz('Paris/Europe').format('HH:mm')} {dict.to}{' '}\n\t\t\t\t\t\t\t\t\t\t\t\t{moment(selected.endTime).tz('Europe/Paris').format('HH:mm')}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div id='ac-appointment-details-time'>\n\t\t\t\t\t\t\t\t\t\t\t\t{moment.tz(selected.startTime, 'Europe/Paris').format('dddd MMM Do')}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div id='ac-appointment-details-store'>\n\t\t\t\t\t\t\t\t\t\t\t\t{selected.store.name}, {selected.store.postalCode}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{selected.appointment && selected.appointment.user ? (\n\t\t\t\t\t\t\t\t\t\t\t<div id='ac-appointment-details-wrap'>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id='ac-appointment-details-name'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{selected.appointment.user.firstName} {selected.appointment.user.lastName}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t<div id='ac-appointment-details-email'>{selected.appointment.user.email}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id='ac-appointment-details-phone'>{selected.appointment.user.phone}</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<div id='ac-appointment-details-book'>\n\t\t\t\t\t\t\t\t\t\t\t\t<form id='ac-appointment-book-form' onSubmit={this.handleCustomerBooking}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<AsyncSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleCustomerSearchSelected}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Search customers...'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tloadOptions={this.handleCustomerSearch}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcacheOptions\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={customer}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tblurInputOnSelect={true}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button loading={booking} disabled={customer ? false : true}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tBOOK\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div id='ac-appointment-buttons'>\n\t\t\t\t\t\t\t\t\t\t{selected.appointment ? (\n\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button loading={cancelling} onClick={() => this.handleCancelAppointment(selected.appointment)}>\n\t\t\t\t\t\t\t\t\t\t\t\t\tCANCEL\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button loading={saving} onClick={() => this.handleDeleteAppointment(selected.appointment._id)}>\n\t\t\t\t\t\t\t\t\t\t\t\t\tDELETE\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href={'tel:' + (selected.appointment.user ? selected.appointment.user.phone : '')}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={selected.appointment.user && selected.appointment.user.phone ? false : true}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCALL\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t<a href={'mailto:' + selected.appointment.email}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button>E-MAIL</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button loading={saving} onClick={() => this.handleToggleAvailability(selected)}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{selected.generated ? 'ACTIVATE' : 'DE-ACTIVATE'}\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default AppointmentCalendar;\n","import React, { Component } from 'react';\nimport './Button.css';\nimport { RiLoader5Line } from 'react-icons/ri';\n\nclass Button extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\t}\n\thandleClick(e) {\n\t\tif (this.state.loading) return e.preventDefault();\n\t\tif (this.props.onClick) this.props.onClick(e);\n\t}\n\trender() {\n\t\tconst { type, style, disabled, loading, value } = this.props;\n\n\t\treturn (\n\t\t\t<button\n\t\t\t\tclassName={'button'}\n\t\t\t\tstyle={style || undefined}\n\t\t\t\ttype={type}\n\t\t\t\tdisabled={disabled || undefined}\n\t\t\t\tonClick={(e) => this.handleClick(e)}\n\t\t\t>\n\t\t\t\t{loading ? <RiLoader5Line className='button-loading' /> : this.props.children || value}\n\t\t\t</button>\n\t\t);\n\t}\n}\nexport default Button;\n","import { axios } from './';\n\nexport default {\n\tgetUser: async () => {\n\t\tlet res = await axios.get('/status');\n\t\treturn res.data;\n\t},\n\tlogin: async (email, password) => {\n\t\tlet res = await axios.post('/verification/login', { email, password });\n\t\treturn res.data;\n\t},\n\tlogout: async (email) => {\n\t\tlet res = await axios.post('/verification/logout', { email });\n\t\treturn res.data;\n\t},\n\tsignup: async (params) => {\n\t\tlet res = await axios.post('/verification/signup', params);\n\t\treturn res.data;\n\t},\n\tverify: async (tokenOrCode) => {\n\t\tlet res = await axios.get('/verification/verify/' + tokenOrCode);\n\t\treturn res.data;\n\t},\n\treverify: async (email) => {\n\t\tlet res = await axios.get('/verification/reverify/' + email);\n\t\treturn res.data;\n\t},\n\trequestPasswordReset: async (email) => {\n\t\tlet res = await axios.get('/verification/reset/' + email);\n\t\treturn res.data;\n\t},\n\tupdatePassword: async (token, password, password2) => {\n\t\tlet res = await axios.post('/verification/update', { token, password, password2 });\n\t\treturn res.data;\n\t},\n};\n","import axios from 'axios';\naxios.defaults.withCredentials = true;\nexport { axios };\n","import { axios } from './';\n\nexport default {\n\tget: async (id) => {\n\t\tlet res = await axios.get('/api/dictionary/id/' + id);\n\t\treturn res.data || {};\n\t},\n\tgetAll: async () => {\n\t\tlet res = await axios.get('/api/dictionary/all');\n\t\treturn res.data || [];\n\t},\n\tgetDictionary: async (langCode) => {\n\t\tlet res = await axios.get('/api/dictionary');\n\t\treturn res.data;\n\t},\n\tadd: async (term) => {\n\t\tlet res = await axios.post('/api/dictionary/', { term });\n\t\treturn res.data;\n\t},\n\tupdate: async (dict) => {\n\t\tlet res = await axios.patch('/api/dictionary/' + dict._id, dict);\n\t\treturn res.data;\n\t},\n\tupdateMany: async (dictionary) => {\n\t\tconst items = await axios.patch('/api/dictionary', dictionary);\n\t\treturn items;\n\t\t/*\n        const data = []\n        for (var i = 0; i < dictionary.length; i++){\n            const item = await axios.patch('/api/dictionary/' +dictionary[i]._id, dictionary[i])\n            data.push(item.data)\n        }\n        return data || []\n        */\n\t},\n\tdelete: async (id) => {\n\t\tlet res = await axios.delete('/api/dictionary/' + id);\n\t\treturn res.data;\n\t},\n\tdeleteAll: async () => {\n\t\tlet res = await axios.delete('/api/dictionary');\n\t\treturn res.data;\n\t},\n};\n","import React, { Component } from \"react\";\nimport \"./NoAppointments.css\";\n\nclass NoAppointments extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\t}\n\n\trender() {\n\t\tconst { dict } = this.props;\n\n\t\treturn (\n\t\t\t<div className={\"noappointments\"}>\n\t\t\t\t<div className={\"noappointments-content\"}>{dict.noAppointments}</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default NoAppointments;\n","import React, { Component } from 'react';\nimport './index.css';\nimport AppointmentCalendar from '../util/AppointmentCalendar';\n\nclass AppointmentDate extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\t...props,\n\t\t};\n\t}\n\tcomponentDidMount() {}\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\n\t\treturn nextProps;\n\t}\n\n\trender() {\n\t\tconst { dict, langCode, date, selected } = this.state;\n\n\t\treturn (\n\t\t\t<div id='appointment-select'>\n\t\t\t\t<div id='appointment-calendar'>\n\t\t\t\t\t<AppointmentCalendar\n\t\t\t\t\t\tkey='appointment-calendar'\n\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\tlangCode={langCode}\n\t\t\t\t\t\tedit={false}\n\t\t\t\t\t\tdate={date}\n\t\t\t\t\t\tselected={selected}\n\t\t\t\t\t\tonChange={this.props.onDateChange}\n\t\t\t\t\t\tonSelect={this.props.onSelectAvailable}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default AppointmentDate;\n","import React, { Component } from 'react';\nimport './index.css';\n\nimport Verification from '../verification';\n\nclass AppointmentVerification extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {};\n\t}\n\tasync componentDidMount() {}\n\trender() {\n\t\tconst { type } = this.props;\n\t\treturn (\n\t\t\t<div id='appointment-verification'>\n\t\t\t\t<Verification type={type} noBackground={true} noLogo={true} onLogin={this.props.onLogin} />\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default AppointmentVerification;\n","import React, { Component } from 'react';\nimport './index.css';\nimport logo from '../../images/cm_logo_black_128px.png';\nimport moment from 'moment';\n\nconst formatAvailability = (availability, dict) => {\n\treturn (\n\t\t<div>\n\t\t\t{moment(availability.startTime).format('dddd MMMM Do')}\n\t\t\t<br />\n\t\t\t{moment(availability.startTime).format('HH:mm')} {dict.to} {moment(availability.endTime).format('HH:mm')}\n\t\t</div>\n\t);\n};\nclass AppointmentBook extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {};\n\t}\n\tasync componentDidMount() {}\n\trender() {\n\t\tconst { dict, selected, user } = this.props;\n\n\t\tconst { store } = selected;\n\n\t\treturn (\n\t\t\t<div id='appointment-book'>\n\t\t\t\t<div id='appointment-book-wrap'>\n\t\t\t\t\t<div id=\"appointment-your\">Your appointment</div>\n\t\t\t\t\t<br/>\n\t\t\t\t\t<div id='appointment-book-time'>{formatAvailability(selected, dict)}</div>\n\t\t\t\t\t<div>@</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{store.name}\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t{store.address}\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t{store.postalCode}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<img id={'appointment-logo'} src={logo} alt='Chinemachine' />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id='appointment-book-now'>{dict.bookThisAppointment}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default AppointmentBook;\n","import React, { Component } from 'react';\nimport './index.css';\nimport moment from 'moment';\n\nconst formatAvailability = (availability, dict) => {\n\tmoment.locale(dict._langCode);\n\treturn (\n\t\t<div>\n\t\t\t{moment(availability.startTime).format('dddd MMMM Do')}\n\t\t\t<br />\n\t\t\t{moment(availability.startTime).format('HH:mm')} {dict.to} {moment(availability.endTime).format('HH:mm')}\n\t\t</div>\n\t);\n};\nclass AppointmentConfirmation extends Component {\n\trender() {\n\t\tconst { dict, appointment } = this.props;\n\n\t\treturn (\n\t\t\t<div id='appointment-finished'>\n\t\t\t\t<div id='appointment-confirmation'>\n\t\t\t\t\t<div id='appointment-form-time'>\n\t\t\t\t\t\t<span id='appointment-confirmation-thanks'>{dict.thanksBooking}</span>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<span id='appointment-confirmation-bookedfor'>{dict.appointmentBookedFor}</span>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t{formatAvailability(appointment, dict)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id='appointment-form-store'>\n\t\t\t\t\t\t@<br />\n\t\t\t\t\t\t{appointment.store.name}\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t{appointment.store.address}\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t{appointment.store.postalCode}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id='appointment-goto-account'>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t{dict.gotoAccount} <a href='/account'>account</a>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default AppointmentConfirmation;\n","import React, { Component } from 'react';\nimport './index.css';\nimport Button from '../util/Button';\nimport moment from 'moment';\n\nclass AppointmentNav extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {};\n\t}\n\tasync componentDidMount() {}\n\trender() {\n\t\tconst { selected, dict, prev, book, next } = this.props;\n\n\t\treturn (\n\t\t\t<div id='appointment-bottom'>\n\t\t\t\t{!book && selected && (\n\t\t\t\t\t<div id='appointment-booking-time'>\n\t\t\t\t\t\t<div id='appointment-booking-time-header'>\n\t\t\t\t\t\t\t<div id='appointment-booking-time-date'>\n\t\t\t\t\t\t\t\t{moment(selected.startTime).format('dddd MMMM Do')}\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t{moment(selected.startTime).format('HH:mm')} to {moment(selected.endTime).format('HH:mm')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{selected && (\n\t\t\t\t\t<div id='appointment-bottom-buttons'>\n\t\t\t\t\t\t<Button className={'appointment-button'} onClick={() => this.props.onPrev()} disabled={!prev}>\n\t\t\t\t\t\t\t{dict.back}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{next !== undefined && (\n\t\t\t\t\t\t\t<Button className={'appointment-button'} onClick={() => this.props.onNext()} disabled={!next}>\n\t\t\t\t\t\t\t\t{dict.next}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{book && (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tstyle={{ backgroundColor: 'rgb(5, 155, 29)', color: '#fff' }}\n\t\t\t\t\t\t\t\tonClick={() => this.props.onBookAppointment()}\n\t\t\t\t\t\t\t\tdisabled={false}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{dict.confirm}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default AppointmentNav;\n","import React, { Component } from \"react\";\nimport \"./index.css\";\nimport logo from \"../../images/cm_logo_white_128px.png\";\nimport Loader from \"../util/Loader\";\nimport NoAppointments from \"../util/NoAppointments\";\nimport Button from \"../util/Button\";\nimport AppointmentDate from \"./AppointmentDate\";\nimport AppointmentVerification from \"./AppointmentVerification\";\nimport AppointmentBook from \"./AppointmentBook\";\nimport AppointmentConfirmation from \"./AppointmentConfirmation\";\nimport AppointmentNav from \"./AppointmentNav\";\nimport dictionaryService from \"../../services/dictionaryService\";\nimport appointmentService from \"../../services/appointmentService\";\n\nconst VIEWS = [\"date\", \"verification\", \"book\", \"confirmation\"];\nconst defaultState = {\n\tdict: undefined,\n\tloading: true,\n\tsaving: false,\n\tdone: false,\n\tdate: new Date(),\n\tprev: undefined,\n\tnext: undefined,\n\tavailable: [],\n\tselected: undefined,\n\tappointment: undefined,\n\tview: VIEWS[0],\n\tviews: VIEWS,\n\tviewIndex: 0,\n\tactiveCount: undefined,\n\tnextView: \"verification\",\n\tstore: undefined,\n\tlangCode: \"en\",\n\tuser: undefined,\n};\nclass Appointment extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\t...defaultState,\n\t\t};\n\n\t\tthis.handleSelectAvailable = this.handleSelectAvailable.bind(this);\n\t\tthis.handleLogin = this.handleLogin.bind(this);\n\t\tthis.handleBookAppointment = this.handleBookAppointment.bind(this);\n\t\tthis.handleRefresh = this.handleRefresh.bind(this);\n\t\tthis.handleDateChange = this.handleDateChange.bind(this);\n\t\tthis.handleCloseError = this.handleCloseError.bind(this);\n\t\tthis.handlePrev = this.handlePrev.bind(this);\n\t\tthis.handleNext = this.handleNext.bind(this);\n\t}\n\tasync componentDidMount() {\n\t\tdocument.title = \"Chinemachine / Appointment\";\n\t\tthis.setState({ loading: true });\n\t\ttry {\n\t\t\tconst dict = await dictionaryService.getDictionary();\n\n\t\t\tconst { activeCount } = await appointmentService.getActiveCount();\n\t\t\tthis.setState({ dict, langCode: dict._langCode, activeCount });\n\n\t\t\tawait this.loadAppointAvailabilities();\n\t\t} catch (err) {\n\t\t\tthis.handleError(err);\n\t\t}\n\t\tthis.setState({ loading: false });\n\t}\n\tasync loadAppointAvailabilities() {\n\t\tconsole.log(\"load availabilities\");\n\t\t//this.setState({loading:true})\n\t\ttry {\n\t\t\tconst { date } = this.state;\n\t\t\tconst available = await appointmentService.getByMonth(date.getFullYear(), date.getMonth());\n\t\t\tthis.setState({ available });\n\t\t} catch (err) {\n\t\t\tthis.handleError(err);\n\t\t}\n\t\t//this.setState({loading:false})\n\t}\n\n\thandleSelectAvailable(selected) {\n\t\tthis.setState({ selected }, () => this.handleView(\"date\"));\n\t}\n\tasync handleBookAppointment() {\n\t\tconst { selected, user } = this.state;\n\t\tif (!selected || !user) return this.handleError(\"Not valid appointment!\");\n\n\t\tthis.setState({ saving: true });\n\n\t\ttry {\n\t\t\tconst appointment = await appointmentService.book(user._id, selected._id);\n\t\t\tappointment.user = user;\n\t\t\tthis.setState({ appointment }, () => this.handleView(\"confirmation\"));\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t\tthis.handleError(err);\n\t\t}\n\n\t\tthis.setState({ saving: false });\n\t}\n\tvalidateBooking() {\n\t\treturn true;\n\t}\n\thandleLogin(user) {\n\t\tconsole.log(\"handle login......\", user);\n\t\tconst { appointment } = this.state;\n\t\tif (appointment) appointment.user = user;\n\t\tthis.setState({ user, appointment }, () => {\n\t\t\tthis.handleView(\"book\");\n\t\t});\n\t}\n\thandleView(view) {\n\t\tconsole.log(\"handle view\", view);\n\t\tconst { selected, user } = this.state;\n\t\tif (view === \"date\") this.setState({ prev: undefined, next: selected ? true : false });\n\t\telse if (view === \"verification\") this.setState({ prev: true, next: user ? true : false });\n\t\telse if (view === \"book\") this.setState({ prev: true, next: undefined });\n\t\telse if (view === \"confirmation\") this.setState({ prev: undefined, next: undefined });\n\n\t\tthis.setState({ view });\n\t}\n\thandlePrev() {\n\t\tlet { viewIndex } = this.state;\n\t\tconst newViewIndex = --viewIndex;\n\t\tthis.setState({ viewIndex: newViewIndex }, () => {\n\t\t\tthis.handleView(VIEWS[newViewIndex]);\n\t\t});\n\t}\n\thandleNext() {\n\t\tlet { view, viewIndex, selected, user } = this.state;\n\t\tconst newViewIndex = ++viewIndex;\n\n\t\tif (view === \"date\" && !selected) return;\n\t\telse if (view === \"verification\" && !user) return;\n\t\telse if (view === \"book\" && (!selected || user)) return;\n\t\telse if (view === \"confirmation\") return;\n\n\t\tthis.setState({ viewIndex: newViewIndex }, () => {\n\t\t\tthis.handleView(VIEWS[newViewIndex]);\n\t\t});\n\t}\n\thandleDateChange(date) {\n\t\tthis.setState({ date });\n\t}\n\thandleError(err) {\n\t\tconsole.log(err);\n\t\tconst error =\n\t\t\terr.response && err.response.data\n\t\t\t\t? err.response.data.message\n\t\t\t\t: err.message || err.toString() || err;\n\t\tthis.setState({ error: error || \"Unknown error\" });\n\t}\n\thandleCloseError() {\n\t\tthis.setState({ error: undefined });\n\t}\n\thandleRefresh() {\n\t\tconst { date } = this.state;\n\t\tthis.setState({ ...defaultState, date }, () => this.componentDidMount());\n\t}\n\trender() {\n\t\tconst {\n\t\t\tdate,\n\t\t\tloading,\n\t\t\tsaving,\n\t\t\tselected,\n\t\t\tappointment,\n\t\t\tactiveCount,\n\t\t\tview,\n\t\t\tprev,\n\t\t\tnext,\n\t\t\tuser,\n\t\t\terror,\n\t\t\tdict,\n\t\t\tlangCode,\n\t\t} = this.state;\n\t\tconsole.log(selected);\n\n\t\tif (loading) return <Loader />;\n\n\t\treturn (\n\t\t\t<div id=\"appointment\">\n\t\t\t\t<div id=\"appointment-header\">\n\t\t\t\t\t<div id=\"appointment-header-logo-wrap\">\n\t\t\t\t\t\t<a href=\"/\">\n\t\t\t\t\t\t\t<img src={logo} alt=\"Chinemachine\" id=\"appointment-header-logo\" />\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<h2>{dict.bookAppointment}</h2>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"appointment-border\"></div>\n\t\t\t\t<div id=\"appointment-content-wrap\">\n\t\t\t\t\t<div id=\"appointment-content\">\n\t\t\t\t\t\t{view === \"date\" ? (\n\t\t\t\t\t\t\t<AppointmentDate\n\t\t\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\t\t\tlangCode={langCode}\n\t\t\t\t\t\t\t\tdate={date}\n\t\t\t\t\t\t\t\tselected={selected}\n\t\t\t\t\t\t\t\tonDateChange={this.handleDateChange}\n\t\t\t\t\t\t\t\tonSelectAvailable={this.handleSelectAvailable}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : view === \"verification\" ? (\n\t\t\t\t\t\t\t<AppointmentVerification type=\"login\" onLogin={this.handleLogin} />\n\t\t\t\t\t\t) : view === \"book\" ? (\n\t\t\t\t\t\t\t<AppointmentBook selected={selected} dict={dict} user={user} />\n\t\t\t\t\t\t) : view === \"confirmation\" ? (\n\t\t\t\t\t\t\t<AppointmentConfirmation dict={dict} appointment={appointment} />\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{view !== \"confirmation\" && (\n\t\t\t\t\t\t\t<AppointmentNav\n\t\t\t\t\t\t\t\tselected={selected}\n\t\t\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\t\t\tprev={prev}\n\t\t\t\t\t\t\t\tnext={next}\n\t\t\t\t\t\t\t\tbook={view === \"book\"}\n\t\t\t\t\t\t\t\tonPrev={this.handlePrev}\n\t\t\t\t\t\t\t\tonNext={this.handleNext}\n\t\t\t\t\t\t\t\tonBookAppointment={this.handleBookAppointment}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{loading && <Loader />}\n\t\t\t\t\t\t{activeCount === 0 && <NoAppointments dict={dict} />}\n\t\t\t\t\t\t{saving && <Loader message={dict.savingApointment} />}\n\t\t\t\t\t\t{error && (\n\t\t\t\t\t\t\t<div id=\"appointment-error-wrap\">\n\t\t\t\t\t\t\t\t<div id=\"appointment-error\">\n\t\t\t\t\t\t\t\t\t<div id=\"appointment-error-header\">Oh no...</div>\n\t\t\t\t\t\t\t\t\t<div id=\"appointment-error-message\">{error}</div>\n\t\t\t\t\t\t\t\t\t<div id=\"appointment-error-close\">\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tclassName={\"appointment-button\"}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleCloseError}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{dict.back}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default Appointment;\n","import { axios } from './';\n\nexport default {\n\tget: async (userId) => {\n\t\tlet res = await axios.get('/api/user/' + userId);\n\t\treturn res.data;\n\t},\n\tgetAll: async () => {\n\t\tlet res = await axios.get('/api/user');\n\t\treturn res.data || [];\n\t},\n\tgetAppointments: async () => {\n\t\tlet res = await axios.get('/api/user/appointmens/all');\n\t\treturn res.data || [];\n\t},\n\tadd: async (params) => {\n\t\tlet res = await axios.post('/api/user', params);\n\t\treturn res.data;\n\t},\n\tupdate: async (id, params) => {\n\t\tlet res = await axios.patch('/api/user/' + id, params);\n\t\treturn res.data;\n\t},\n\tdelete: async (id) => {\n\t\tlet res = await axios.delete('/api/user/' + id);\n\t\treturn res.data;\n\t},\n\tdeleteAll: async () => {\n\t\tlet res = await axios.delete('/api/user');\n\t\treturn res.data;\n\t},\n\tsearch: async (term) => {\n\t\tlet res = await axios.get('/api/user/util/search/' + term);\n\t\treturn res.data || [];\n\t},\n};\n","import { axios } from \"./\";\n\nexport default {\n\tget: async (id) => {\n\t\tlet res = await axios.get(\"/api/appointment/\" + id);\n\t\treturn res.data;\n\t},\n\tgetAll: async () => {\n\t\tlet res = await axios.get(\"/api/appointment\");\n\t\treturn res.data || [];\n\t},\n\tgetByDate: async (year, month, date, storeId) => {\n\t\tconst path =\n\t\t\t\"/api/appointment/\" +\n\t\t\tyear +\n\t\t\t(month !== undefined ? \"/\" + month : \"\") +\n\t\t\t(month !== undefined && date ? \"/\" + date : \"\") +\n\t\t\t(storeId ? \"/store/\" + storeId : \"\");\n\t\tlet res = await axios.get(path);\n\t\treturn res.data || [];\n\t},\n\tgetByMonth: async (year, month, storeId) => {\n\t\tlet res = await axios.get(\n\t\t\t\"/api/appointment/\" + year + \"/\" + month + (storeId ? \"/store/\" + storeId : \"\")\n\t\t);\n\t\treturn res.data || [];\n\t},\n\tgetAllByMonth: async (year, month) => {\n\t\tlet res = await axios.get(\"/api/appointment/\" + year + \"/\" + month);\n\t\treturn res.data || [];\n\t},\n\tgetAllByWeek: async (year, week) => {\n\t\tlet res = await axios.get(\"/api/appointment/util/byweek/\" + year + \"/\" + week);\n\t\treturn res.data || [];\n\t},\n\tgetAllByUser: async (userId) => {\n\t\tlet res = await axios.get(\"/api/appointment/user/\" + userId);\n\t\treturn res.data || [];\n\t},\n\tgetData: async (sectionId, langCode) => {\n\t\tlet res = await axios.get(\"/api/appointment/\" + sectionId + \"/\" + langCode);\n\t\treturn res.data || {};\n\t},\n\tgetActiveCount: async () => {\n\t\tlet res = await axios.get(\"/api/appointment/util/count\");\n\t\treturn res.data || {};\n\t},\n\tadd: async (params) => {\n\t\tlet res = await axios.post(\"/api/appointment\", params);\n\t\treturn res.data;\n\t},\n\tupdate: async (id, appointment) => {\n\t\tlet res = await axios.patch(\"/api/appointment/\" + id, appointment);\n\t\treturn res.data;\n\t},\n\tdelete: async (sectionId) => {\n\t\tlet res = await axios.delete(\"/api/appointment/\" + sectionId);\n\t\treturn res.data;\n\t},\n\tdeleteAll: async () => {\n\t\tlet res = await axios.delete(\"/api/appointment\");\n\t\treturn res.data;\n\t},\n\tcancel: async (userId, appointmentId) => {\n\t\tlet res = await axios.post(\n\t\t\t\"/api/appointment/user/\" + userId + \"/appointment/\" + appointmentId + \"/cancel\"\n\t\t);\n\t\treturn res.data;\n\t},\n\tbook: async (userId, appointmentId) => {\n\t\tlet res = await axios.post(\n\t\t\t\"/api/appointment/user/\" + userId + \"/appointment/\" + appointmentId + \"/book\"\n\t\t);\n\t\treturn res.data;\n\t},\n\tbookInternal: async (userId, appointmentId) => {\n\t\tlet res = await axios.post(\n\t\t\t\"/api/appointment/user/\" + userId + \"/appointment/\" + appointmentId + \"/bookinternal\"\n\t\t);\n\t\treturn res.data;\n\t},\n};\n"],"sourceRoot":""}