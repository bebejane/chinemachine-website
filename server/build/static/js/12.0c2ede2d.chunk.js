(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[12],{100:function(e,t,n){},101:function(e,t,n){},120:function(e,t,n){"use strict";n.r(t);var r=n(42),a=n.n(r),i=n(43),o=n(9),s=n(10),c=n(16),u=n(12),l=n(11),p=n(1),d=n.n(p),h=(n(93),n(47)),f=n(17),m=(n(94),n(20)),v=n.n(m),g=n(45),b=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={dict:{},redirect:e.redirect,loading:!0,error:void 0,form:{}},r}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,e.next=4,h.a.getDictionary("en");case 4:t=e.sent,this.setState({dict:t}),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:return e.prev=10,e.next=13,g.a.getUser();case 13:(n=e.sent)?this.setState({user:n}):console.log("user not logged in"),e.next=20;break;case 17:e.prev=17,e.t1=e.catch(10),this.setState({getUser:!1});case 20:this.setState({loading:!1});case 21:case"end":return e.stop()}}),e,this,[[1,8],[10,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadDictionary",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.getDictionary("en");case 3:t=e.sent,this.setState({dict:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.props.onError(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleLogout",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.logout();case 3:this.props.onChange("login"),this.setState({user:void 0}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.props.onError(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.loading,n=this.props,r=n.header,a=n.children,i=n.type,o=n.error,s=n.noLogo,c=n.dict,u="login"!==i?d.a.createElement("div",{id:"container-logout",onClick:function(){return e.props.onChange("login")}},c.login):d.a.createElement("div",{id:"container-signup",onClick:function(){return e.props.onChange("signup")}},c.signup);return t?d.a.createElement(f.a,null):d.a.createElement("div",{id:"container-wrapper"},d.a.createElement("div",{id:"container-top"},d.a.createElement("div",{id:"container-spacer"}),u),d.a.createElement("div",{id:"container-header-border"}),d.a.createElement("div",{id:"container-header"},r,d.a.createElement("div",{id:"container-header-logo-wrap"},!s&&d.a.createElement("a",{href:"/"},d.a.createElement("img",{alt:"Chinemachine",src:v.a,id:"container-header-logo"})))),d.a.createElement("div",{id:"container-content"},a),o&&d.a.createElement("div",{id:"container-error"},o),t&&d.a.createElement(f.a,null))}}]),n}(p.Component),y=(n(95),n(44)),k=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={dict:{},redirect:e.redirect,loading:!0,getUser:!1,loggingIn:!1,error:void 0,user:void 0,form:{email:"",password:""}},r.handleSubmit=r.handleSubmit.bind(Object(c.a)(r)),r.handleFormChange=r.handleFormChange.bind(Object(c.a)(r)),r.handleLogout=r.handleLogout.bind(Object(c.a)(r)),r}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,e.next=4,h.a.getDictionary("en");case 4:t=e.sent,this.setState({dict:t}),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:return e.prev=10,e.next=13,g.a.getUser();case 13:(n=e.sent)?(console.log("user already logged in"),this.setState({getUser:!0,user:n},(function(){r.handleLogin(n)}))):console.log("user not logged in"),e.next=20;break;case 17:e.prev=17,e.t1=e.catch(10),this.setState({getUser:!1});case 20:this.setState({loading:!1});case 21:case"end":return e.stop()}}),e,this,[[1,8],[10,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){}},{key:"loadDictionary",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.getDictionary("en");case 3:t=e.sent,this.setState({dict:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.props.onError(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleFormChange",value:function(e){var t=this.state.form;t[e.target.id]=e.target.value,this.setState({form:t})}},{key:"handleSubmit",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=this.state.form,this.setState({error:void 0,loggingIn:!0}),e.prev=3,this.props.onSubmit(),e.next=7,g.a.login(n.email,n.password);case 7:r=e.sent,setTimeout((function(){i.setState({user:r,loggingIn:!1,getUser:!0},(function(){return i.handleLogin(r)}))}),500),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),this.setState({loggingIn:!1}),this.props.onError(e.t0);case 15:case"end":return e.stop()}}),e,this,[[3,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleLogin",value:function(e){this.props.onLogin&&this.props.onLogin(e||this.state.user)}},{key:"handleLogout",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.logout();case 3:this.setState({getUser:!1}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.props.onError(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.form,n=e.loading,r=e.loggingIn,a=e.getUser,i=this.props.dict;return d.a.createElement(d.a.Fragment,null,d.a.createElement("form",{onSubmit:this.handleSubmit},d.a.createElement("input",{id:"email",name:"email",autoFocus:!1,placeholder:i.email+"...",type:"text",value:t.email,onChange:this.handleFormChange}),d.a.createElement("input",{id:"password",name:"password",placeholder:i.password+"...",type:"password",value:t.password,onChange:this.handleFormChange}),d.a.createElement(y.a,{className:"button-wide",type:"submit",loading:r},"Okey")),r&&d.a.createElement(f.a,{message:i.loggingIn}),a&&d.a.createElement("div",{id:"login-loggedin"},d.a.createElement("div",{id:"login-loggedin-message"},i.youAreLoggedIn)),n&&d.a.createElement(f.a,null))}}]),n}(p.Component),w=(n(96),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={loading:!0,error:void 0},r}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.props.onSubmit(),e.next=4,g.a.logout();case 4:this.setState({loading:!1}),this.props.onLogout(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.props.onError(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.loading,t=this.props.dict;return e?d.a.createElement(f.a,{message:t.loggingOut+"..."}):d.a.createElement("div",null,t.youAreLoggedIn)}}]),n}(p.Component)),S=(n(97),n(155),n(166)),E=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={dict:{},isSignedUp:!1,loading:!1,signingUp:!1,error:void 0,token:e.token,form:{firstName:"",lastName:"",email:"",email2:"",phone:"",password:"",password2:""}},r.handleSubmit=r.handleSubmit.bind(Object(c.a)(r)),r.handleFormChange=r.handleFormChange.bind(Object(c.a)(r)),r}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.loadDictionary()}},{key:"loadDictionary",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.getDictionary("en");case 3:t=e.sent,this.setState({dict:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.props.onError(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleFormChange",value:function(e){var t=this.state.form;t[e.target.id]=e.target.value,this.setState({form:t})}},{key:"handlePhoneChange",value:function(e){var t=this.state.form;t.phone=e,this.setState({form:t})}},{key:"handleSubmit",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("saving signup"),t.preventDefault(),n=this.state.form,this.setState({signingUp:!0,error:void 0}),e.prev=4,console.log("signing up no..."),this.props.onSubmit(),e.next=9,g.a.signup(n);case 9:r=e.sent,console.log("SIGNED UP"),this.setState({user:r},(function(){return i.handleSignUp(r)})),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(4),console.log("was errors"),this.props.onError(e.t0);case 18:setTimeout((function(){i.setState({signingUp:!1})}),300);case 19:case"end":return e.stop()}}),e,this,[[4,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleSignUp",value:function(e){if(console.log("signed up",e),!e)return this.props.onError("User signed in is empty");this.setState({isSignedUp:!0,user:e,error:void 0}),this.props.onSignUp&&this.props.onSignUp(e)}},{key:"render",value:function(){var e=this,t=this.state,n=t.form,r=t.signingUp,a=t.error,i=this.props.dict;return d.a.createElement(d.a.Fragment,null,d.a.createElement("form",{onSubmit:this.handleSubmit},d.a.createElement("input",{id:"firstName",value:n.firstName,onChange:this.handleFormChange,autoComplete:"off",placeholder:i.firstName+"...",name:"firstName",type:"text"}),d.a.createElement("input",{id:"lastName",value:n.lastName,onChange:this.handleFormChange,autoComplete:"off",placeholder:i.lastName+"...",name:"firstName",type:"text"}),d.a.createElement("input",{id:"email",value:n.email,onChange:this.handleFormChange,autoComplete:"off",placeholder:i.email+"...",name:"email",type:"text"}),d.a.createElement("input",{id:"email2",value:n.email2,onChange:this.handleFormChange,autoComplete:"off",placeholder:i.reType+" "+i.email+"...",name:"email2",type:"text"}),d.a.createElement("input",{id:"password",value:n.password,onChange:this.handleFormChange,autoComplete:"off",placeholder:i.password+"...",name:"password",type:"password"}),d.a.createElement("input",{id:"password2",value:n.password2,onChange:this.handleFormChange,autoComplete:"off",placeholder:i.reType+" "+i.password+"...",name:"password",type:"password"}),d.a.createElement(S.a,{placeholder:i.phone+"...",value:n.phone,defaultCountry:"FR",onChange:function(t){return e.handlePhoneChange(t)}}),d.a.createElement(y.a,{type:"submit",loading:r},"Okey")),r&&d.a.createElement(f.a,{message:i.signingUp}),a&&d.a.createElement("div",{id:"signup-error"},a))}}]),n}(p.Component),x=(n(98),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={dict:{},loading:!0,resetting:!1,success:!1,error:void 0,user:void 0,form:{email:""}},r.handleSubmit=r.handleSubmit.bind(Object(c.a)(r)),r.handleFormChange=r.handleFormChange.bind(Object(c.a)(r)),r}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"handleFormChange",value:function(e){var t=this.state.form;t[e.target.id]=e.target.value,this.setState({form:t})}},{key:"handleSubmit",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=this.state.form,this.setState({error:void 0,resetting:!0,success:!1}),e.prev=3,this.props.onSubmit(),e.next=7,g.a.requestPasswordReset(n.email);case 7:setTimeout((function(){return r.setState({resetting:!1,success:!0})}),500),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),this.setState({resetting:!1,success:!1}),this.props.onError(e.t0);case 14:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.form,n=e.success,r=e.resetting,a=this.props.dict;return d.a.createElement(d.a.Fragment,null,d.a.createElement("form",{onSubmit:this.handleSubmit},n?d.a.createElement("div",{id:"reset-password-message-done"},a.checkEmailForPasswordResetLink):d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{id:"reset-password-message"},a.fillInEmailPasswordReset),d.a.createElement("input",{id:"email",name:"email",autoFocus:!0,placeholder:a.email+"...",type:"text",value:t.email,onChange:this.handleFormChange}),d.a.createElement(y.a,{type:"submit",loading:r},"Okey"))),r&&d.a.createElement(f.a,null))}}]),n}(p.Component)),O=(n(99),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={token:e.token,loading:!1,updating:!1,success:!1,error:void 0,user:void 0,form:{newpassword:"",newpassword2:"",token:e.token}},r.handleSubmit=r.handleSubmit.bind(Object(c.a)(r)),r.handleFormChange=r.handleFormChange.bind(Object(c.a)(r)),r}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"handleFormChange",value:function(e){var t=this.state.form;t[e.target.id]=e.target.value,this.setState({form:t})}},{key:"handleSubmit",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),(n=this.state.form).newpassword===n.newpassword2){e.next=4;break}return e.abrupt("return",this.props.onError({message:"Password does not match"}));case 4:return this.setState({error:void 0,updating:!0,success:!1}),e.prev=5,this.props.onSubmit(),e.next=9,g.a.updatePassword(n.token,n.newpassword,n.newpassword2);case 9:setTimeout((function(){return r.setState({updating:!1,success:!0})}),500),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),this.setState({updating:!1,success:!1}),this.props.onError(e.t0);case 16:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.form,n=e.loading,r=e.success,a=e.updating,i=this.props.dict;return d.a.createElement(d.a.Fragment,null,r?d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{id:"reset-password-message"},i.yourPasswordWasReset)):d.a.createElement("form",{onSubmit:this.handleSubmit},d.a.createElement("input",{id:"newpassword",name:"newpassword",autoFocus:!0,placeholder:i.newPassword+"...",type:"password",value:t.newpassword,onChange:this.handleFormChange}),d.a.createElement("input",{id:"newpassword2",name:"newpassword2",autoFocus:!1,placeholder:i.reType+" "+i.newPassword+"...",type:"password",value:t.newpassword2,onChange:this.handleFormChange}),d.a.createElement("input",{id:"token",name:"token",type:"hidden",value:t.token,onChange:this.handleFormChange}),d.a.createElement(y.a,{type:"submit",loading:n},i.send)),a&&d.a.createElement(f.a,null),n&&d.a.createElement(f.a,null))}}]),n}(p.Component)),C=(n(100),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={dict:{},token:e.token,verified:!1,verifying:!1,loading:!1,error:void 0,form:{code:"",token:e.token||""}},r.formRef=d.a.createRef(),r.handleSubmit=r.handleSubmit.bind(Object(c.a)(r)),r.handleFormChange=r.handleFormChange.bind(Object(c.a)(r)),r}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadDictionary();case 2:this.state.token&&this.handleSubmit();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadDictionary",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.getDictionary();case 3:t=e.sent,this.setState({dict:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.props.onError(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleFormChange",value:function(e){var t=this.state.form;t[e.target.id]=e.target.value,this.setState({form:t})}},{key:"handleSubmit",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("verifying signup"),t&&t.preventDefault(),n=this.state.form,e.prev=3,this.setState({verifying:!0,verified:!1,error:void 0}),this.props.onSubmit(),e.next=8,g.a.verify(n.token||n.code);case 8:this.setState({verified:!0,verifying:!1}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),this.props.onError(e.t0),this.setState({verifying:!1,verified:!1,error:e.t0});case 15:case"end":return e.stop()}}),e,this,[[3,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.form,r=t.verifying,a=t.verified,i=t.error,o=t.user,s=this.props.dict;return r?d.a.createElement(f.a,{message:"verifying account"}):d.a.createElement(d.a.Fragment,null,!i&&a&&d.a.createElement("div",{id:"verify-finished-message"},s.accountIsVerified,d.a.createElement("br",null),d.a.createElement("div",{id:"verify-finished-gotologin"},d.a.createElement(y.a,{onClick:function(){return e.props.onVerification(o)}},s.login))),!a&&d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{id:"verify-finished-message"},s.checkEmailToVerifyAccount),d.a.createElement("form",{ref:this.formRef,onSubmit:this.handleSubmit},d.a.createElement("input",{id:"code",autoComplete:"off",autoFocus:!1,value:n.code,placeholder:s.securityCode+"...",name:"code",type:"number",onChange:this.handleFormChange}),d.a.createElement("input",{id:"token",name:"token",type:"hidden",value:n.token,onChange:this.handleFormChange}),d.a.createElement(y.a,{type:"submit",loading:r},"Okey"))))}}]),n}(p.Component)),j=(n(101),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={dict:{},token:e.token,resent:!1,resending:!1,loading:!1,error:void 0,form:{email:""}},r.formRef=d.a.createRef(),r.handleSubmit=r.handleSubmit.bind(Object(c.a)(r)),r.handleFormChange=r.handleFormChange.bind(Object(c.a)(r)),r}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadDictionary();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadDictionary",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.getDictionary("en");case 3:t=e.sent,this.setState({dict:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.props.onError(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleFormChange",value:function(e){var t=this.state.form;t[e.target.id]=e.target.value,this.setState({form:t})}},{key:"handleSubmit",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("verifying signup"),t&&t.preventDefault(),n=this.state.form,e.prev=3,this.props.onSubmit(),this.setState({resending:!0,resent:!1,error:void 0}),e.next=8,g.a.reverify(n.email);case 8:this.setState({resending:!1,resent:!0}),this.props.onReCode(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),this.setState({resending:!1}),this.props.onError(e.t0);case 16:case"end":return e.stop()}}),e,this,[[3,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.form,r=t.resent,a=t.resending,i=t.user,o=this.props.dict;return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{id:"recode-enter-email"},o.enterEmailForCode),r?d.a.createElement("div",{id:"recode-finished-message"},o.accountIsVerified,d.a.createElement("br",null),d.a.createElement(y.a,{id:"recode-finished-gotologin",onClick:function(){return e.props.onVerification(i)}},o.login)):d.a.createElement("form",{ref:this.formRef,onSubmit:this.handleSubmit},d.a.createElement("input",{id:"email",autoComplete:"off",autoFocus:!1,value:n.email,placeholder:o.email+"...",name:"email",type:"text",onChange:this.handleFormChange}),d.a.createElement(y.a,{type:"submit",loading:a},"Okey")),a&&d.a.createElement(f.a,{message:o.reSendingVerificationCode}))}}]),n}(p.Component)),F=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;Object(o.a)(this,n),r=t.call(this,e);var a=new URLSearchParams(e.location?e.location.search:""),i=e.location&&e.location.pathname.replace("/verification","")?e.location.pathname.replace("/verification/",""):e.type||"login";return r.state={loading:!1,type:i,dict:{},noBackground:e.noBackground,error:a.get("error")||void 0,redirect:a.get("redirect"),token:a.get("token"),types:{login:"Login",logout:"Log out",signup:"Sign Up",verify:"Verify",reset:"Reset password",update:"Change password",recode:"Verify account"}},r.handleLogin=r.handleLogin.bind(Object(c.a)(r)),r.handleLogout=r.handleLogout.bind(Object(c.a)(r)),r.handleSignUp=r.handleSignUp.bind(Object(c.a)(r)),r}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.loadDictionary()}},{key:"loadDictionary",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.getDictionary();case 2:t=e.sent,n={login:t.login,logout:t.logout,signup:t.signup,verify:t.verify,reset:t.resetPassword,update:t.changePassword,recode:t.verifyAccount},this.setState({dict:t,types:n});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){this.setState({error:void 0})}},{key:"handleError",value:function(e){var t=e?e.response&&e.response.data?e.response.data.message:e.message||e.toString():void 0;this.setState({error:t})}},{key:"handleShowType",value:function(e,t){var n=this;console.log(e,t),this.setState({type:e,user:t,error:void 0},(function(){document.title="Chinemachine / "+n.state.types[n.state.type]}))}},{key:"handleShowLogin",value:function(e){this.setState({component:k,user:e})}},{key:"handleLogin",value:function(e){this.setState({user:e,error:void 0}),this.props.onLogin&&this.props.onLogin(e),this.redirect(),console.log("logged in")}},{key:"handleLogout",value:function(){this.setState({user:null,type:"login",error:void 0}),this.props.onLogout&&this.props.onLogout(),this.redirect(),console.log("logged out")}},{key:"handleSignUp",value:function(e){console.log("NEW SIGNUP",e),this.setState({user:e,error:void 0}),this.props.onSignUp&&this.props.onSignUp(),this.handleShowType("verify"),console.log("signed up")}},{key:"handleVerification",value:function(e){console.log("verified account"),this.setState({error:void 0}),this.props.onVerification&&this.props.onVerification(),this.handleShowType("login")}},{key:"handleUpdated",value:function(e){console.log(e),this.handleShowType("login")}},{key:"redirect",value:function(){console.log("REDIRECT",this.state.redirect),this.state.redirect&&this.props.history.push(this.state.redirect)}},{key:"render",value:function(){var e=this,t=this.state,n=t.user,r=t.type,a=t.types,i=t.loading,o=t.redirect,s=t.noBackground,c=t.token,u=t.dict,l=t.error,p=this.props.noLogo;return d.a.createElement("div",{id:"verification",style:s?{background:"none"}:void 0},d.a.createElement(b,{header:a[r],type:r,error:l,noLogo:p,dict:u,onChange:function(t){return e.handleShowType(t)}},"login"===r?d.a.createElement(k,{key:"login",email:n&&n.email,onLogin:this.handleLogin,redirect:o,dict:u,onError:function(t){return e.handleError(t)},onSubmit:function(){return e.handleSubmit()}}):"logout"===r?d.a.createElement(w,{key:"logout",email:n&&n.email,onLogout:this.handleLogout,redirect:o,dict:u,onError:function(t){return e.handleError(t)},onSubmit:function(){return e.handleSubmit()}}):"reset"===r?d.a.createElement(x,{key:"reset",email:n&&n.email,token:c,dict:u,onError:function(t){return e.handleError(t)},onSubmit:function(){return e.handleSubmit()}}):"update"===r?d.a.createElement(O,{key:"update",email:n&&n.email,token:c,dict:u,onUpdated:function(){return e.handleUpdated()},onError:function(t){return e.handleError(t)},onSubmit:function(){return e.handleSubmit()}}):"verify"===r?d.a.createElement(C,{key:"update",token:c,dict:u,onVerification:function(t){return e.handleVerification(t)},onError:function(t){return e.handleError(t)},onSubmit:function(){return e.handleSubmit()}}):"recode"===r?d.a.createElement(j,{key:"recode",dict:u,onReCode:function(){return e.handleShowType("verify")},onError:function(t){return e.handleError(t)},onSubmit:function(){return e.handleSubmit()}}):"signup"===r?d.a.createElement(E,{key:"signup",dict:u,onSignUp:this.handleSignUp,redirect:o,onError:function(t){return e.handleError(t)},onSubmit:function(){return e.handleSubmit()}}):d.a.createElement("div",null,"Invalid type"),i&&d.a.createElement(f.a,null)),d.a.createElement("div",{id:"verification-bubbles"},d.a.createElement("div",{className:"verification-bubble",onClick:function(){return e.handleShowType("reset")}},u.forgotPassword),d.a.createElement("div",{className:"verification-bubble",onClick:function(){return e.handleShowType("recode")}},u.verifyAccount)))}}]),n}(p.Component);t.default=F},44:function(e,t,n){"use strict";var r=n(9),a=n(10),i=n(12),o=n(11),s=n(1),c=n.n(s),u=(n(71),n(21)),l=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={},a}return Object(a.a)(n,[{key:"handleClick",value:function(e){if(this.state.loading)return e.preventDefault();this.props.onClick&&this.props.onClick(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.type,r=t.style,a=t.disabled,i=t.loading,o=t.value;return c.a.createElement("button",{className:"button",style:r||void 0,type:n,disabled:a||void 0,onClick:function(t){return e.handleClick(t)}},i?c.a.createElement(u.a,{className:"button-loading"}):this.props.children||o,"\u200a")}}]),n}(s.Component);t.a=l},45:function(e,t,n){"use strict";var r=n(42),a=n.n(r),i=n(43),o=n(46);t.a={getUser:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/status");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),login:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/verification/login",{email:t,password:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),logout:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/verification/logout",{email:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signup:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/verification/signup",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),verify:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/verification/verify/"+t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),reverify:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/verification/reverify/"+t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),requestPasswordReset:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/verification/reset/"+t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updatePassword:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/verification/update",{token:t,password:n,password2:r});case 2:return i=e.sent,e.abrupt("return",i.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}},46:function(e,t,n){"use strict";var r=n(55),a=n.n(r);n.d(t,"a",(function(){return a.a})),a.a.defaults.withCredentials=!0},47:function(e,t,n){"use strict";var r=n(42),a=n.n(r),i=n(43),o=n(46);t.a={get:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/api/dictionary/id/"+t);case 2:return n=e.sent,e.abrupt("return",n.data||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAll:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/api/dictionary/all");case 2:return t=e.sent,e.abrupt("return",t.data||[]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getDictionary:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/api/dictionary");case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),add:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/api/dictionary/",{term:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.patch("/api/dictionary/"+t._id,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateMany:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.patch("/api/dictionary",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),delete:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.delete("/api/dictionary/"+t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteAll:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.delete("/api/dictionary");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}},71:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}}]);
//# sourceMappingURL=12.0c2ede2d.chunk.js.map