{"version":3,"sources":["components/verification/Container.js","components/verification/Login.js","components/verification/Logout.js","components/verification/Signup.js","components/verification/Reset.js","components/verification/Update.js","components/verification/Verify.js","components/verification/ReCode.js","components/verification/index.js","components/util/Button.js","services/verificationService.js","services/index.js","services/dictionaryService.js","components/account/AccountAppointments.js","components/account/AccountSettings.js","components/account/index.js","services/userService.js","services/appointmentService.js"],"names":["i","Container","props","state","dict","redirect","loading","error","undefined","form","this","setState","dictionaryService","getDictionary","verificationService","getUser","user","console","log","onError","logout","onChange","header","children","type","noLogo","nav","id","onClick","login","signup","Loader","href","alt","src","logo","Component","Login","loggingIn","email","password","handleSubmit","bind","handleFormChange","handleLogout","handleLogin","e","target","value","preventDefault","onSubmit","setTimeout","onLogin","Fragment","name","autoFocus","placeholder","Button","className","message","youAreLoggedIn","Logout","onLogout","loggingOut","Signup","isSignedUp","signingUp","token","firstName","lastName","email2","phone","password2","loadDictionary","handleSignUp","onSignUp","autoComplete","reType","defaultCountry","val","handlePhoneChange","Reset","resetting","success","requestPasswordReset","checkEmailForPasswordResetLink","fillInEmailPasswordReset","Update","updating","newpassword","newpassword2","updatePassword","yourPasswordWasReset","newPassword","send","Verify","verified","verifying","code","formRef","React","createRef","verify","accountIsVerified","onVerification","checkEmailToVerifyAccount","ref","securityCode","ReCode","resent","resending","reverify","onReCode","enterEmailForCode","reSendingVerificationCode","Verification","searchParams","URLSearchParams","location","search","pathname","replace","noBackground","get","types","reset","update","recode","resetPassword","changePassword","verifyAccount","err","response","data","toString","document","title","component","handleShowType","history","push","style","background","key","handleError","onUpdated","handleUpdated","handleVerification","forgotPassword","disabled","handleClick","axios","res","post","params","tokenOrCode","defaults","withCredentials","getAll","langCode","add","term","patch","_id","updateMany","dictionary","items","delete","deleteAll","AccountAppointments","onRetry","componentDidMount","AccountSettings","SECTIONS","icon","BiHome","BiStore","HOME_SECTION","Account","sections","appointments","cancelling","updatingAccount","handleUpdateAccount","Error","appointmentService","getAllByUser","_langCode","sectionId","handleNavigation","listen","event","section","filter","sec","updated","userService","updatedUser","appointment","a","cancel","deleteSection","showDeleteSectionModal","showLogin","status","myAppointments","map","app","idx","moment","startTime","format","startDate","endDate","endTime","formatAppointmentTime","store","address","postalCode","city","handleCancelAppointment","length","noAppointmentsBooked","myAccount","save","role","userId","getAppointments","getByDate","year","month","date","storeId","path","getByMonth","getAllByMonth","getAllByWeek","week","getData","getActiveCount","appointmentId","book","bookInternal"],"mappings":"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","file":"static/js/11.7bbce593.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport './Container.css';\nimport logo from '../../images/cm_logo_white_128px.png';\nimport verificationService from '../../services/verificationService';\nimport dictionaryService from '../../services/dictionaryService';\nimport Loader from '../util/Loader';\n\nclass Container extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdict: {},\n\t\t\tredirect: props.redirect,\n\t\t\tloading: true,\n\t\t\terror: undefined,\n\t\t\tform: {},\n\t\t};\n\t}\n\tasync componentDidMount() {\n\t\tthis.setState({ loading: true });\n\n\t\ttry {\n\t\t\tconst dict = await dictionaryService.getDictionary('en');\n\t\t\tthis.setState({ dict });\n\t\t} catch (err) {}\n\n\t\ttry {\n\t\t\tconst user = await verificationService.getUser();\n\n\t\t\tif (user) this.setState({ user });\n\t\t\telse console.log('user not logged in');\n\t\t} catch (err) {\n\t\t\tthis.setState({ getUser: false });\n\t\t}\n\t\tthis.setState({ loading: false });\n\t}\n\tasync loadDictionary() {\n\t\ttry {\n\t\t\tconst dict = await dictionaryService.getDictionary('en');\n\t\t\tthis.setState({ dict });\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\tasync handleLogout() {\n\t\ttry {\n\t\t\tawait verificationService.logout();\n\t\t\tthis.props.onChange('login');\n\t\t\tthis.setState({ user: undefined });\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\trender() {\n\t\tconst { loading } = this.state;\n\t\tconst { header, children, type, error, noLogo, dict } = this.props;\n\t\tconst nav =\n\t\t\ttype !== 'login' ? (\n\t\t\t\t<div id='container-logout' onClick={() => this.props.onChange('login')}>\n\t\t\t\t\t{dict.login}\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<div id='container-signup' onClick={() => this.props.onChange('signup')}>\n\t\t\t\t\t{dict.signup}\n\t\t\t\t</div>\n\t\t\t);\n\n\t\tif (loading) return <Loader />;\n\n\t\treturn (\n\t\t\t<div id='container-wrapper'>\n\t\t\t\t<div id='container-top'>\n\t\t\t\t\t<div id='container-spacer'></div>\n\t\t\t\t\t{nav}\n\t\t\t\t</div>\n\t\t\t\t<div id='container-header-border'></div>\n\t\t\t\t<div id='container-header'>\n\t\t\t\t\t{header}\n\t\t\t\t\t<div id='container-header-logo-wrap'>\n\t\t\t\t\t\t{!noLogo && (\n\t\t\t\t\t\t\t<a href='/'>\n\t\t\t\t\t\t\t\t<img alt='Chinemachine' src={logo} id='container-header-logo' />\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div id='container-content'>{children}</div>\n\t\t\t\t{error && <div id='container-error'>{error}</div>}\n\t\t\t\t{loading && <Loader />}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Container;\n","import React, { Component } from 'react';\nimport './Login.css';\nimport verificationService from '../../services/verificationService';\nimport dictionaryService from '../../services/dictionaryService';\nimport Loader from '../util/Loader';\nimport Button from '../util/Button';\n\nclass Login extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdict: {},\n\t\t\tredirect: props.redirect,\n\t\t\tloading: true,\n\t\t\tgetUser: false,\n\t\t\tloggingIn: false,\n\t\t\terror: undefined,\n\t\t\tuser: undefined,\n\t\t\tform: {\n\t\t\t\temail: '',\n\t\t\t\tpassword: '',\n\t\t\t},\n\t\t};\n\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t\tthis.handleFormChange = this.handleFormChange.bind(this);\n\t\tthis.handleLogout = this.handleLogout.bind(this);\n\t}\n\tasync componentDidMount() {\n\t\tthis.setState({ loading: true });\n\n\t\ttry {\n\t\t\tconst dict = await dictionaryService.getDictionary('en');\n\t\t\tthis.setState({ dict });\n\t\t} catch (err) {}\n\n\t\ttry {\n\t\t\tconst user = await verificationService.getUser();\n\t\t\tif (user) {\n\t\t\t\tconsole.log('user already logged in');\n\t\t\t\tthis.setState({ getUser: true, user }, () => {\n\t\t\t\t\tthis.handleLogin(user);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.log('user not logged in');\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tthis.setState({ getUser: false });\n\t\t}\n\t\tthis.setState({ loading: false });\n\t}\n\tcomponentWillUnmount() {}\n\tasync loadDictionary() {\n\t\ttry {\n\t\t\tconst dict = await dictionaryService.getDictionary('en');\n\t\t\tthis.setState({ dict });\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\n\thandleFormChange(e) {\n\t\tconst form = this.state.form;\n\t\tform[e.target.id] = e.target.value;\n\t\tthis.setState({ form });\n\t}\n\tasync handleSubmit(e) {\n\t\te.preventDefault();\n\t\tconst { form } = this.state;\n\t\tthis.setState({ error: undefined, loggingIn: true });\n\t\ttry {\n\t\t\tthis.props.onSubmit();\n\t\t\tconst user = await verificationService.login(form.email, form.password);\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.setState({ user, loggingIn: false, getUser: true }, () => this.handleLogin(user));\n\t\t\t}, 500);\n\t\t} catch (err) {\n\t\t\tthis.setState({ loggingIn: false });\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\thandleLogin(user) {\n\t\tif (this.props.onLogin) this.props.onLogin(user || this.state.user);\n\t}\n\tasync handleLogout() {\n\t\ttry {\n\t\t\tawait verificationService.logout();\n\t\t\tthis.setState({ getUser: false });\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\trender() {\n\t\tconst { form, loading, loggingIn, getUser } = this.state;\n\t\tconst { dict } = this.props;\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<form onSubmit={this.handleSubmit}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid='email'\n\t\t\t\t\t\tname='email'\n\t\t\t\t\t\tautoFocus={false}\n\t\t\t\t\t\tplaceholder={dict.email + '...'}\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tvalue={form.email}\n\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid='password'\n\t\t\t\t\t\tname='password'\n\t\t\t\t\t\tplaceholder={dict.password + '...'}\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\tvalue={form.password}\n\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button className='button-wide' type='submit' loading={loggingIn}>\n\t\t\t\t\t\tOkey\n\t\t\t\t\t</Button>\n\t\t\t\t</form>\n\t\t\t\t{loggingIn && <Loader message={dict.loggingIn} />}\n\t\t\t\t{getUser && (\n\t\t\t\t\t<div id='login-loggedin'>\n\t\t\t\t\t\t<div id='login-loggedin-message'>{dict.youAreLoggedIn}</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{loading && <Loader />}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default Login;\n","import React, { Component } from 'react';\nimport './Logout.css';\nimport verificationService from '../../services/verificationService';\nimport Loader from '../util/Loader';\n\nclass Logout extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tloading: true,\n\t\t\terror: undefined,\n\t\t};\n\t}\n\tasync componentDidMount() {\n\t\ttry {\n\t\t\tthis.props.onSubmit();\n\t\t\tawait verificationService.logout();\n\t\t\tthis.setState({ loading: false });\n\t\t\tthis.props.onLogout();\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\trender() {\n\t\tconst { loading } = this.state;\n\t\tconst { dict } = this.props;\n\t\tif (loading) return <Loader message={dict.loggingOut + '...'} />;\n\t\treturn <div>{dict.youAreLoggedIn}</div>;\n\t}\n}\n\nexport default Logout;\n","import React, { Component } from 'react';\nimport './Signup.css';\nimport 'react-phone-number-input/style.css';\nimport PhoneInput from 'react-phone-number-input';\nimport verificationService from '../../services/verificationService';\nimport dictionaryService from '../../services/dictionaryService';\nimport Loader from '../util/Loader';\nimport Button from '../util/Button';\n\nclass Signup extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdict: {},\n\t\t\tisSignedUp: false,\n\t\t\tloading: false,\n\t\t\tsigningUp: false,\n\t\t\terror: undefined,\n\t\t\ttoken: props.token,\n\t\t\tform: {\n\t\t\t\tfirstName: '',\n\t\t\t\tlastName: '',\n\t\t\t\temail: '',\n\t\t\t\temail2: '',\n\t\t\t\tphone: '',\n\t\t\t\tpassword: '',\n\t\t\t\tpassword2: '',\n\t\t\t},\n\t\t};\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t\tthis.handleFormChange = this.handleFormChange.bind(this);\n\t}\n\tcomponentDidMount() {\n\t\tthis.loadDictionary();\n\t}\n\tasync loadDictionary() {\n\t\ttry {\n\t\t\tconst dict = await dictionaryService.getDictionary('en');\n\t\t\tthis.setState({ dict });\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\thandleFormChange(e) {\n\t\tconst form = this.state.form;\n\t\tform[e.target.id] = e.target.value;\n\t\tthis.setState({ form });\n\t}\n\thandlePhoneChange(value) {\n\t\tconst form = this.state.form;\n\t\tform.phone = value;\n\t\tthis.setState({ form });\n\t}\n\tasync handleSubmit(e) {\n\t\tconsole.log('saving signup');\n\t\te.preventDefault();\n\t\tconst { form } = this.state;\n\t\tthis.setState({ signingUp: true, error: undefined });\n\t\ttry {\n\t\t\tconsole.log('signing up no...');\n\t\t\tthis.props.onSubmit();\n\t\t\tconst user = await verificationService.signup(form);\n\t\t\tconsole.log('SIGNED UP');\n\t\t\tthis.setState({ user }, () => this.handleSignUp(user));\n\t\t} catch (err) {\n\t\t\tconsole.log('was errors');\n\t\t\tthis.props.onError(err);\n\t\t}\n\t\tsetTimeout(() => {\n\t\t\tthis.setState({ signingUp: false });\n\t\t}, 300);\n\t}\n\thandleSignUp(user) {\n\t\tconsole.log('signed up', user);\n\t\tif (!user) return this.props.onError('User signed in is empty');\n\n\t\tthis.setState({ isSignedUp: true, user, error: undefined });\n\t\tif (this.props.onSignUp) this.props.onSignUp(user);\n\t}\n\trender() {\n\t\tconst { form, signingUp, error } = this.state;\n\t\tconst { dict } = this.props;\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<form onSubmit={this.handleSubmit}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid='firstName'\n\t\t\t\t\t\tvalue={form.firstName}\n\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\tplaceholder={dict.firstName + '...'}\n\t\t\t\t\t\tname='firstName'\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid='lastName'\n\t\t\t\t\t\tvalue={form.lastName}\n\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\tplaceholder={dict.lastName + '...'}\n\t\t\t\t\t\tname='firstName'\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid='email'\n\t\t\t\t\t\tvalue={form.email}\n\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\tplaceholder={dict.email + '...'}\n\t\t\t\t\t\tname='email'\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid='email2'\n\t\t\t\t\t\tvalue={form.email2}\n\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\tplaceholder={dict.reType + ' ' + dict.email + '...'}\n\t\t\t\t\t\tname='email2'\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid='password'\n\t\t\t\t\t\tvalue={form.password}\n\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\tplaceholder={dict.password + '...'}\n\t\t\t\t\t\tname='password'\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid='password2'\n\t\t\t\t\t\tvalue={form.password2}\n\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\tplaceholder={dict.reType + ' ' + dict.password + '...'}\n\t\t\t\t\t\tname='password'\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t/>\n\t\t\t\t\t<PhoneInput\n\t\t\t\t\t\tplaceholder={dict.phone + '...'}\n\t\t\t\t\t\tvalue={form.phone}\n\t\t\t\t\t\tdefaultCountry={'FR'}\n\t\t\t\t\t\tonChange={(val) => this.handlePhoneChange(val)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button type='submit' loading={signingUp}>\n\t\t\t\t\t\tOkey\n\t\t\t\t\t</Button>\n\t\t\t\t</form>\n\t\t\t\t{signingUp && <Loader message={dict.signingUp} />}\n\t\t\t\t{error && <div id='signup-error'>{error}</div>}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default Signup;\n","import React, { Component } from 'react';\nimport './Reset.css';\nimport verificationService from '../../services/verificationService';\nimport Loader from '../util/Loader';\nimport Button from '../util/Button';\n\nclass Reset extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdict: {},\n\t\t\tloading: true,\n\t\t\tresetting: false,\n\t\t\tsuccess: false,\n\t\t\terror: undefined,\n\t\t\tuser: undefined,\n\t\t\tform: {\n\t\t\t\temail: '',\n\t\t\t},\n\t\t};\n\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t\tthis.handleFormChange = this.handleFormChange.bind(this);\n\t}\n\tasync componentDidMount() {}\n\thandleFormChange(e) {\n\t\tconst form = this.state.form;\n\t\tform[e.target.id] = e.target.value;\n\t\tthis.setState({ form });\n\t}\n\tasync handleSubmit(e) {\n\t\te.preventDefault();\n\n\t\tconst { form } = this.state;\n\t\tthis.setState({ error: undefined, resetting: true, success: false });\n\t\ttry {\n\t\t\tthis.props.onSubmit();\n\t\t\tawait verificationService.requestPasswordReset(form.email);\n\t\t\tsetTimeout(() => this.setState({ resetting: false, success: true }), 500);\n\t\t} catch (err) {\n\t\t\tthis.setState({ resetting: false, success: false });\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\trender() {\n\t\tconst { form, success, resetting } = this.state;\n\t\tconst { dict } = this.props;\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<form onSubmit={this.handleSubmit}>\n\t\t\t\t\t{!success ? (\n\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t<div id='reset-password-message'>{dict.fillInEmailPasswordReset}</div>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid='email'\n\t\t\t\t\t\t\t\tname='email'\n\t\t\t\t\t\t\t\tautoFocus={true}\n\t\t\t\t\t\t\t\tplaceholder={dict.email + '...'}\n\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\tvalue={form.email}\n\t\t\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Button type='submit' loading={resetting}>\n\t\t\t\t\t\t\t\tOkey\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div id='reset-password-message-done'>{dict.checkEmailForPasswordResetLink}</div>\n\t\t\t\t\t)}\n\t\t\t\t</form>\n\t\t\t\t{resetting && <Loader />}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default Reset;\n","import React, { Component } from 'react';\nimport './Update.css';\nimport verificationService from '../../services/verificationService';\nimport Loader from '../util/Loader';\nimport Button from '../util/Button';\n\nclass Update extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttoken: props.token,\n\t\t\tloading: false,\n\t\t\tupdating: false,\n\t\t\tsuccess: false,\n\t\t\terror: undefined,\n\t\t\tuser: undefined,\n\t\t\tform: {\n\t\t\t\tnewpassword: '',\n\t\t\t\tnewpassword2: '',\n\t\t\t\ttoken: props.token,\n\t\t\t},\n\t\t};\n\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t\tthis.handleFormChange = this.handleFormChange.bind(this);\n\t}\n\tasync componentDidMount() {}\n\thandleFormChange(e) {\n\t\tconst form = this.state.form;\n\t\tform[e.target.id] = e.target.value;\n\t\tthis.setState({ form });\n\t}\n\tasync handleSubmit(e) {\n\t\te.preventDefault();\n\t\tconst { form } = this.state;\n\t\tif (form.newpassword !== form.newpassword2) return this.props.onError({ message: 'Password does not match' });\n\n\t\tthis.setState({ error: undefined, updating: true, success: false });\n\t\ttry {\n\t\t\tthis.props.onSubmit();\n\t\t\tawait verificationService.updatePassword(form.token, form.newpassword, form.newpassword2);\n\t\t\tsetTimeout(() => this.setState({ updating: false, success: true }), 500);\n\t\t} catch (err) {\n\t\t\tthis.setState({ updating: false, success: false });\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\trender() {\n\t\tconst { form, loading, success, updating } = this.state;\n\n\t\tconst { dict } = this.props;\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t{!success ? (\n\t\t\t\t\t<form onSubmit={this.handleSubmit}>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid='newpassword'\n\t\t\t\t\t\t\tname='newpassword'\n\t\t\t\t\t\t\tautoFocus={true}\n\t\t\t\t\t\t\tplaceholder={dict.newPassword + '...'}\n\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\tvalue={form.newpassword}\n\t\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid='newpassword2'\n\t\t\t\t\t\t\tname='newpassword2'\n\t\t\t\t\t\t\tautoFocus={false}\n\t\t\t\t\t\t\tplaceholder={dict.reType + ' ' + dict.newPassword + '...'}\n\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\tvalue={form.newpassword2}\n\t\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input id='token' name='token' type='hidden' value={form.token} onChange={this.handleFormChange} />\n\t\t\t\t\t\t<Button type='submit' loading={loading}>\n\t\t\t\t\t\t\t{dict.send}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</form>\n\t\t\t\t) : (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<div id='reset-password-message'>{dict.yourPasswordWasReset}</div>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t)}\n\t\t\t\t{updating && <Loader />}\n\t\t\t\t{loading && <Loader />}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default Update;\n","import React, { Component } from 'react';\nimport './Verify.css';\nimport verificationService from '../../services/verificationService';\nimport dictionaryService from '../../services/dictionaryService';\nimport Loader from '../util/Loader';\nimport Button from '../util/Button';\n\nclass Verify extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdict: {},\n\t\t\ttoken: props.token,\n\t\t\tverified: false,\n\t\t\tverifying: false,\n\t\t\tloading: false,\n\t\t\terror: undefined,\n\t\t\tform: {\n\t\t\t\tcode: '',\n\t\t\t\ttoken: props.token || '',\n\t\t\t},\n\t\t};\n\t\tthis.formRef = React.createRef();\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t\tthis.handleFormChange = this.handleFormChange.bind(this);\n\t}\n\tasync componentDidMount() {\n\t\tawait this.loadDictionary();\n\t\tconst { token } = this.state;\n\t\tif (token) this.handleSubmit();\n\t}\n\tasync loadDictionary() {\n\t\ttry {\n\t\t\tconst dict = await dictionaryService.getDictionary();\n\t\t\tthis.setState({ dict });\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\thandleFormChange(e) {\n\t\tconst form = this.state.form;\n\t\tform[e.target.id] = e.target.value;\n\t\tthis.setState({ form });\n\t}\n\tasync handleSubmit(e) {\n\t\tconsole.log('verifying signup');\n\t\tif (e) e.preventDefault();\n\n\t\tconst { form } = this.state;\n\t\ttry {\n\t\t\tthis.setState({ verifying: true, verified: false, error: undefined });\n\t\t\tthis.props.onSubmit();\n\t\t\tawait verificationService.verify(form.token || form.code);\n\t\t\tthis.setState({ verified: true, verifying: false });\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t\tthis.setState({ verifying: false, verified: false, error: err });\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { form, verifying, verified, error, user } = this.state;\n\n\t\tconst { dict } = this.props;\n\n\t\tif (verifying) return <Loader message={'verifying account'} />;\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t{!error && verified && (\n\t\t\t\t\t<div id='verify-finished-message'>\n\t\t\t\t\t\t{dict.accountIsVerified}\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<div id={'verify-finished-gotologin'}>\n\t\t\t\t\t\t\t<Button onClick={() => this.props.onVerification(user)}>{dict.login}</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{!verified && (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<div id='verify-finished-message'>{dict.checkEmailToVerifyAccount}</div>\n\t\t\t\t\t\t<form ref={this.formRef} onSubmit={this.handleSubmit}>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid='code'\n\t\t\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\t\t\tautoFocus={false}\n\t\t\t\t\t\t\t\tvalue={form.code}\n\t\t\t\t\t\t\t\tplaceholder={dict.securityCode + '...'}\n\t\t\t\t\t\t\t\tname='code'\n\t\t\t\t\t\t\t\ttype='number'\n\t\t\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<input id='token' name='token' type='hidden' value={form.token} onChange={this.handleFormChange} />\n\t\t\t\t\t\t\t<Button type='submit' loading={verifying}>\n\t\t\t\t\t\t\t\tOkey\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t)}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default Verify;\n","import React, { Component } from 'react';\nimport './ReCode.css';\nimport verificationService from '../../services/verificationService';\nimport dictionaryService from '../../services/dictionaryService';\nimport Loader from '../util/Loader';\nimport Button from '../util/Button';\n\nclass ReCode extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdict: {},\n\t\t\ttoken: props.token,\n\t\t\tresent: false,\n\t\t\tresending: false,\n\t\t\tloading: false,\n\t\t\terror: undefined,\n\t\t\tform: {\n\t\t\t\temail: '',\n\t\t\t},\n\t\t};\n\t\tthis.formRef = React.createRef();\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t\tthis.handleFormChange = this.handleFormChange.bind(this);\n\t}\n\tasync componentDidMount() {\n\t\tawait this.loadDictionary();\n\t}\n\tasync loadDictionary() {\n\t\ttry {\n\t\t\tconst dict = await dictionaryService.getDictionary('en');\n\t\t\tthis.setState({ dict });\n\t\t} catch (err) {\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\thandleFormChange(e) {\n\t\tconst form = this.state.form;\n\t\tform[e.target.id] = e.target.value;\n\t\tthis.setState({ form });\n\t}\n\tasync handleSubmit(e) {\n\t\tconsole.log('verifying signup');\n\t\tif (e) e.preventDefault();\n\n\t\tconst { form } = this.state;\n\t\ttry {\n\t\t\tthis.props.onSubmit();\n\t\t\tthis.setState({ resending: true, resent: false, error: undefined });\n\t\t\tawait verificationService.reverify(form.email);\n\t\t\tthis.setState({ resending: false, resent: true });\n\t\t\tthis.props.onReCode();\n\t\t} catch (err) {\n\t\t\tthis.setState({ resending: false });\n\t\t\tthis.props.onError(err);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { form, resent, resending, user } = this.state;\n\t\tconst { dict } = this.props;\n\t\t//if(loading) return <Loader/>\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div id='recode-enter-email'>{dict.enterEmailForCode}</div>\n\t\t\t\t{resent ? (\n\t\t\t\t\t<div id='recode-finished-message'>\n\t\t\t\t\t\t{dict.accountIsVerified}\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<Button id={'recode-finished-gotologin'} onClick={() => this.props.onVerification(user)}>\n\t\t\t\t\t\t\t{dict.login}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<form ref={this.formRef} onSubmit={this.handleSubmit}>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid='email'\n\t\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\t\tautoFocus={false}\n\t\t\t\t\t\t\tvalue={form.email}\n\t\t\t\t\t\t\tplaceholder={dict.email + '...'}\n\t\t\t\t\t\t\tname='email'\n\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button type='submit' loading={resending}>\n\t\t\t\t\t\t\tOkey\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</form>\n\t\t\t\t)}\n\t\t\t\t{resending && <Loader message={dict.reSendingVerificationCode} />}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default ReCode;\n","import React, { Component } from 'react';\nimport './index.css';\nimport dictionaryService from '../../services/dictionaryService';\nimport Loader from '../util/Loader';\nimport Container from './Container';\nimport Login from './Login';\nimport Logout from './Logout';\nimport Signup from './Signup';\nimport Reset from './Reset';\nimport Update from './Update';\nimport Verify from './Verify';\nimport ReCode from './ReCode';\n\nclass Verification extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tconst searchParams = new URLSearchParams(props.location ? props.location.search : '');\n\t\tconst type =\n\t\t\tprops.location && props.location.pathname.replace('/verification', '')\n\t\t\t\t? props.location.pathname.replace('/verification/', '')\n\t\t\t\t: props.type || 'login';\n\n\t\tthis.state = {\n\t\t\tloading: false,\n\t\t\ttype: type,\n\t\t\tdict: {},\n\t\t\tnoBackground: props.noBackground,\n\t\t\terror: searchParams.get('error') || undefined,\n\t\t\tredirect: searchParams.get('redirect'),\n\t\t\ttoken: searchParams.get('token'),\n\t\t\ttypes: {\n\t\t\t\tlogin: 'Login',\n\t\t\t\tlogout: 'Log out',\n\t\t\t\tsignup: 'Sign Up',\n\t\t\t\tverify: 'Verify',\n\t\t\t\treset: 'Reset password',\n\t\t\t\tupdate: 'Change password',\n\t\t\t\trecode: 'Verify account',\n\t\t\t},\n\t\t};\n\n\t\tthis.handleLogin = this.handleLogin.bind(this);\n\t\tthis.handleLogout = this.handleLogout.bind(this);\n\t\tthis.handleSignUp = this.handleSignUp.bind(this);\n\t}\n\tcomponentDidMount() {\n\t\tthis.loadDictionary();\n\t}\n\tasync loadDictionary() {\n\t\tconst dict = await dictionaryService.getDictionary();\n\t\tconst types = {\n\t\t\tlogin: dict.login,\n\t\t\tlogout: dict.logout,\n\t\t\tsignup: dict.signup,\n\t\t\tverify: dict.verify,\n\t\t\treset: dict.resetPassword,\n\t\t\tupdate: dict.changePassword,\n\t\t\trecode: dict.verifyAccount,\n\t\t};\n\t\tthis.setState({ dict, types });\n\t}\n\thandleSubmit() {\n\t\tthis.setState({ error: undefined });\n\t}\n\thandleError(err) {\n\t\tconst error = !err\n\t\t\t? undefined\n\t\t\t: err.response && err.response.data\n\t\t\t? err.response.data.message\n\t\t\t: err.message || err.toString();\n\t\tthis.setState({ error });\n\t}\n\thandleShowType(type, user) {\n\t\tconsole.log(type, user);\n\t\tthis.setState({ type, user, error: undefined }, () => {\n\t\t\tdocument.title = 'Chinemachine / ' + this.state.types[this.state.type];\n\t\t});\n\t}\n\thandleShowLogin(user) {\n\t\tthis.setState({ component: Login, user });\n\t}\n\thandleLogin(user) {\n\t\tthis.setState({ user, error: undefined });\n\t\tif (this.props.onLogin) this.props.onLogin(user);\n\t\tthis.redirect();\n\t\tconsole.log('logged in');\n\t}\n\thandleLogout() {\n\t\tthis.setState({ user: null, type: 'login', error: undefined });\n\t\tif (this.props.onLogout) this.props.onLogout();\n\t\tthis.redirect();\n\t\tconsole.log('logged out');\n\t}\n\thandleSignUp(user) {\n\t\tconsole.log('NEW SIGNUP', user);\n\t\tthis.setState({ user, error: undefined });\n\t\tif (this.props.onSignUp) this.props.onSignUp();\n\t\tthis.handleShowType('verify');\n\t\tconsole.log('signed up');\n\t}\n\thandleVerification(user) {\n\t\tconsole.log('verified account');\n\t\tthis.setState({ error: undefined });\n\t\tif (this.props.onVerification) this.props.onVerification();\n\t\tthis.handleShowType('login');\n\t}\n\n\thandleUpdated(user) {\n\t\tconsole.log(user);\n\t\tthis.handleShowType('login');\n\t}\n\tredirect() {\n\t\tconsole.log('REDIRECT', this.state.redirect);\n\t\t//return\n\t\tif (this.state.redirect) this.props.history.push(this.state.redirect);\n\t}\n\trender() {\n\t\tconst { user, type, types, loading, redirect, noBackground, token, dict, error } = this.state;\n\n\t\tconst { noLogo } = this.props;\n\n\t\treturn (\n\t\t\t<div id='verification' style={noBackground ? { background: 'none' } : undefined}>\n\t\t\t\t<Container\n\t\t\t\t\theader={types[type]}\n\t\t\t\t\ttype={type}\n\t\t\t\t\terror={error}\n\t\t\t\t\tnoLogo={noLogo}\n\t\t\t\t\tdict={dict}\n\t\t\t\t\tonChange={(type) => this.handleShowType(type)}\n\t\t\t\t>\n\t\t\t\t\t{type === 'login' ? (\n\t\t\t\t\t\t<Login\n\t\t\t\t\t\t\tkey={'login'}\n\t\t\t\t\t\t\temail={user && user.email}\n\t\t\t\t\t\t\tonLogin={this.handleLogin}\n\t\t\t\t\t\t\tredirect={redirect}\n\t\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\t\tonError={(err) => this.handleError(err)}\n\t\t\t\t\t\t\tonSubmit={() => this.handleSubmit()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : type === 'logout' ? (\n\t\t\t\t\t\t<Logout\n\t\t\t\t\t\t\tkey={'logout'}\n\t\t\t\t\t\t\temail={user && user.email}\n\t\t\t\t\t\t\tonLogout={this.handleLogout}\n\t\t\t\t\t\t\tredirect={redirect}\n\t\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\t\tonError={(err) => this.handleError(err)}\n\t\t\t\t\t\t\tonSubmit={() => this.handleSubmit()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : type === 'reset' ? (\n\t\t\t\t\t\t<Reset\n\t\t\t\t\t\t\tkey={'reset'}\n\t\t\t\t\t\t\temail={user && user.email}\n\t\t\t\t\t\t\ttoken={token}\n\t\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\t\tonError={(err) => this.handleError(err)}\n\t\t\t\t\t\t\tonSubmit={() => this.handleSubmit()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : type === 'update' ? (\n\t\t\t\t\t\t<Update\n\t\t\t\t\t\t\tkey={'update'}\n\t\t\t\t\t\t\temail={user && user.email}\n\t\t\t\t\t\t\ttoken={token}\n\t\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\t\tonUpdated={() => this.handleUpdated()}\n\t\t\t\t\t\t\tonError={(err) => this.handleError(err)}\n\t\t\t\t\t\t\tonSubmit={() => this.handleSubmit()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : type === 'verify' ? (\n\t\t\t\t\t\t<Verify\n\t\t\t\t\t\t\tkey={'update'}\n\t\t\t\t\t\t\ttoken={token}\n\t\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\t\tonVerification={(user) => this.handleVerification(user)}\n\t\t\t\t\t\t\tonError={(err) => this.handleError(err)}\n\t\t\t\t\t\t\tonSubmit={() => this.handleSubmit()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : type === 'recode' ? (\n\t\t\t\t\t\t<ReCode\n\t\t\t\t\t\t\tkey={'recode'}\n\t\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\t\tonReCode={() => this.handleShowType('verify')}\n\t\t\t\t\t\t\tonError={(err) => this.handleError(err)}\n\t\t\t\t\t\t\tonSubmit={() => this.handleSubmit()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : type === 'signup' ? (\n\t\t\t\t\t\t<Signup\n\t\t\t\t\t\t\tkey={'signup'}\n\t\t\t\t\t\t\tdict={dict}\n\t\t\t\t\t\t\tonSignUp={this.handleSignUp}\n\t\t\t\t\t\t\tredirect={redirect}\n\t\t\t\t\t\t\tonError={(err) => this.handleError(err)}\n\t\t\t\t\t\t\tonSubmit={() => this.handleSubmit()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div>Invalid type</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{loading && <Loader />}\n\t\t\t\t</Container>\n\t\t\t\t<div id='verification-bubbles'>\n\t\t\t\t\t<div className='verification-bubble' onClick={() => this.handleShowType('reset')}>\n\t\t\t\t\t\t{dict.forgotPassword}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='verification-bubble' onClick={() => this.handleShowType('recode')}>\n\t\t\t\t\t\t{dict.verifyAccount}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Verification;\n","import React, { Component } from 'react';\nimport './Button.css';\nimport { RiLoader5Line } from 'react-icons/ri';\n\nclass Button extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\t}\n\thandleClick(e) {\n\t\tif (this.state.loading) return e.preventDefault();\n\t\tif (this.props.onClick) this.props.onClick(e);\n\t}\n\trender() {\n\t\tconst { type, style, disabled, loading, value } = this.props;\n\n\t\treturn (\n\t\t\t<button\n\t\t\t\tclassName={'button'}\n\t\t\t\tstyle={style || undefined}\n\t\t\t\ttype={type}\n\t\t\t\tdisabled={disabled || undefined}\n\t\t\t\tonClick={(e) => this.handleClick(e)}\n\t\t\t>\n\t\t\t\t{loading ? <RiLoader5Line className='button-loading' /> : this.props.children || value}\n\t\t\t</button>\n\t\t);\n\t}\n}\nexport default Button;\n","import { axios } from './';\n\nexport default {\n\tgetUser: async () => {\n\t\tlet res = await axios.get('/status');\n\t\treturn res.data;\n\t},\n\tlogin: async (email, password) => {\n\t\tlet res = await axios.post('/verification/login', { email, password });\n\t\treturn res.data;\n\t},\n\tlogout: async (email) => {\n\t\tlet res = await axios.post('/verification/logout', { email });\n\t\treturn res.data;\n\t},\n\tsignup: async (params) => {\n\t\tlet res = await axios.post('/verification/signup', params);\n\t\treturn res.data;\n\t},\n\tverify: async (tokenOrCode) => {\n\t\tlet res = await axios.get('/verification/verify/' + tokenOrCode);\n\t\treturn res.data;\n\t},\n\treverify: async (email) => {\n\t\tlet res = await axios.get('/verification/reverify/' + email);\n\t\treturn res.data;\n\t},\n\trequestPasswordReset: async (email) => {\n\t\tlet res = await axios.get('/verification/reset/' + email);\n\t\treturn res.data;\n\t},\n\tupdatePassword: async (token, password, password2) => {\n\t\tlet res = await axios.post('/verification/update', { token, password, password2 });\n\t\treturn res.data;\n\t},\n};\n","import axios from 'axios';\naxios.defaults.withCredentials = true;\nexport { axios };\n","import { axios } from './';\n\nexport default {\n\tget: async (id) => {\n\t\tlet res = await axios.get('/api/dictionary/id/' + id);\n\t\treturn res.data || {};\n\t},\n\tgetAll: async () => {\n\t\tlet res = await axios.get('/api/dictionary/all');\n\t\treturn res.data || [];\n\t},\n\tgetDictionary: async (langCode) => {\n\t\tlet res = await axios.get('/api/dictionary');\n\t\treturn res.data;\n\t},\n\tadd: async (term) => {\n\t\tlet res = await axios.post('/api/dictionary/', { term });\n\t\treturn res.data;\n\t},\n\tupdate: async (dict) => {\n\t\tlet res = await axios.patch('/api/dictionary/' + dict._id, dict);\n\t\treturn res.data;\n\t},\n\tupdateMany: async (dictionary) => {\n\t\tconst items = await axios.patch('/api/dictionary', dictionary);\n\t\treturn items;\n\t\t/*\n        const data = []\n        for (var i = 0; i < dictionary.length; i++){\n            const item = await axios.patch('/api/dictionary/' +dictionary[i]._id, dictionary[i])\n            data.push(item.data)\n        }\n        return data || []\n        */\n\t},\n\tdelete: async (id) => {\n\t\tlet res = await axios.delete('/api/dictionary/' + id);\n\t\treturn res.data;\n\t},\n\tdeleteAll: async () => {\n\t\tlet res = await axios.delete('/api/dictionary');\n\t\treturn res.data;\n\t},\n};\n","import React, { Component } from 'react';\nimport Loader from '../util/Loader';\n\nclass AccountAppointments extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\t}\n\tasync componentDidMount() {}\n\n\trender() {\n\t\tconst { loading, error } = this.state;\n\n\t\tif (loading)\n\t\t\treturn <Loader error={error} onRetry={() => this.componentDidMount()} />;\n\n\t\treturn <div id='account-appointments'>acount appointments</div>;\n\t}\n}\n\nexport default AccountAppointments;\n","import React, { Component } from 'react';\nimport Loader from '../util/Loader';\n\nclass AccountSettings extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\t}\n\tasync componentDidMount() {}\n\n\trender() {\n\t\tconst { loading, error } = this.state;\n\n\t\tif (loading)\n\t\t\treturn <Loader error={error} onRetry={() => this.componentDidMount()} />;\n\n\t\treturn <div id='account-appointments'>acount appointments</div>;\n\t}\n}\n\nexport default AccountSettings;\n","import React, { Component } from 'react';\nimport './index.css';\nimport verificationService from '../../services/verificationService';\nimport appointmentService from '../../services/appointmentService';\nimport dictionaryService from '../../services/dictionaryService';\nimport userService from '../../services/userService';\nimport moment from 'moment';\nimport logo from '../../images/cm_logo_white_128px.png';\nimport { BiHome, BiStore } from 'react-icons/bi';\nimport { AiOutlineLogout } from 'react-icons/ai';\n\nimport Verification from '../verification';\nimport Loader from '../util/Loader';\nimport Button from '../util/Button';\nimport AccountAppointments from './AccountAppointments';\nimport AccountSettings from './AccountSettings';\n\nconst formatAppointmentTime = (app) => {\n\tconst startDate = moment(app.startTime);\n\tconst endDate = moment(app.endTime);\n\treturn startDate.format('HH:mm') + ' to ' + endDate.format('HH:mm');\n};\n\nconst SECTIONS = [\n\t{\n\t\t_id: 'appointments',\n\t\tname: 'Appointments',\n\t\tcomponent: AccountAppointments,\n\t\ticon: BiHome,\n\t},\n\t{\n\t\t_id: 'settings',\n\t\tname: 'Account settings',\n\t\tcomponent: AccountSettings,\n\t\ticon: BiStore,\n\t},\n];\nconst HOME_SECTION = SECTIONS[0];\n\nclass Account extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdict: {},\n\t\t\tsections: SECTIONS,\n\t\t\tloading: true,\n\t\t\tappointments: [],\n\t\t\tcancelling: false,\n\t\t\tuser: undefined,\n\t\t\tupdatingAccount: false,\n\t\t};\n\t\tthis.handleUpdateAccount = this.handleUpdateAccount.bind(this);\n\t\tthis.handleFormChange = this.handleFormChange.bind(this);\n\t}\n\tasync componentDidMount() {\n\t\tdocument.title = 'Chinemachine / Account';\n\t\tthis.setState({ loading: true });\n\t\tlet user;\n\n\t\ttry {\n\t\t\tuser = await verificationService.getUser();\n\t\t\tif (!user) throw new Error('Not authorized');\n\t\t\telse this.setState({ user });\n\t\t} catch (err) {\n\t\t\treturn this.handleLogout();\n\t\t}\n\t\ttry {\n\t\t\tconst dict = await dictionaryService.getDictionary();\n\n\t\t\tconst appointments = await appointmentService.getAllByUser(user._id);\n\t\t\tthis.setState(\n\t\t\t\t{ langCode: dict._langCode, dict, appointments },\n\t\t\t\tasync () => {\n\t\t\t\t\tconst sectionId = this.props.location.pathname\n\t\t\t\t\t\t.replace(/\\/account/gi, '')\n\t\t\t\t\t\t.replace('/', '');\n\t\t\t\t\tif (sectionId) this.handleNavigation(sectionId);\n\n\t\t\t\t\tthis.setState({ loading: false });\n\t\t\t\t}\n\t\t\t);\n\t\t} catch (error) {\n\t\t\tthis.handleError(error);\n\t\t}\n\n\t\tthis.props.history.listen((event) => {\n\t\t\tif (!event.state || !event.state.sectionId) return;\n\t\t\tconst { sectionId } = event.state;\n\t\t\tconst { sections } = this.state;\n\t\t\tconst section = sections.filter(\n\t\t\t\t(sec) => sec.id === sectionId || sec._id === sectionId\n\t\t\t)[0];\n\t\t\tthis.setState({ section: section || HOME_SECTION });\n\t\t});\n\t}\n\n\tcomponentWillUnmount() {}\n\tasync handleUpdateAccount(e) {\n\t\tif (e) e.preventDefault();\n\t\tconst { user } = this.state;\n\n\t\tthis.setState({ updatingAccount: true, updated: false });\n\t\ttry {\n\t\t\tconst updatedUser = await userService.update(user._id, user);\n\t\t\tconsole.log(updatedUser);\n\t\t\tthis.setState({\n\t\t\t\tuser: updatedUser,\n\t\t\t\tupdated: true,\n\t\t\t\tupdatingAccount: false,\n\t\t\t});\n\t\t} catch (err) {\n\t\t\tthis.handleError(err);\n\t\t}\n\t\tthis.setState({ updatingAccount: false });\n\t}\n\tasync handleCancelAppointment(appointment) {\n\t\tthis.setState({ cancelling: appointment._id });\n\t\ttry {\n\t\t\tconst { user } = this.state;\n\t\t\tconst appointments = this.state.appointments.filter(\n\t\t\t\t(a) => a._id !== appointment._id\n\t\t\t);\n\t\t\tawait appointmentService.cancel(user._id, appointment._id);\n\t\t\tthis.setState({ appointments });\n\t\t} catch (err) {\n\t\t\tthis.handleError(err);\n\t\t}\n\t\tthis.setState({ cancelling: false });\n\t}\n\thandleNavigation(sectionId) {\n\t\tthis.props.history.push({\n\t\t\tpathname: '/account/' + sectionId,\n\t\t\tstate: { sectionId },\n\t\t});\n\t}\n\n\thandleConfirmDeleteSection(id) {\n\t\tconst deleteSection = this.state.sections.filter(\n\t\t\t(section) => section._id === id\n\t\t)[0];\n\t\tthis.setState({ deleteSection, showDeleteSectionModal: true });\n\t}\n\thandleCloseDeleteSectionModal() {\n\t\tthis.setState({ deleteSection: null, showDeleteSectionModal: false });\n\t}\n\thandleChangeLanguage(langCode) {\n\t\tthis.setState({ langCode });\n\t}\n\n\thandleLogin(user) {\n\t\tthis.setState({ showLogin: false });\n\t\tthis.componentDidMount();\n\t}\n\tasync handleLogout() {\n\t\tthis.setState({ loading: true });\n\t\ttry {\n\t\t\tawait verificationService.logout();\n\t\t\tthis.props.history.push('/verification/login?redirect=/account');\n\t\t} catch (err) {\n\t\t\tthis.handleError(err);\n\t\t}\n\t\tthis.setState({ loading: false });\n\t}\n\thandleFormChange(e) {\n\t\tconst { user } = this.state;\n\t\tuser[e.target.id] = e.target.value;\n\t\tthis.setState({ user });\n\t}\n\thandleError(err) {\n\t\tif (err && err.response && err.response.status === 401)\n\t\t\treturn this.handleLogout();\n\n\t\tconst error =\n\t\t\terr.response && err.response.data\n\t\t\t\t? err.response.data.message || err.response.data\n\t\t\t\t: err.message || err.toString();\n\t\tthis.setState({ error });\n\t}\n\thandleCloseErrorModal() {\n\t\tthis.setState({ error: null });\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tdict,\n\t\t\tform,\n\t\t\tloading,\n\t\t\terror,\n\t\t\tshowLogin,\n\t\t\tuser,\n\t\t\tappointments,\n\t\t\tcancelling,\n\t\t\tupdatingAccount,\n\t\t} = this.state;\n\t\tconsole.log(user)\n\t\tif (showLogin)\n\t\t\treturn (\n\t\t\t\t<Verification\n\t\t\t\t\ttype='login'\n\t\t\t\t\tredirect='/account'\n\t\t\t\t\tonLogin={this.handleLogin}\n\t\t\t\t/>\n\t\t\t);\n\t\tif (loading)\n\t\t\treturn <Loader error={error} onRetry={() => this.componentDidMount()} />;\n\n\t\treturn (\n\t\t\t<div id='account'>\n\t\t\t\t<div id='account'>\n\t\t\t\t\t<div id='account-header'>\n\t\t\t\t\t\t<div id='account-header-logo-wrap'>\n\t\t\t\t\t\t\t<a href='/'>\n\t\t\t\t\t\t\t\t<img src={logo} alt='Chinemachine' id='account-header-logo' />\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<h2 id='account-header-title'>\n\t\t\t\t\t\t\t{user ? user.firstName + ' ' + user.lastName : '...'}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<div id='account-header-logout'>\n\t\t\t\t\t\t\t<a alt='Sign out' href='/verification/logout?redirect=/'>\n\t\t\t\t\t\t\t\t<AiOutlineLogout />\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id='account-border'></div>\n\t\t\t\t\t<div id='account-content-wrap'>\n\t\t\t\t\t\t<div id='account-appointments'>\n\t\t\t\t\t\t\t<h3>{dict.myAppointments}</h3>\n\t\t\t\t\t\t\t{appointments.map((app, idx) => (\n\t\t\t\t\t\t\t\t<div key={idx} className='account-appointment'>\n\t\t\t\t\t\t\t\t\t<div className='account-appointment-wrap'>\n\t\t\t\t\t\t\t\t\t\t<span className='account-appointment-time'>\n\t\t\t\t\t\t\t\t\t\t\t{moment(app.startTime).format('dddd MMM Do')},{' '}\n\t\t\t\t\t\t\t\t\t\t\t{formatAppointmentTime(app)}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t\t{app.store.name}\n\t\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t\t{app.store.address}\n\t\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t\t{app.store.postalCode} {app.store.city}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tloading={cancelling === app._id}\n\t\t\t\t\t\t\t\t\t\tonClick={() => this.handleCancelAppointment(app)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{dict.cancel}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t{!appointments.length && (\n\t\t\t\t\t\t\t\t<div className='account-no-appointments'>\n\t\t\t\t\t\t\t\t\t{dict.noAppointmentsBooked}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div id='account-details'>\n\t\t\t\t\t\t\t<h3>{dict.myAccount}</h3>\n\t\t\t\t\t\t\t<div id='account-details-wrap'>\n\t\t\t\t\t\t\t\t<form onSubmit={this.handleUpdateAccount}>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tid='firstName'\n\t\t\t\t\t\t\t\t\t\tvalue={user.firstName}\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\t\t\t\t\tplaceholder='First name...'\n\t\t\t\t\t\t\t\t\t\tname='firstName'\n\t\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tid='lastName'\n\t\t\t\t\t\t\t\t\t\tvalue={user.lastName}\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\t\t\t\t\tplaceholder='Last name...'\n\t\t\t\t\t\t\t\t\t\tname='firstName'\n\t\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t{/*<input id='email' value={user.email} onChange={this.handleFormChange} autoComplete='off' placeholder='E-mail...' name='email' type='text'/><br/>*/}\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tid='phone'\n\t\t\t\t\t\t\t\t\t\tvalue={user.phone}\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\t\t\t\t\tplaceholder='Phone...'\n\t\t\t\t\t\t\t\t\t\tname='phone'\n\t\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t<Button type='submit' loading={updatingAccount}>\n\t\t\t\t\t\t\t\t\t\t{dict.save}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t\t{user && user.role !== 'USER' &&\n\t\t\t\t\t\t\t\t<a href='/dashboard'>\n\t\t\t\t\t\t\t\t\t<Button type='button'>\n\t\t\t\t\t\t\t\t\t\tGo to Administration\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{error && <div className='account-error'>{error}</div>}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Account;\n","import { axios } from './';\n\nexport default {\n\tget: async (userId) => {\n\t\tlet res = await axios.get('/api/user/' + userId);\n\t\treturn res.data;\n\t},\n\tgetAll: async () => {\n\t\tlet res = await axios.get('/api/user');\n\t\treturn res.data || [];\n\t},\n\tgetAppointments: async () => {\n\t\tlet res = await axios.get('/api/user/appointmens/all');\n\t\treturn res.data || [];\n\t},\n\tadd: async (params) => {\n\t\tlet res = await axios.post('/api/user', params);\n\t\treturn res.data;\n\t},\n\tupdate: async (id, params) => {\n\t\tlet res = await axios.patch('/api/user/' + id, params);\n\t\treturn res.data;\n\t},\n\tdelete: async (id) => {\n\t\tlet res = await axios.delete('/api/user/' + id);\n\t\treturn res.data;\n\t},\n\tdeleteAll: async () => {\n\t\tlet res = await axios.delete('/api/user');\n\t\treturn res.data;\n\t},\n\tsearch: async (term) => {\n\t\tlet res = await axios.get('/api/user/util/search/' + term);\n\t\treturn res.data || [];\n\t},\n};\n","import { axios } from \"./\";\n\nexport default {\n\tget: async (id) => {\n\t\tlet res = await axios.get(\"/api/appointment/\" + id);\n\t\treturn res.data;\n\t},\n\tgetAll: async () => {\n\t\tlet res = await axios.get(\"/api/appointment\");\n\t\treturn res.data || [];\n\t},\n\tgetByDate: async (year, month, date, storeId) => {\n\t\tconst path =\n\t\t\t\"/api/appointment/\" +\n\t\t\tyear +\n\t\t\t(month !== undefined ? \"/\" + month : \"\") +\n\t\t\t(month !== undefined && date ? \"/\" + date : \"\") +\n\t\t\t(storeId ? \"/store/\" + storeId : \"\");\n\t\tlet res = await axios.get(path);\n\t\treturn res.data || [];\n\t},\n\tgetByMonth: async (year, month, storeId) => {\n\t\tlet res = await axios.get(\n\t\t\t\"/api/appointment/\" + year + \"/\" + month + (storeId ? \"/store/\" + storeId : \"\")\n\t\t);\n\t\treturn res.data || [];\n\t},\n\tgetAllByMonth: async (year, month) => {\n\t\tlet res = await axios.get(\"/api/appointment/\" + year + \"/\" + month);\n\t\treturn res.data || [];\n\t},\n\tgetAllByWeek: async (year, week) => {\n\t\tlet res = await axios.get(\"/api/appointment/util/byweek/\" + year + \"/\" + week);\n\t\treturn res.data || [];\n\t},\n\tgetAllByUser: async (userId) => {\n\t\tlet res = await axios.get(\"/api/appointment/user/\" + userId);\n\t\treturn res.data || [];\n\t},\n\tgetData: async (sectionId, langCode) => {\n\t\tlet res = await axios.get(\"/api/appointment/\" + sectionId + \"/\" + langCode);\n\t\treturn res.data || {};\n\t},\n\tgetActiveCount: async () => {\n\t\tlet res = await axios.get(\"/api/appointment/util/count\");\n\t\treturn res.data || {};\n\t},\n\tadd: async (params) => {\n\t\tlet res = await axios.post(\"/api/appointment\", params);\n\t\treturn res.data;\n\t},\n\tupdate: async (id, appointment) => {\n\t\tlet res = await axios.patch(\"/api/appointment/\" + id, appointment);\n\t\treturn res.data;\n\t},\n\tdelete: async (sectionId) => {\n\t\tlet res = await axios.delete(\"/api/appointment/\" + sectionId);\n\t\treturn res.data;\n\t},\n\tdeleteAll: async () => {\n\t\tlet res = await axios.delete(\"/api/appointment\");\n\t\treturn res.data;\n\t},\n\tcancel: async (userId, appointmentId) => {\n\t\tlet res = await axios.post(\n\t\t\t\"/api/appointment/user/\" + userId + \"/appointment/\" + appointmentId + \"/cancel\"\n\t\t);\n\t\treturn res.data;\n\t},\n\tbook: async (userId, appointmentId) => {\n\t\tlet res = await axios.post(\n\t\t\t\"/api/appointment/user/\" + userId + \"/appointment/\" + appointmentId + \"/book\"\n\t\t);\n\t\treturn res.data;\n\t},\n\tbookInternal: async (userId, appointmentId) => {\n\t\tlet res = await axios.post(\n\t\t\t\"/api/appointment/user/\" + userId + \"/appointment/\" + appointmentId + \"/bookinternal\"\n\t\t);\n\t\treturn res.data;\n\t},\n};\n"],"sourceRoot":""}