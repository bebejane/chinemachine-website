(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[13],{157:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(158);function a(t,e){if(t){if("string"===typeof t)return Object(r.a)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(t,e):void 0}}},158:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",(function(){return r}))},318:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(157);function a(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=Object(r.a)(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return o=t.done,t},e:function(t){c=!0,i=t},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}},335:function(t,e,n){"use strict";var r=n(42),a=n.n(r),i=n(43),o=n(46);e.a={get:function(){var t=Object(i.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("/api/image/"+e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getAll:function(){var t=Object(i.a)(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("/api/image");case 2:return e=t.sent,t.abrupt("return",e.data||[]);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),add:function(){var t=Object(i.a)(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new FormData).append("image",e.image),n.append("mimeType",e.mimeType),t.next=5,Object(o.a)({url:"/api/image",method:"POST",data:n,headers:{Accept:"application/json","Content-Type":"multipart/form-data"}});case 5:return r=t.sent,t.abrupt("return",r.data);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),update:function(){var t=Object(i.a)(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new FormData).append("_id",e._id),n.append("image",e.image),n.append("mimeType",e.mimeType),t.next=6,Object(o.a)({url:"/api/image",method:"PATCH",data:n,headers:{Accept:"application/json","Content-Type":"multipart/form-data"}});case 6:return r=t.sent,t.abrupt("return",r.data);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),delete:function(){var t=Object(i.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.delete("/api/image/"+e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),deleteAll:function(){var t=Object(i.a)(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.delete("/api/image");case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}},385:function(t,e,n){},45:function(t,e,n){"use strict";var r=n(42),a=n.n(r),i=n(43),o=n(46);e.a={getUser:function(){var t=Object(i.a)(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("/status");case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),login:function(){var t=Object(i.a)(a.a.mark((function t(e,n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("/verification/login",{email:e,password:n});case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),logout:function(){var t=Object(i.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("/verification/logout",{email:e});case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),signup:function(){var t=Object(i.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("/verification/signup",e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),verify:function(){var t=Object(i.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("/verification/verify/"+e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),reverify:function(){var t=Object(i.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("/verification/reverify/"+e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),requestPasswordReset:function(){var t=Object(i.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("/verification/reset/"+e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),updatePassword:function(){var t=Object(i.a)(a.a.mark((function t(e,n,r){var i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("/verification/update",{token:e,password:n,password2:r});case 2:return i=t.sent,t.abrupt("return",i.data);case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}},46:function(t,e,n){"use strict";var r=n(55),a=n.n(r);n.d(e,"a",(function(){return a.a})),a.a.defaults.withCredentials=!0},562:function(t,e,n){},571:function(t,e,n){"use strict";n.r(e);var r=n(42),a=n.n(r),i=n(43),o=n(9),c=n(10),u=n(16),s=n(12),l=n(11),f=n(1),p=n.n(f),d=(n(562),n(318)),h=(n(385),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.floor(Math.random()*t)+e}),v=function(t){Object(s.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(o.a)(this,n),(r=e.call(this,t)).state={hold:!1},r.handleClick=r.handleClick.bind(Object(u.a)(r)),r.id="slot"+1e7*Math.random(),r.height=0,r.width=0,r.innerHeight=0,r.timeout=null,r}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.calculateSize()}},{key:"calculateSize",value:function(){var t=document.getElementById(this.id+"-wrap");this.innerHeight=t.parentElement.clientHeight,this.height=t.clientHeight,this.width=t.clientWidth}},{key:"handleClick",value:function(t,e){var n=this;if(e)return t(this.winner);var r=document.getElementById(this.id);clearTimeout(this.timeout),this.timeout=function(t,e,n){var r=h()+60,a=.1*h(6,1)+.2,i=(t.scrollHeight,h()*t.clientHeight),o=null;t.scrollTop=i;var c=function(){var n,r=t.scrollTop,a=t.parentElement.clientHeight,i=[],c=Object(d.a)(t.children[0].children);try{for(c.s();!(n=c.n()).done;){var u=n.value;i.push(u)}}catch(l){c.e(l)}finally{c.f()}var s=i.sort((function(t,e){return Math.abs(t.offsetTop-r-a/2)>Math.abs(e.offsetTop-r-a/2)}))[0];s.scrollIntoView({behavior:"smooth",block:"center"}),o=setTimeout((function(){e(s)}),500)};return function(){clearTimeout(o);var e,n=Object(d.a)(t.children[0].children);try{for(n.s();!(e=n.n()).done;){e.value.classList.remove("slot-winner")}}catch(r){n.e(r)}finally{n.f()}}(),function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,u=r-n;return u<3?c():o=setTimeout((function(){i+=u,t.scrollTop=i,e(n+=a)}),20)}()}(r,(function(e){n.winner=e,t(e)}))}},{key:"toggleHold",value:function(){this.setState({hold:!this.state.hold})}},{key:"render",value:function(){var t=this.props.children,e=this.state;e.id,e.hold;return p.a.createElement("div",{id:this.id,className:"slotty-row"},p.a.createElement("div",{id:this.id+"-wrap",className:"slotty-content"},t))}}]),n}(f.Component),m=(f.Component,n(335),n(45),["lover","baby","steamer","FLIR","red herring","chine machine","lover","baby","steamer","FLIR","red herring","chine machine","lover","baby","steamer","FLIR","red herring","chine machine"]),y=function(t){Object(s.a)(n,t);var e=Object(l.a)(n);function n(t){var r;Object(o.a)(this,n),(r=e.call(this,t)).state={match:!1,playing:!1,holds:{}},r.onStart=r.onStart.bind(Object(u.a)(r));for(var a=0;a<5;a++)m=m.concat(m);return r.rows=[{elements:m.map((function(t,e){return p.a.createElement("div",{key:e+"-1",id:t,className:"slot"},t)})),ref:p.a.createRef()},{elements:m.map((function(t,e){return p.a.createElement("div",{key:e+"-2",id:t,className:"slot"},t)})),ref:p.a.createRef()},{elements:m.map((function(t,e){return p.a.createElement("div",{key:e+"-3",id:t,className:"slot"},t)})),ref:p.a.createRef()}],r}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=Object(i.a)(a.a.mark((function t(){var e=this;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.title="Chinemachine / Slotty",document.addEventListener("keydown",(function(t){"Space"===t.code&&e.onStart()}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"onStart",value:function(){var t=this;this.reset();var e=this.state.holds,n=[];this.setState({match:!1,playing:!0}),this.rows.forEach((function(r,a){setTimeout((function(){return r.ref.current.handleClick((function(e){if(e.classList.add("slot-stopped"),n.push(e),n.length===t.rows.length){var r=n[0].attributes.getNamedItem("id").value;n.filter((function(t){return t.attributes.getNamedItem("id").value==r})).length===n.length&&t.onMatch(r,n),t.setState({playing:!1})}}),e[a])}),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.floor(Math.random()*t)+e}(100,200))}))}},{key:"toggleHold",value:function(t){var e=this.state.holds;e[t]=!e[t]||!e[t],this.setState({holds:e})}},{key:"onMatch",value:function(t,e){e.forEach((function(t){t.classList.remove("slot-stopped"),t.classList.add("slot-winner"),t.classList.add("blinker")})),this.setState({match:t})}},{key:"reset",value:function(){document.querySelectorAll("div.slot").forEach((function(t){t.classList.remove("slot-stopped"),t.classList.remove("slot-winner"),t.classList.remove("blinker")})),clearInterval(this.interval)}},{key:"render",value:function(){var t=this,e=this.state,n=(e.match,e.holds),r=e.playing;return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{id:"slotty"},p.a.createElement("div",{id:"slotty-rows"},this.rows.map((function(t,e){return p.a.createElement(v,{key:e,ref:t.ref},t.elements)}))),p.a.createElement("div",{id:"slotty-holds"},this.rows.map((function(e,r){return p.a.createElement("div",{key:r,className:"slot-hold "+(n[r]?"held":""),onMouseDown:function(){return t.toggleHold(r)}},"HOLD")}))),p.a.createElement("div",{id:"slotty-play"},p.a.createElement("div",{className:r?"blinker":"",onMouseDown:function(){return t.onStart()},disabled:r},"PLAY"))))}}]),n}(f.Component);e.default=y}}]);
//# sourceMappingURL=13.a26c2caf.chunk.js.map